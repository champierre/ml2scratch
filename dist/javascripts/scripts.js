!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=78)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);function o(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function i(e,t){if(!e)throw new Error(t)}function a(e,t){if(void 0===t&&(t=[]),Array.isArray(e))for(var n=0;n<e.length;++n)a(e[n],t);else t.push(e);return t}function s(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function u(e){if("float32"===e)return t.NAN_FLOAT32;if("int32"===e)return t.NAN_INT32;if("bool"===e)return t.NAN_BOOL;throw new Error("Unknown dtype "+e)}function c(e,n){if(isNaN(e))return!0;if("float32"===n)return!1;if("int32"===n)return e===t.NAN_INT32;if("bool"===n)return e===t.NAN_BOOL;throw new Error("Unknown dtype "+n)}function l(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function p(e){if(null==e)return[];if(e instanceof r.Tensor)return[e];var t=[],n=e;if(!function(e){return Array.isArray(e)||"object"==typeof e}(n))return[];for(var o in n){var i=a(n[o]).filter(function(e){return e instanceof r.Tensor});t.push.apply(t,i)}return t}t.shuffle=o,t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))},t.randUniform=function(e,t){return Math.random()*(t-e)+e},t.distSquared=function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},t.assert=i,t.assertShapesMatch=function(e,t,n){void 0===n&&(n=""),i(s(e,t),n+"Shapes "+e+" and "+t+" must match")},t.assertTypesMatch=function(e,t){i(e.dtype===t.dtype,"The dtypes of the first ("+e.dtype+") and second ("+t.dtype+") input must match")},t.flatten=a,t.inferShape=function(e){if(l(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;)t.push(e.length),e=e[0];return t},t.sizeFromShape=function(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t},t.isScalarShape=function(e){return 0===e.length},t.arraysEqual=s,t.isInt=function(e){return e%1==0},t.tanh=function(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},t.sizeToSquarishShape=function(e){for(var t=Math.floor(Math.sqrt(e));t>1;--t)if(e%t==0)return[t,e/t];return[1,e]},t.createShuffledIndices=function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return o(t),t},t.rightPad=function(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)},t.repeatedTry=function(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,o){var i=0,a=function(){if(e())r();else{var s=t(++i);null!=n&&i>=n?o():setTimeout(a,s)}};setTimeout(a,0)})},t.getQueryParams=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")}),t},t.inferFromImplicitShape=function(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<=0)throw Error("Shapes can not be <= 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size ("+t+") must match the product of shape "+e);return e}if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i},t.NAN_INT32=1<<31,t.NAN_BOOL=255,t.NAN_FLOAT32=NaN,t.getNaN=u,t.isValNaN=c,t.squeezeShape=function(e,t){for(var n=[],r=[],o=0,i=0;i<e.length;++i){if(null!=t){if(t[o]===i&&e[i]>1)throw new Error("Can't squeeze axis "+i+" since its dim '"+e[i]+"' is not 1");(null==t[o]||t[o]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),t[o]<=i&&o++}e[i]>1&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}},t.getTypedArrayFromDType=function(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n},t.isTensorInList=function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1},t.checkForNaN=function(e,t,n){for(var r=0;r<e.length;r++)if(c(e[r],t))throw Error("The result of the '"+n+"' has NaNs.")},t.flattenNameArrayMap=function(e,t){var n=[];if(e instanceof r.Tensor)n.push(e);else for(var o=e,i=0;i<t.length;i++)n.push(o[t[i]]);return n},t.unflattenToNameArrayMap=function(e,t){if(e.length!==t.length)throw new Error("Cannot unflatten Tensor[], keys and arrays are not of same length.");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n},t.hasEncodingLoss=function(e,t){return!("float32"===t||"int32"===t&&"float32"!==e||"bool"===t&&"bool"===e)},t.copyTypedArray=function(e,t){if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t){for(var n=new Int32Array(e.length),r=0;r<n.length;++r)c(i=e[r],"int32")?n[r]=u("int32"):n[r]=i;return n}if("bool"===t){var o=new Uint8Array(e.length);for(r=0;r<o.length;++r){var i;c(i=e[r],"bool")?o[r]=u("bool"):0!==Math.round(i)&&(o[r]=1)}return o}throw new Error("Unknown data type "+t)},t.isTypedArray=l,t.bytesPerElement=function(e){if("float32"===e||"int32"===e)return 4;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)},t.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},t.extractTensorsFromContainer=function(e){return p(e)},t.extractTensorsFromAny=p},function(e,t,n){"use strict";(function(e){var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(93),a=n(4),s=n(94),u=n(27),c=n(0);function l(e,t){return null!=e.getExtension(t)}function p(e){if(0===e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=document.createElement("canvas");return 1===e?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}function h(e){if(null!=e){var t=e.getExtension("WEBGL_lose_context");if(null==t)throw new Error("Extension WEBGL_lose_context not supported on this browser.");t.loseContext()}}function d(e){var t=p(e);return null!=t&&(h(t),!0)}!function(e){e[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING=2]="STRING"}(o=t.Type||(t.Type={})),t.URL_PROPERTIES=[{name:"DEBUG",type:o.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:o.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:o.BOOLEAN},{name:"WEBGL_VERSION",type:o.NUMBER},{name:"WEBGL_FLOAT_TEXTURE_ENABLED",type:o.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:o.BOOLEAN},{name:"BACKEND",type:o.STRING}];var f=["webgl","cpu"],m=function(){function e(e){this.features={},this.BACKEND_REGISTRY={},this.backends=this.BACKEND_REGISTRY,null!=e&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return e.setBackend=function(e,n){if(void 0===n&&(n=!1),!(e in t.ENV.backends))throw new Error("Backend type '"+e+"' not found in registry");t.ENV.globalMath=new u.NDArrayMath(e,n)},e.getBackend=function(){return t.ENV.initEngine(),t.ENV.currentBackendType},e.memory=function(){return t.ENV.engine.memory()},e.prototype.get=function(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])},e.prototype.set=function(e,t){this.features[e]=t},e.prototype.getBestBackendType=function(){for(var e=0;e<f.length;++e){var t=f[e];if(t in this.backends)return t}throw new Error("No backend found in registry.")},e.prototype.evaluateFeature=function(e){if("DEBUG"===e)return!1;if("BACKEND"===e)return this.getBestBackendType();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===e){var t=this.get("WEBGL_VERSION");return 0===t?0:function(e){if(0===e)return 0;var t,n=p(e);return t=l(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:l(n,"EXT_disjoint_timer_query")?1:0,null!=n&&h(n),t}(t)}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===e)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!i.isMobile();if("WEBGL_VERSION"===e)return d(2)?2:d(1)?1:0;if("WEBGL_FLOAT_TEXTURE_ENABLED"===e)return function(e){if(0===e)return!1;var t=p(e);if(1===e){if(!l(t,"OES_texture_float"))return!1}else if(!l(t,"EXT_color_buffer_float"))return!1;var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var o=2===e?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,o,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;t.readPixels(0,0,1,1,t.RGBA,t.FLOAT,new Float32Array(4));var a=t.getError()===t.NO_ERROR;return h(t),i&&a}(this.get("WEBGL_VERSION"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===e)return function(e){if(2!==e)return!1;var t=p(e),n=l(t,"WEBGL_get_buffer_sub_data_async");return h(t),n}(this.get("WEBGL_VERSION"));throw new Error("Unknown feature "+e+".")},e.prototype.setFeatures=function(e){this.reset(),this.features=e,this.backends={}},e.prototype.reset=function(){if(this.features=v(),null!=this.globalMath&&(this.globalMath.dispose(),this.globalMath=null,this.globalEngine=null),this.backends!==this.BACKEND_REGISTRY){for(var e in this.backends)this.backends[e].dispose();this.backends=this.BACKEND_REGISTRY}},e.prototype.setMath=function(e,n,r){if(void 0===r&&(r=!1),this.globalMath!==e){var o=!1;"string"==typeof n?(this.currentBackendType=n,n=t.ENV.findBackend(n)):(o=!0,this.currentBackendType="custom"),this.globalEngine=new s.Engine(n,o,r),this.globalMath=e}},e.prototype.findBackend=function(e){return this.backends[e]},e.prototype.addCustomBackend=function(e,t){if(e in this.backends)throw new Error(e+" backend was already registered");try{var n=t();return this.backends[e]=n,!0}catch(e){return!1}},e.prototype.registerBackend=function(e,t){if(e in this.BACKEND_REGISTRY)throw new Error(e+" backend was already registered as global");try{var n=t();return this.BACKEND_REGISTRY[e]=n,!0}catch(e){return!1}},Object.defineProperty(e.prototype,"math",{get:function(){return this.initEngine(),this.globalMath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),e.prototype.initEngine=function(){null==this.globalEngine&&(this.globalMath=new u.NDArrayMath(t.ENV.get("BACKEND"),!1))},r([a.doc({heading:"Environment"})],e,"setBackend",null),r([a.doc({heading:"Environment"})],e,"getBackend",null),r([a.doc({heading:"Performance",subheading:"Memory"})],e,"memory",null),e}();t.Environment=m;var g="dljsflags";function v(){var e={};if("undefined"==typeof window)return e;var n=c.getQueryParams(window.location.search);if(g in n){var r={};n[g].split(",").forEach(function(e){var t=e.split(":"),n=t[0],o=t[1];r[n]=o}),t.URL_PROPERTIES.forEach(function(t){t.name in r&&(console.log("Setting feature override from URL "+t.name+": "+r[t.name]),t.type===o.NUMBER?e[t.name]=+r[t.name]:t.type===o.BOOLEAN?e[t.name]="true"===r[t.name]:t.type===o.STRING?e[t.name]=r[t.name]:console.warn("Unknown URL param: "+t.name+"."))})}return e}t.ENV=function(){var t=function(){var t;if("undefined"!=typeof window)t=window;else{if(void 0===e)throw new Error("Could not find a global object");t=e}return t}();return t.ENV=t.ENV||new m(v()),t.ENV}()}).call(this,n(30))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),o=n(59);t.tidy=o.Tracking.tidy,t.keep=o.Tracking.keep,t.dispose=o.Tracking.dispose,t.time=o.Tracking.time,t.grad=r.Gradients.grad,t.valueAndGrad=r.Gradients.valueAndGrad,t.grads=r.Gradients.grads,t.valueAndGrads=r.Gradients.valueAndGrads,t.variableGrads=r.Gradients.variableGrads,t.customGrad=r.Gradients.customGrad},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=n(1),c=n(6),l=n(41),p=n(0),h=function(){function e(e,t,n){if(this.shape=e,this.dtype=t,this.values=n,null!=n){var r=n.length,o=p.sizeFromShape(e);p.assert(r===o,"Length of values '"+r+"' does not match the size inferred by the shape '"+o+"'")}this.values=n||p.getTypedArrayFromDType(t,p.sizeFromShape(e)),this.strides=w(e),this.size=p.sizeFromShape(e)}return e.prototype.set=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];0===t.length&&(t=[0]),p.assert(t.length===this.rank,"The number of provided coordinates ("+t.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(t);this.values[r]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return d.make(this.shape,{values:this.values},this.dtype)},o([s.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"set",null),o([s.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"get",null),o([s.doc({heading:"Tensors",subheading:"Creation"})],e.prototype,"toTensor",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e)}();t.TensorBuffer=h;var d=function(){function e(e,n,r,o){this.isDisposed=!1,this.size=p.sizeFromShape(e),null!=r&&p.assert(this.size===r.length,"Constructing tensor of shape ("+this.size+") should match the length of values ("+r.length+")"),this.shape=e,this.dtype=n||"float32",this.strides=w(e),this.dataId=null!=o?o:{},this.id=t.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",u.ENV.engine.registerTensor(this),null!=r&&u.ENV.engine.write(this.dataId,r)}return t=e,e.ones=function(e,t){return c.ones(e,t)},e.zeros=function(e,t){return c.zeros(e,t)},e.onesLike=function(e){return c.onesLike(e)},e.zerosLike=function(e){return c.zerosLike(e)},e.like=function(e){return c.clone(e)},e.make=function(e,n,r){return new t(e,r,n.values,n.dataId)},e.fromPixels=function(e,t){return void 0===t&&(t=3),c.fromPixels(e,t)},e.rand=function(e,t,n){return c.rand(e,t,n)},e.randNormal=function(e,t,n,r,o){return void 0===t&&(t=0),void 0===n&&(n=1),c.randomNormal(e,t,n,r,o)},e.randTruncatedNormal=function(e,t,n,r,o){return void 0===t&&(t=0),void 0===n&&(n=1),c.truncatedNormal(e,t,n,r,o)},e.randUniform=function(e,t,n,r){return c.randomUniform(e,t,n,r)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),p.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.asType=function(e){return this.throwIfDisposed(),c.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.throwIfDisposed(),0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.dataSync()[n]},e.prototype.val=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return 0===e.length&&(e=[0]),this.throwIfDisposed(),[4,this.data()];case 1:return t.sent(),[2,this.get.apply(this,e)]}})})},e.prototype.locToIndex=function(e){if(this.throwIfDisposed(),0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(this.throwIfDisposed(),0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},e.prototype.getValues=function(){return this.dataSync()},e.prototype.getValuesAsync=function(){return this.data()},e.prototype.buffer=function(){return c.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.data=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.throwIfDisposed(),[2,u.ENV.engine.read(this.dataId)]})})},e.prototype.dataSync=function(){return this.throwIfDisposed(),u.ENV.engine.readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,u.ENV.engine.disposeTensor(this))},e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),c.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),c.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),c.expandDims(this,e)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),c.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),c.clone(this)},e.prototype.toString=function(){return l.tensorToString(this,!0)},e.prototype.tile=function(e){return this.throwIfDisposed(),c.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),c.gather(this,e)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),c.matMul(this,e,t,n)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),c.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),c.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),c.reverse(this,e)},e.prototype.concat=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),c.concat([this,e],t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),c.stack([this,e],t)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),c.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),this.throwIfDisposed(),c.batchNormalization(this,e,t,n,r,o)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),c.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),c.sum(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),c.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),c.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),c.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),c.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),c.argMax(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),c.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),c.addStrict(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),c.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),c.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),c.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),c.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),c.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),c.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),c.div(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),c.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),c.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),c.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),c.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),c.maximumStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),c.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),c.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),c.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),c.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),c.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),c.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),c.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),c.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),c.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),c.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),c.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),c.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),c.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),c.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),c.logicalOr(this,e)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),c.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),c.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),c.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),c.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),c.floor(this)},e.prototype.exp=function(){return this.throwIfDisposed(),c.exp(this)},e.prototype.log=function(){return this.throwIfDisposed(),c.log(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),c.sqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),c.square(this)},e.prototype.abs=function(){return this.throwIfDisposed(),c.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),c.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),c.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),c.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),c.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),c.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),c.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),c.sigmoid(this)},e.prototype.sin=function(){return this.throwIfDisposed(),c.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),c.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),c.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),c.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),c.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),c.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),c.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),c.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),c.tanh(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),c.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),c.softmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),c.image.resizeBilinear(this,e,t)},e.prototype.conv1d=function(e,t,n,r){return this.throwIfDisposed(),c.conv1d(this,e,t,n,r)},e.prototype.conv2d=function(e,t,n,r){return this.throwIfDisposed(),c.conv2d(this,e,t,n,r)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),c.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o){return void 0===r&&(r=[1,1]),this.throwIfDisposed(),c.depthwiseConv2d(this,e,t,n,r,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),c.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),c.maxPool(this,e,t,n,r)},e.prototype.minPool=function(e,t,n,r){return this.throwIfDisposed(),c.minPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r,o){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===o&&(o="acrossChannels"),c.localResponseNormalization(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),b.variable(this,e,t,n)},e.nextId=0,o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"flatten",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"asScalar",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as1D",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as2D",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as3D",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"as4D",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"asType",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"buffer",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"data",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"dataSync",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"dispose",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toFloat",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toInt",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toBool",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"print",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"reshape",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"reshapeAs",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"expandDims",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"squeeze",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"clone",null),o([s.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"toString",null),t=o([s.doc({heading:"Tensors",subheading:"Classes"})],e);var t}();t.Tensor=d,t.NDArray=d;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.new=function(e,t){return c.scalar(e,t)},t}(d);t.Scalar=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.new=function(e,t){return c.tensor1d(e,t)},t}(d);t.Tensor1D=m,t.Array1D=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.new=function(e,t,n){return c.tensor2d(t,e,n)},t}(d);t.Tensor2D=g,t.Array2D=g;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.new=function(e,t,n){return c.tensor3d(t,e,n)},t}(d);t.Tensor3D=v,t.Array3D=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.new=function(e,t,n){return c.tensor4d(t,e,n)},t}(d);t.Tensor4D=y,t.Array4D=y;var b=function(e){function t(t,r,o){void 0===r&&(r=!0);var i=e.call(this,t.shape,t.dtype,null,t.dataId)||this;return i.trainable=r,i.name=o,null==i.name&&(i.name=n.nextVarId.toString(),n.nextVarId++),u.ENV.engine.registerVariable(i),i}return r(t,e),n=t,t.variable=function(e,t,r,o){return void 0===t&&(t=!0),null!=o&&o!==e.dtype&&(e=e.asType(o)),new n(e,t,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!p.arraysEqual(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");u.ENV.engine.disposeTensor(this),this.dataId=e.dataId,u.ENV.engine.registerTensor(this)},t.nextVarId=0,o([s.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"assign",null),o([s.doc({heading:"Tensors",subheading:"Creation"})],t,"variable",null),n=o([s.doc({heading:"Tensors",subheading:"Classes"})],t);var n}(d);t.Variable=b;var x=b.variable;function w(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}t.variable=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doc=function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}},function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";var i=[],a=n.document,s=Object.getPrototypeOf,u=i.slice,c=i.concat,l=i.push,p=i.indexOf,h={},d=h.toString,f=h.hasOwnProperty,m=f.toString,g=m.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},x={type:!0,src:!0,noModule:!0};function w(e,t,n){var r,o=(t=t||a).createElement("script");if(o.text=e,n)for(r in x)n[r]&&(o[r]=n[r]);t.head.appendChild(o).parentNode.removeChild(o)}function E(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var T=function(e,t){return new T.fn.init(e,t)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function S(e){var t=!!e&&"length"in e&&e.length,n=E(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:i.sort,splice:i.splice},T.extend=T.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(T.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,i=n&&Array.isArray(n)?n:[]):i=n&&T.isPlainObject(n)?n:{},a[t]=T.extend(c,i,r)):void 0!==r&&(a[t]=r));return a},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=s(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||m.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){w(e)},each:function(e,t){var n,r=0;if(S(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(_,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?T.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:p.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,a=[];if(S(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&a.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&a.push(o);return c.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=i[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var k=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,n,r,o,i,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x="sizzle"+1*new Date,w=e.document,E=0,T=0,_=ae(),S=ae(),k=ae(),O=function(e,t){return e===t&&(p=!0),0},C={}.hasOwnProperty,A=[],N=A.pop,D=A.push,M=A.push,R=A.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+L+"*("+B+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+L+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(L+"+","g"),V=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),U=new RegExp("^"+L+"*,"+L+"*"),G=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),q=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),W=new RegExp(j),H=new RegExp("^"+B+"$"),X={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){h()},oe=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{M.apply(A=R.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){M={apply:A.length?function(e,t){D.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ie(e,t,r,o){var i,s,c,l,p,f,v,y=t&&t.ownerDocument,E=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return r;if(!o&&((t?t.ownerDocument||t:w)!==d&&h(t),t=t||d,m)){if(11!==E&&(p=$.exec(e)))if(i=p[1]){if(9===E){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(p[2])return M.apply(r,t.getElementsByTagName(e)),r;if((i=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!k[e+" "]&&(!g||!g.test(e))){if(1!==E)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(te,ne):t.setAttribute("id",l=x),s=(f=a(e)).length;s--;)f[s]="#"+l+" "+ve(f[s]);v=f.join(","),y=J.test(e)&&me(t.parentNode)||t}if(v)try{return M.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{l===x&&t.removeAttribute("id")}}}return u(e.replace(V,"$1"),t,r,o)}function ae(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function se(e){return e[x]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return se(function(t){return t=+t,se(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ie.support={},i=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=ie.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(f=(d=a).documentElement,m=!i(d),w!==d&&(o=d.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(d.getElementsByClassName),n.getById=ue(function(e){return f.appendChild(e).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=Y.test(d.querySelectorAll))&&(ue(function(e){f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+L+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Y.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",j)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(f.compareDocumentPosition),b=t||Y.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&b(w,e)?-1:t===d||t.ownerDocument===w&&b(w,t)?1:l?P(l,e)-P(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],s=[t];if(!o||!i)return e===d?-1:t===d?1:o?-1:i?1:l?P(l,e)-P(l,t):0;if(o===i)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?le(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&h(e),t=t.replace(q,"='$1']"),n.matchesSelector&&m&&!k[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ie(t,d,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==d&&h(e),b(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==d&&h(e);var o=r.attrHandle[t.toLowerCase()],i=o&&C.call(r.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.escape=function(e){return(e+"").replace(te,ne)},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,r=[],o=0,i=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(O),p){for(;t=e[i++];)t===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return l=null,e},o=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(r=ie.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=ie.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var c,l,p,h,d,f,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(g){if(i){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(d=(c=(l=(p=(h=g)[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]||[])[0]===E&&c[1])&&c[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[E,d,b];break}}else if(y&&(b=d=(c=(l=(p=(h=t)[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]||[])[0]===E&&c[1]),!1===b)for(;(h=++d&&h&&h[m]||(b=d=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((l=(p=h[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]=[E,b]),h!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return o[x]?o(t):o.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)e[r=P(e,i[a])]=!(n[r]=i[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(V,"$1"));return r[x]?se(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return ie(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:se(function(e){return H.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=T++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,u){var c,l,p,h=[E,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(l=(p=t[x]||(t[x]={}))[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[i])&&c[0]===E&&c[1]===s)return h[2]=c[2];if(l[i]=h,h[2]=e(t,n,u))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,o){for(var i,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(s)));return a}function we(e,t,n,r,o,i){return r&&!r[x]&&(r=we(r)),o&&!o[x]&&(o=we(o,i)),se(function(i,a,s,u){var c,l,p,h=[],d=[],f=a.length,m=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ie(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!i&&t?m:xe(m,h,e,s,u),v=n?o||(i?e:f||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(c=xe(v,d),r(c,[],s,u),l=c.length;l--;)(p=c[l])&&(v[d[l]]=!(g[d[l]]=p));if(i){if(o||e){if(o){for(c=[],l=v.length;l--;)(p=v[l])&&c.push(g[l]=p);o(null,v=[],c,u)}for(l=v.length;l--;)(p=v[l])&&(c=o?P(i,p):h[l])>-1&&(i[c]=!(a[c]=p))}}else v=xe(v===a?v.splice(f,v.length):v),o?o(null,a,v,u):M.apply(a,v)})}function Ee(e){for(var t,n,o,i=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,l=ye(function(e){return e===t},s,!0),p=ye(function(e){return P(t,e)>-1},s,!0),h=[function(e,n,r){var o=!a&&(r||n!==c)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,o}];u<i;u++)if(n=r.relative[e[u].type])h=[ye(be(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[x]){for(o=++u;o<i&&!r.relative[e[o].type];o++);return we(u>1&&be(h),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(V,"$1"),n,u<o&&Ee(e.slice(u,o)),o<i&&Ee(e=e.slice(o)),o<i&&ve(e))}h.push(n)}return be(h)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,a=ie.tokenize=function(e,t){var n,o,i,a,s,u,c,l=S[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(a in n&&!(o=U.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(i=[])),n=!1,(o=G.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(o=X[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),i.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):S(e,u).slice(0)},s=ie.compile=function(e,t){var n,o=[],i=[],s=k[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[x]?o.push(s):i.push(s);(s=k(e,function(e,t){var n=t.length>0,o=e.length>0,i=function(i,a,s,u,l){var p,f,g,v=0,y="0",b=i&&[],x=[],w=c,T=i||o&&r.find.TAG("*",l),_=E+=null==w?1:Math.random()||.1,S=T.length;for(l&&(c=a===d||a||l);y!==S&&null!=(p=T[y]);y++){if(o&&p){for(f=0,a||p.ownerDocument===d||(h(p),s=!m);g=e[f++];)if(g(p,a||d,s)){u.push(p);break}l&&(E=_)}n&&((p=!g&&p)&&v--,i&&b.push(p))}if(v+=y,n&&y!==v){for(f=0;g=t[f++];)g(b,x,a,s);if(i){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=N.call(u));x=xe(x)}M.apply(u,x),l&&!i&&x.length>0&&v+t.length>1&&ie.uniqueSort(u)}return l&&(E=_,c=w),b};return n?se(i):i}(i,o))).selector=e}return s},u=ie.select=function(e,t,n,o){var i,u,c,l,p,h="function"==typeof e&&e,d=!o&&a(e=h.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&m&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(Z,ee),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(i=X.needsContext.test(e)?0:u.length;i--&&(c=u[i],!r.relative[l=c.type]);)if((p=r.find[l])&&(o=p(c.matches[0].replace(Z,ee),J.test(u[0].type)&&me(t.parentNode)||t))){if(u.splice(i,1),!(e=o.length&&ve(u)))return M.apply(n,o),n;break}}return(h||s(e,d))(o,t,!m,n,!t||J.test(e)&&me(t.parentNode)||t),n},n.sortStable=x.split("").sort(O).join("")===x,n.detectDuplicates=!!p,h(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||ce(I,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ie}(n);T.find=k,T.expr=k.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=k.uniqueSort,T.text=k.getText,T.isXMLDoc=k.isXML,T.contains=k.contains,T.escapeSelector=k.escape;var O=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&T(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=T.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,n){return y(t)?T.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?T.grep(e,function(e){return e===t!==n}):"string"!=typeof t?T.grep(e,function(e){return p.call(t,e)>-1!==n}):T.filter(t,e,n)}T.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?T.find.matchesSelector(r,e)?[r]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<r;t++)if(T.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)T.find(e,o[t],n);return r>1?T.uniqueSort(n):n},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&A.test(e)?T(e):e||[],!1).length}});var R,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||R,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),D.test(r[1])&&T.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=a.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,R=T(a);var I=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function B(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&T(e);if(!A.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?T.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?p.call(T(e),this[0]):p.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return B(e,"nextSibling")},prev:function(e){return B(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(e,t){T.fn[e]=function(n,r){var o=T.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=T.filter(r,o)),this.length>1&&(L[e]||T.uniqueSort(o),I.test(e)&&o.reverse()),this.pushStack(o)}});var F=/[^\x20\t\r\n\f]+/g;function j(e){return e}function z(e){throw e}function V(e,t,n,r){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(n):e&&y(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match(F)||[],function(e,n){t[n]=!0}),t}(e):T.extend({},e);var t,n,r,o,i=[],a=[],s=-1,u=function(){for(o=o||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){T.each(n,function(n,r){y(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==E(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return T.each(arguments,function(e,t){for(var n;(n=T.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?T.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return T.Deferred(function(n){T.each(t,function(t,r){var o=y(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,r,o){var i=0;function a(e,t,r,o){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(e<i)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?o?c.call(n,a(i,t,j,o),a(i,t,z,o)):(i++,c.call(n,a(i,t,j,o),a(i,t,z,o),a(i,t,j,t.notifyWith))):(r!==j&&(s=void 0,u=[n]),(o||t.resolveWith)(s,u))}},l=o?c:function(){try{c()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,l.stackTrace),e+1>=i&&(r!==z&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?l():(T.Deferred.getStackHook&&(l.stackTrace=T.Deferred.getStackHook()),n.setTimeout(l))}}return T.Deferred(function(n){t[0][3].add(a(0,n,y(o)?o:j,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:j)),t[2][3].add(a(0,n,y(r)?r:z))}).promise()},promise:function(e){return null!=e?T.extend(e,o):o}},i={};return T.each(t,function(e,n){var a=n[2],s=n[5];o[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=a.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),o=u.call(arguments),i=T.Deferred(),a=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?u.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(V(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||y(o[n]&&o[n].then)))return i.then();for(;n--;)V(o[n],a(n),i.reject);return i.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&U.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){n.setTimeout(function(){throw e})};var G=T.Deferred();function q(){a.removeEventListener("DOMContentLoaded",q),n.removeEventListener("load",q),T.ready()}T.fn.ready=function(e){return G.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||G.resolveWith(a,[T]))}}),T.ready.then=G.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(T.ready):(a.addEventListener("DOMContentLoaded",q),n.addEventListener("load",q));var W=function(e,t,n,r,o,i,a){var s=0,u=e.length,c=null==n;if("object"===E(n))for(s in o=!0,n)W(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,y(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(T(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):u?t(e[0],n):i},H=/^-ms-/,X=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function Q(e){return e.replace(H,"ms-").replace(X,K)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=T.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[Q(t)]=n;else for(r in t)o[Q(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Q(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Q):(t=Q(t))in r?[t]:t.match(F)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||T.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var J=new $,Z=new $,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),T.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=Z.get(i),1===i.nodeType&&!J.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Q(r.slice(5)),ne(i,r,o[r]));J.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Z.set(this,e)}):W(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=Z.get(i,e))?n:void 0!==(n=ne(i,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),T.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),r=n.length,o=n.shift(),i=T._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){T.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:T.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),T.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?T.queue(this[0],e):void 0===t?this:this.each(function(){var n=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&T.dequeue(this,e)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=T.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=J.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&T.contains(e.ownerDocument,e)&&"none"===T.css(e,"display")},se=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in o=n.apply(e,r||[]),t)e.style[i]=a[i];return o};function ue(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return T.css(e,t,"")},u=s(),c=n&&n[3]||(T.cssNumber[t]?"":"px"),l=(T.cssNumber[t]||"px"!==c&&+u)&&oe.exec(T.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)T.style(e,t,l+c),(1-i)*(1-(i=s()/u||.5))<=0&&(a=0),l/=i;l*=2,T.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=o)),o}var ce={};function le(e){var t,n=e.ownerDocument,r=e.nodeName,o=ce[r];return o||(t=n.body.appendChild(n.createElement(r)),o=T.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ce[r]=o,o)}function pe(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(o[i]=J.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&ae(r)&&(o[i]=le(r))):"none"!==n&&(o[i]="none",J.set(r,"display",n)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}T.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?T(this).show():T(this).hide()})}});var he=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?T.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ye=/<|&#?\w+;/;function be(e,t,n,r,o){for(var i,a,s,u,c,l,p=t.createDocumentFragment(),h=[],d=0,f=e.length;d<f;d++)if((i=e[d])||0===i)if("object"===E(i))T.merge(h,i.nodeType?[i]:i);else if(ye.test(i)){for(a=a||p.appendChild(t.createElement("div")),s=(de.exec(i)||["",""])[1].toLowerCase(),u=me[s]||me._default,a.innerHTML=u[1]+T.htmlPrefilter(i)+u[2],l=u[0];l--;)a=a.lastChild;T.merge(h,a.childNodes),(a=p.firstChild).textContent=""}else h.push(t.createTextNode(i));for(p.textContent="",d=0;i=h[d++];)if(r&&T.inArray(i,r)>-1)o&&o.push(i);else if(c=T.contains(i.ownerDocument,i),a=ge(p.appendChild(i),"script"),c&&ve(a),n)for(l=0;i=a[l++];)fe.test(i.type||"")&&n.push(i);return p}!function(){var e=a.createDocumentFragment().appendChild(a.createElement("div")),t=a.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var xe=a.documentElement,we=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function Se(){return!1}function ke(){try{return a.activeElement}catch(e){}}function Oe(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Oe(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Se;else if(!o)return e;return 1===i&&(a=o,(o=function(e){return T().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),e.each(function(){T.event.add(this,t,o,r,n)})}T.event={global:{},add:function(e,t,n,r,o){var i,a,s,u,c,l,p,h,d,f,m,g=J.get(e);if(g)for(n.handler&&(n=(i=n).handler,o=i.selector),o&&T.find.matchesSelector(xe,o),n.guid||(n.guid=T.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(F)||[""]).length;c--;)d=m=(s=Te.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),d&&(p=T.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=T.event.special[d]||{},l=T.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:f.join(".")},i),(h=u[d])||((h=u[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,f,a)||e.addEventListener&&e.addEventListener(d,a)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,l):h.push(l),T.event.global[d]=!0)},remove:function(e,t,n,r,o){var i,a,s,u,c,l,p,h,d,f,m,g=J.hasData(e)&&J.get(e);if(g&&(u=g.events)){for(c=(t=(t||"").match(F)||[""]).length;c--;)if(d=m=(s=Te.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),d){for(p=T.event.special[d]||{},h=u[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=h.length;i--;)l=h[i],!o&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(i,1),l.selector&&h.delegateCount--,p.remove&&p.remove.call(e,l));a&&!h.length&&(p.teardown&&!1!==p.teardown.call(e,f,g.handle)||T.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)T.event.remove(e,d+t[c],n,r,!0);T.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=T.event.fix(e),u=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],l=T.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,c),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(r=((T.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,o,i,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],a={},n=0;n<u;n++)void 0===a[o=(r=t[n]).selector+" "]&&(a[o]=r.needsContext?T(o,this).index(c)>-1:T.find(o,this,null,[c]).length),a[o]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ke()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ke()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||T.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),T.fn.extend({on:function(e,t,n,r){return Oe(this,e,t,n,r)},one:function(e,t,n,r){return Oe(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,T(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){T.event.remove(this,e,n,t)})}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,r,o,i,a,s,u,c;if(1===t.nodeType){if(J.hasData(e)&&(i=J.access(e),a=J.set(t,i),c=i.events))for(o in delete a.handle,a.events={},c)for(n=0,r=c[o].length;n<r;n++)T.event.add(t,o,c[o][n]);Z.hasData(e)&&(s=Z.access(e),u=T.extend({},s),Z.set(t,u))}}function Le(e,t){var n=t.nodeName.toLowerCase();"input"===n&&he.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Be(e,t,n,r){t=c.apply([],t);var o,i,a,s,u,l,p=0,h=e.length,d=h-1,f=t[0],m=y(f);if(m||h>1&&"string"==typeof f&&!v.checkClone&&Ne.test(f))return e.each(function(o){var i=e.eq(o);m&&(t[0]=f.call(this,o,i.html())),Be(i,t,n,r)});if(h&&(i=(o=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=i),i||r)){for(s=(a=T.map(ge(o,"script"),Re)).length;p<h;p++)u=o,p!==d&&(u=T.clone(u,!0,!0),s&&T.merge(a,ge(u,"script"))),n.call(e[p],u,p);if(s)for(l=a[a.length-1].ownerDocument,T.map(a,Pe),p=0;p<s;p++)u=a[p],fe.test(u.type||"")&&!J.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(u.src):w(u.textContent.replace(De,""),l,u))}return e}function Fe(e,t,n){for(var r,o=t?T.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||T.cleanData(ge(r)),r.parentNode&&(n&&T.contains(r.ownerDocument,r)&&ve(ge(r,"script")),r.parentNode.removeChild(r));return e}T.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),u=T.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(a=ge(s),r=0,o=(i=ge(e)).length;r<o;r++)Le(i[r],a[r]);if(t)if(n)for(i=i||ge(e),a=a||ge(s),r=0,o=i.length;r<o;r++)Ie(i[r],a[r]);else Ie(e,s);return(a=ge(s,"script")).length>0&&ve(a,!u&&ge(e,"script")),s},cleanData:function(e){for(var t,n,r,o=T.event.special,i=0;void 0!==(n=e[i]);i++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)o[r]?T.event.remove(n,r):T.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),T.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return W(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!me[(de.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,function(t){var n=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(ge(this)),n&&n.replaceChild(t,this))},e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){T.fn[e]=function(e){for(var n,r=[],o=T(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),T(o[a])[t](n),l.apply(r,n.get());return this.pushStack(r)}});var je=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Ve=new RegExp(ie.join("|"),"i");function Ue(e,t,n){var r,o,i,a,s=e.style;return(n=n||ze(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||T.contains(e.ownerDocument,e)||(a=T.style(e,t)),!v.pixelBoxStyles()&&je.test(a)&&Ve.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function Ge(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xe.appendChild(c).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",s=36===t(e.right),o=36===t(e.width),l.style.position="absolute",i=36===l.offsetWidth||"absolute",xe.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var r,o,i,s,u,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(v,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),i}}))}();var qe=/^(none|table(?!-c[ea]).+)/,We=/^--/,He={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Qe=a.createElement("div").style;function Ye(e){var t=T.cssProps[e];return t||(t=T.cssProps[e]=function(e){if(e in Qe)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Qe)return e}(e)||e),t}function $e(e,t,n){var r=oe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Je(e,t,n,r,o,i){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=T.css(e,n+ie[a],!0,o)),r?("content"===n&&(u-=T.css(e,"padding"+ie[a],!0,o)),"margin"!==n&&(u-=T.css(e,"border"+ie[a]+"Width",!0,o))):(u+=T.css(e,"padding"+ie[a],!0,o),"padding"!==n?u+=T.css(e,"border"+ie[a]+"Width",!0,o):s+=T.css(e,"border"+ie[a]+"Width",!0,o));return!r&&i>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))),u}function Ze(e,t,n){var r=ze(e),o=Ue(e,t,r),i="border-box"===T.css(e,"boxSizing",!1,r),a=i;if(je.test(o)){if(!n)return o;o="auto"}return a=a&&(v.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===T.css(e,"display",!1,r))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(o=parseFloat(o)||0)+Je(e,t,n||(i?"border":"content"),a,r,o)+"px"}function et(e,t,n,r,o){return new et.prototype.init(e,t,n,r,o)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=Q(t),u=We.test(t),c=e.style;if(u||(t=Ye(s)),a=T.cssHooks[t]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:c[t];"string"==(i=typeof n)&&(o=oe.exec(n))&&o[1]&&(n=ue(e,t,o),i="number"),null!=n&&n==n&&("number"===i&&(n+=o&&o[3]||(T.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var o,i,a,s=Q(t);return We.test(t)||(t=Ye(s)),(a=T.cssHooks[t]||T.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ue(e,t,r)),"normal"===o&&t in Xe&&(o=Xe[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),T.each(["height","width"],function(e,t){T.cssHooks[t]={get:function(e,n,r){if(n)return!qe.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,t,r):se(e,He,function(){return Ze(e,t,r)})},set:function(e,n,r){var o,i=ze(e),a="border-box"===T.css(e,"boxSizing",!1,i),s=r&&Je(e,t,r,a,i);return a&&v.scrollboxSize()===i.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Je(e,t,"border",!1,i)-.5)),s&&(o=oe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=T.css(e,t)),$e(0,n,s)}}}),T.cssHooks.marginLeft=Ge(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(e,t){T.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+ie[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(T.cssHooks[e+t].set=$e)}),T.fn.extend({css:function(e,t){return W(this,function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=ze(e),o=t.length;a<o;a++)i[t[a]]=T.css(e,t[a],!1,r);return i}return void 0!==n?T.style(e,t,n):T.css(e,t)},e,t,arguments.length>1)}}),T.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[T.cssProps[e.prop]]&&!T.cssHooks[e.prop]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=et.prototype.init,T.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function it(){nt&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(it):n.setTimeout(it,T.fx.interval),T.fx.tick())}function at(){return n.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=ie[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ut(e,t,n){for(var r,o=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function ct(e,t,n){var r,o,i=0,a=ct.prefilters.length,s=T.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=tt||at(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,a=c.tweens.length;i<a;i++)c.tweens[i].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=T.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=Q(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=T.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(l,c.opts.specialEasing);i<a;i++)if(r=ct.prefilters[i].call(c,e,l,c.opts))return y(r.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return T.map(l,ut,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(F);for(var n,r=0,o=e.length;r<o;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,u,c,l,p="width"in t||"height"in t,h=this,d={},f=e.style,m=e.nodeType&&ae(e),g=J.get(e,"fxshow");for(r in n.queue||(null==(a=T._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,T.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[r],rt.test(o)){if(delete t[r],i=i||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||T.style(e,r)}if((u=!T.isEmptyObject(t))||!T.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=J.get(e,"display")),"none"===(l=T.css(e,"display"))&&(c?l=c:(pe([e],!0),c=e.style.display||c,l=T.css(e,"display"),pe([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===T.css(e,"float")&&(u||(h.done(function(){f.display=c}),null==c&&(l=f.display,c="none"===l?"":l)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=J.access(e,"fxshow",{display:c}),i&&(g.hidden=!m),m&&pe([e],!0),h.done(function(){for(r in m||pe([e]),J.remove(e,"fxshow"),d)T.style(e,r,d[r])})),u=ut(m?g[r]:0,r,h),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),T.speed=function(e,t,n){var r=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=T.isEmptyObject(e),i=T.speed(t,n,r),a=function(){var t=ct(this,T.extend({},e),i);(o||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=T.timers,a=J.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&ot.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||T.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=T.timers,a=r?r.length:0;for(n.finish=!0,T.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),T.each(["toggle","show","hide"],function(e,t){var n=T.fn[t];T.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,o)}}),T.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){T.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),tt=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){nt||(nt=!0,it())},T.fx.stop=function(){nt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var o=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(o)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var lt,pt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return W(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?T.prop(e,t,n):(1===i&&T.isXMLDoc(e)||(o=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=T.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(F);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||T.find.attr;pt[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=pt[a],pt[a]=o,o=null!=n(e,t,r)?a:null,pt[a]=i),o}});var ht=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ft(e){return(e.match(F)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}T.fn.extend({prop:function(e,t){return W(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(e)||(t=T.propFix[t]||t,o=T.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,u=0;if(y(e))return this.each(function(t){T(this).addClass(e.call(this,t,mt(this)))});if((t=gt(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+ft(o)+" "){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(s=ft(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,u=0;if(y(e))return this.each(function(t){T(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=gt(e)).length)for(;n=this[u++];)if(o=mt(n),r=1===n.nodeType&&" "+ft(o)+" "){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");o!==(s=ft(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){T(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,o,i,a;if(r)for(o=0,i=T(this),a=gt(e);t=a[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ft(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;T.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=y(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,T(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=T.map(o,function(e){return null==e?"":e+""})),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=T.valHooks[o.type]||T.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(vt,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:ft(T.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?i+1:o.length;for(r=i<0?u:a?i:0;r<u;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=T(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=T.makeArray(t),a=o.length;a--;)((r=o[a]).selected=T.inArray(T.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},v.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var yt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,r,o){var i,s,u,c,l,p,h,d,m=[r||a],g=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(s=d=u=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!yt.test(g+T.event.triggered)&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[T.expando]?e:new T.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:T.makeArray(t,[e]),h=T.event.special[g]||{},o||!h.trigger||!1!==h.trigger.apply(r,t))){if(!o&&!h.noBubble&&!b(r)){for(c=h.delegateType||g,yt.test(c+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(r.ownerDocument||a)&&m.push(u.defaultView||u.parentWindow||n)}for(i=0;(s=m[i++])&&!e.isPropagationStopped();)d=s,e.type=i>1?c:h.bindType||g,(p=(J.get(s,"events")||{})[e.type]&&J.get(s,"handle"))&&p.apply(s,t),(p=l&&s[l])&&p.apply&&Y(s)&&(e.result=p.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),t)||!Y(r)||l&&y(r[g])&&!b(r)&&((u=r[l])&&(r[l]=null),T.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,bt),r[g](),e.isPropagationStopped()&&d.removeEventListener(g,bt),T.event.triggered=void 0,u&&(r[l]=u)),e.result}},simulate:function(e,t,n){var r=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(r,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}}),v.focusin||T.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=J.access(r,t);o||r.addEventListener(e,n,!0),J.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=J.access(r,t)-1;o?J.access(r,t,o):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var xt=n.location,wt=Date.now(),Et=/\?/;T.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+e),t};var Tt=/\[\]$/,_t=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,r){var o;if(Array.isArray(t))T.each(t,function(t,o){n||Tt.test(e)?r(e,o):Ot(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==E(t))r(e,t);else for(o in t)Ot(e+"["+o+"]",t[o],n,r)}T.param=function(e,t){var n,r=[],o=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){o(this.name,this.value)});else for(n in e)Ot(n,e[n],t,o);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!he.test(e))}).map(function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}});var Ct=/%20/g,At=/#.*$/,Nt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Pt={},It={},Lt="*/".concat("*"),Bt=a.createElement("a");function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(F)||[];if(y(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function jt(e,t,n,r){var o={},i=e===It;function a(s){var u;return o[s]=!0,T.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||i||o[c]?i?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!o["*"]&&a("*")}function zt(e,t){var n,r,o=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&T.extend(!0,e,r),e}Bt.href=xt.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,T.ajaxSettings),t):zt(T.ajaxSettings,e)},ajaxPrefilter:Ft(Pt),ajaxTransport:Ft(It),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,i,s,u,c,l,p,h,d,f=T.ajaxSetup({},t),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?T(m):T.event,v=T.Deferred(),y=T.Callbacks("once memory"),b=f.statusCode||{},x={},w={},E="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Dt.exec(i);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?i:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)_.always(e[_.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return r&&r.abort(t),S(0,t),this}};if(v.promise(_),f.url=((e||f.url||xt.href)+"").replace(Rt,xt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(F)||[""],null==f.crossDomain){c=a.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),jt(Pt,f,t,_),l)return _;for(h in(p=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Mt.test(f.type),o=f.url.replace(At,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ct,"+")):(d=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Et.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Nt,"$1"),d=(Et.test(o)?"&":"?")+"_="+wt+++d),f.url=o+d),f.ifModified&&(T.lastModified[o]&&_.setRequestHeader("If-Modified-Since",T.lastModified[o]),T.etag[o]&&_.setRequestHeader("If-None-Match",T.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Lt+"; q=0.01":""):f.accepts["*"]),f.headers)_.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,_,f)||l))return _.abort();if(E="abort",y.add(f.complete),_.done(f.success),_.fail(f.error),r=jt(It,f,t,_)){if(_.readyState=1,p&&g.trigger("ajaxSend",[_,f]),l)return _;f.async&&f.timeout>0&&(u=n.setTimeout(function(){_.abort("timeout")},f.timeout));try{l=!1,r.send(x,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,a,s){var c,h,d,x,w,E=t;l||(l=!0,u&&n.clearTimeout(u),r=void 0,i=s||"",_.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,o,i,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==u[0]&&u.unshift(i),n[i]}(f,_,a)),x=function(e,t,n,r){var o,i,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(a=c[u+" "+i]||c["* "+i]))for(o in c)if((s=o.split(" "))[1]===i&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(i=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(f,x,_,c),c?(f.ifModified&&((w=_.getResponseHeader("Last-Modified"))&&(T.lastModified[o]=w),(w=_.getResponseHeader("etag"))&&(T.etag[o]=w)),204===e||"HEAD"===f.type?E="nocontent":304===e?E="notmodified":(E=x.state,h=x.data,c=!(d=x.error))):(d=E,!e&&E||(E="error",e<0&&(e=0))),_.status=e,_.statusText=(t||E)+"",c?v.resolveWith(m,[h,E,_]):v.rejectWith(m,[_,E,d]),_.statusCode(b),b=void 0,p&&g.trigger(c?"ajaxSuccess":"ajaxError",[_,f,c?h:d]),y.fireWith(m,[_,E]),p&&(g.trigger("ajaxComplete",[_,f]),--T.active||T.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,t){T[t]=function(e,n,r,o){return y(n)&&(o=o||r,r=n,n=void 0),T.ajax(T.extend({url:e,type:t,dataType:o,data:n,success:r},T.isPlainObject(e)&&e))}}),T._evalUrl=function(e){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){T(this).wrapInner(e.call(this,t))}):this.each(function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){T(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Ut=T.ajaxSettings.xhr();v.cors=!!Ut&&"withCredentials"in Ut,v.ajax=Ut=!!Ut,T.ajaxTransport(function(e){var t,r;if(v.cors||Ut&&!e.crossDomain)return{send:function(o,i){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,o){t=T("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var Gt=[],qt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||T.expando+"_"+wt++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(e,t,r){var o,i,a,s=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(qt,"$1"+o):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||T.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=n[o],n[o]=function(){a=arguments},r.always(function(){void 0===i?T(n).removeProp(o):n[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(o)),a&&y(i)&&i(a[0]),a=i=void 0}),"script"}),v.createHTMLDocument=function(){var e=a.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),o=D.exec(e),i=!n&&[],o?[t.createElement(o[1])]:(o=be([e],t,i),i&&i.length&&T(i).remove(),T.merge([],o.childNodes)));var r,o,i},T.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=ft(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&T.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?T("<div>").append(T.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(e,t,n){var r,o,i,a,s,u,c=T.css(e,"position"),l=T(e),p={};"static"===c&&(e.style.position="relative"),s=l.offset(),i=T.css(e,"top"),u=T.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+u).indexOf("auto")>-1?(a=(r=l.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(u)||0),y(t)&&(t=t.call(e,n,T.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):l.css(p)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===T.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),o.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-T.css(r,"marginTop",!0),left:t.left-o.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||xe})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;T.fn[e]=function(r){return W(this,function(e,r,o){var i;if(b(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),T.each(["top","left"],function(e,t){T.cssHooks[t]=Ge(v.pixelPosition,function(e,n){if(n)return n=Ue(e,t),je.test(n)?T(e).position()[t]+"px":n})}),T.each({Height:"height",Width:"width"},function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){T.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return W(this,function(t,n,o){var i;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?T.css(t,n,s):T.style(t,n,o,s)},t,a?o:void 0,a)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){T.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),T.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),T.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=u.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||T.guid++,o},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=N,T.isFunction=y,T.isWindow=b,T.camelCase=Q,T.type=E,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return T}.apply(t,[]))||(e.exports=r);var Wt=n.jQuery,Ht=n.$;return T.noConflict=function(e){return n.$===T&&(n.$=Ht),e&&n.jQuery===T&&(n.jQuery=Wt),T},o||(n.jQuery=n.$=T),T})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),o=n(43),i=n(44),a=n(45),s=n(42),u=n(46),c=n(47),l=n(48),p=n(49),h=n(50),d=n(31),f=n(51),m=n(52),g=n(53),v=n(54),y=n(55),b=n(56),x=n(57),w=n(58);t.batchNormalization=o.BatchNormOps.batchNormalization,t.batchNormalization2d=o.BatchNormOps.batchNormalization2d,t.batchNormalization3d=o.BatchNormOps.batchNormalization3d,t.batchNormalization4d=o.BatchNormOps.batchNormalization4d,t.concat=s.ConcatOps.concat,t.concat1d=s.ConcatOps.concat1d,t.concat2d=s.ConcatOps.concat2d,t.concat3d=s.ConcatOps.concat3d,t.concat4d=s.ConcatOps.concat4d,t.conv1d=u.ConvOps.conv1d,t.conv2d=u.ConvOps.conv2d,t.conv2dTranspose=u.ConvOps.conv2dTranspose,t.depthwiseConv2d=u.ConvOps.depthwiseConv2d,t.matMul=d.MatmulOps.matMul,t.matrixTimesVector=d.MatmulOps.matrixTimesVector,t.outerProduct=d.MatmulOps.outerProduct,t.vectorTimesMatrix=d.MatmulOps.vectorTimesMatrix,t.avgPool=m.PoolOps.avgPool,t.maxPool=m.PoolOps.maxPool,t.minPool=m.PoolOps.minPool,t.transpose=x.TransposeOps.transpose,t.reverse=v.ReverseOps.reverse,t.reverse1d=v.ReverseOps.reverse1d,t.reverse2d=v.ReverseOps.reverse2d,t.reverse3d=v.ReverseOps.reverse3d,t.reverse4d=v.ReverseOps.reverse4d,t.slice=y.SliceOps.slice,t.slice1d=y.SliceOps.slice1d,t.slice2d=y.SliceOps.slice2d,t.slice3d=y.SliceOps.slice3d,t.slice4d=y.SliceOps.slice4d,t.argMax=g.ReductionOps.argMax,t.argMin=g.ReductionOps.argMin,t.logSumExp=g.ReductionOps.logSumExp,t.max=g.ReductionOps.max,t.mean=g.ReductionOps.mean,t.min=g.ReductionOps.min,t.moments=g.ReductionOps.moments,t.sum=g.ReductionOps.sum,t.equal=a.CompareOps.equal,t.equalStrict=a.CompareOps.equalStrict,t.greater=a.CompareOps.greater,t.greaterStrict=a.CompareOps.greaterStrict,t.greaterEqual=a.CompareOps.greaterEqual,t.greaterEqualStrict=a.CompareOps.greaterEqualStrict,t.less=a.CompareOps.less,t.lessStrict=a.CompareOps.lessStrict,t.lessEqual=a.CompareOps.lessEqual,t.lessEqualStrict=a.CompareOps.lessEqualStrict,t.notEqual=a.CompareOps.notEqual,t.notEqualStrict=a.CompareOps.notEqualStrict,t.logicalNot=l.LogicalOps.logicalNot,t.logicalAnd=l.LogicalOps.logicalAnd,t.logicalOr=l.LogicalOps.logicalOr,t.logicalXor=l.LogicalOps.logicalXor,t.where=l.LogicalOps.where,t.abs=w.UnaryOps.abs,t.acos=w.UnaryOps.acos,t.asin=w.UnaryOps.asin,t.atan=w.UnaryOps.atan,t.ceil=w.UnaryOps.ceil,t.clipByValue=w.UnaryOps.clipByValue,t.cos=w.UnaryOps.cos,t.cosh=w.UnaryOps.cosh,t.elu=w.UnaryOps.elu,t.exp=w.UnaryOps.exp,t.floor=w.UnaryOps.floor,t.leakyRelu=w.UnaryOps.leakyRelu,t.log=w.UnaryOps.log,t.neg=w.UnaryOps.neg,t.prelu=w.UnaryOps.prelu,t.relu=w.UnaryOps.relu,t.selu=w.UnaryOps.selu,t.sigmoid=w.UnaryOps.sigmoid,t.sin=w.UnaryOps.sin,t.sinh=w.UnaryOps.sinh,t.sqrt=w.UnaryOps.sqrt,t.square=w.UnaryOps.square,t.step=w.UnaryOps.step,t.tan=w.UnaryOps.tan,t.tanh=w.UnaryOps.tanh,t.add=i.BinaryOps.add,t.addStrict=i.BinaryOps.addStrict,t.div=i.BinaryOps.div,t.divStrict=i.BinaryOps.divStrict,t.maximum=i.BinaryOps.maximum,t.maximumStrict=i.BinaryOps.maximumStrict,t.minimum=i.BinaryOps.minimum,t.minimumStrict=i.BinaryOps.minimumStrict,t.mul=i.BinaryOps.mul,t.mulStrict=i.BinaryOps.mulStrict,t.pow=i.BinaryOps.pow,t.powStrict=i.BinaryOps.powStrict,t.sub=i.BinaryOps.sub,t.subStrict=i.BinaryOps.subStrict,t.norm=f.NormOps.norm,t.cast=r.ArrayOps.cast,t.clone=r.ArrayOps.clone,t.fromPixels=r.ArrayOps.fromPixels,t.ones=r.ArrayOps.ones,t.onesLike=r.ArrayOps.onesLike,t.zeros=r.ArrayOps.zeros,t.zerosLike=r.ArrayOps.zerosLike,t.rand=r.ArrayOps.rand,t.randomNormal=r.ArrayOps.randomNormal,t.truncatedNormal=r.ArrayOps.truncatedNormal,t.randomUniform=r.ArrayOps.randomUniform,t.reshape=r.ArrayOps.reshape,t.squeeze=r.ArrayOps.squeeze,t.tile=r.ArrayOps.tile,t.gather=r.ArrayOps.gather,t.oneHot=r.ArrayOps.oneHot,t.linspace=r.ArrayOps.linspace,t.range=r.ArrayOps.range,t.buffer=r.ArrayOps.buffer,t.fill=r.ArrayOps.fill,t.tensor=r.ArrayOps.tensor,t.scalar=r.ArrayOps.scalar,t.tensor1d=r.ArrayOps.tensor1d,t.tensor2d=r.ArrayOps.tensor2d,t.tensor3d=r.ArrayOps.tensor3d,t.tensor4d=r.ArrayOps.tensor4d,t.print=r.ArrayOps.print,t.expandDims=r.ArrayOps.expandDims,t.stack=r.ArrayOps.stack,t.pad=r.ArrayOps.pad,t.pad1d=r.ArrayOps.pad1d,t.pad2d=r.ArrayOps.pad2d,t.pad3d=r.ArrayOps.pad3d,t.pad4d=r.ArrayOps.pad4d,t.basicLSTMCell=h.LSTMOps.basicLSTMCell,t.multiRNNCell=h.LSTMOps.multiRNNCell,t.softmax=b.SoftmaxOps.softmax,t.localResponseNormalization=p.LRNOps.localResponseNormalization;var E=n(3),T=n(21);E.Tensor,T.Rank,E.Tensor3D,E.Tensor4D,t.losses={softmaxCrossEntropy:b.SoftmaxOps.softmaxCrossEntropy},t.image={resizeBilinear:c.ImageOps.resizeBilinear}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.operation=function(e,t,n){var o=n.value;return n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r.tidy(t,function(){return o.apply(void 0,e)})},n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.disposeTransientArrays=function(e,t){},e.prototype.dispose=function(){},e}();t.Operation=r},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(75),i=n(75);t.getUnorderedEvaluationSet=function(e,t){var n={},r={},o=[],i=e.slice();t.forEach(function(e){return n[e.id]=e});for(var a=function(){var e=i.pop();null==r[e.id]&&(null==n[e.id]&&Object.keys(e.inputs).map(function(t){return e.inputs[t]}).forEach(function(e){return i.push(e.node)}),o.push(e),r[e.id]=e)};0!==i.length;)a();return o},t.getOrderedEvaluationSet=function(e){var t=[],n={},r={},a=new i.PriorityQueue(function(e,t){return o.defaultCompare(r[e.id],r[t.id])},function(e,t){return n[e.id]=t});for(e.forEach(function(e){return r[e.id]=0}),e.forEach(function(t){return Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(t){-1!==e.indexOf(t.node)&&r[t.node.id]++})}),e.forEach(function(e){return a.enqueue(e)});!a.empty();)t.unshift(a.dequeue()),Object.keys(t[0].inputs).map(function(e){return t[0].inputs[e]}).forEach(function(t){-1!==e.indexOf(t.node)&&(r[t.node.id]--,a.update(t.node,n[t.node.id]))});return t},t.isInputNode=function(e){return 0===Object.keys(e.inputs).length},t.shouldBackProp=function(e){return!(e.node instanceof r.ConstantNode)},t.isPassthroughNode=function(e,t){for(var n=Object.keys(e.inputs),r=0;r<n.length;r++){var o=e.inputs[n[r]];if(t.get(o,!0)===t.get(e.output,!0))return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[i++]):o.push(t[a++]);return o}t.axesAreInnerMostDims=o,t.combineLocations=i,t.computeOutAndReduceShapes=function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map(function(t){return e[t]})]},t.expandShapeToKeepDim=function(e,t){return i(e,t.map(function(e){return 1}),t)},t.parseAxisParam=function(e,t){var n=t.length;return e=null==e?t.map(function(e,t){return t}):[].concat(e),r.assert(e.every(function(e){return e>=-n&&e<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e),r.assert(e.every(function(e){return r.isInt(e)}),"All values in axis param must be integers but got axis "+e),e.map(function(e){return e<0?n+e:e})},t.assertAxesAreInnerMostDims=function(e,t,n){r.assert(o(t,n),e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input.")},t.getAxesPermutation=function(e,t){if(o(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n},t.getUndoAxesPermutation=function(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})},t.getInnerMostAxes=function(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.dict={}}return e.prototype.get=function(e,t){if(void 0===t&&(t=!1),!t&&void 0===this.dict[e.id])throw new Error("tensor "+e.id+" not in array map.");var n=this.dict[e.id];if(!t&&null===n)throw new Error("tensor "+e.id+" has null array.");return n},e.prototype.delete=function(e){delete this.dict[e.id]},e.prototype.nullify=function(e){this.dict[e.id]=null},e.prototype.disposeArray=function(e){if(void 0!==this.dict[e.id]){var t=this.dict[e.id];null!==t&&(t.dispose(),this.dict[e.id]=null)}},e.prototype.size=function(){return Object.keys(this.dict).length},e.prototype.dispose=function(){var e=this;Object.keys(this.dict).forEach(function(t){var n=e.dict[+t];n&&n.dispose()}),this.dict={}},e.prototype.hasNullArray=function(e){if(void 0===this.dict[e.id])throw new Error("tensor "+e.id+" not in array map.");return null===this.dict[e.id]},e}();t.TensorArrayMapBase=o;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.set=function(e,t){this.dict[e.id]=t},t}(o);t.TensorArrayMap=i;var a=function(e){function t(t){var n=e.call(this)||this;return n.math=t,n}return r(t,e),t.prototype.add=function(e,t){if(null==this.dict[e.id])this.dict[e.id]=this.math.keep(t);else{var n=this.get(e),r=this.math.keep(this.math.addStrict(n,t));this.dict[e.id]=r,n.dispose()}},t}(o);t.SummedTensorArrayMap=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(16),a=n(22);function s(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name;return"\n    float get"+t.charAt(0).toUpperCase()+t.slice(1)+"() {\n      return sample("+t+", halfCR);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.shapeInfo.texShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[0],u=n[1];if(o.arraysEqual(t,n))return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+u+".0, "+a+".0);\n      return sample("+r+", uv);\n    }\n  ";var c=o.squeezeShape(t),l=c.newShape,p=c.keptDims,h=l;return h.length<t.length?"\n      "+s(d(e,h))+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+f(["row","col"],p)+");\n      }\n    ":1===u?"\n    float "+i+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+a+".0);\n      return sample("+r+", uv);\n    }\n  ":1===a?"\n    float "+i+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+u+".0, 0.5);\n      return sample("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    vec2 uv = UVfrom2D("+a+", "+u+", "+t[1]+", row, col);\n    return sample("+r+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.texShape,n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[0],u=t[1],c=n[1]*n[2],l=n[2],p=o.squeezeShape(n),h=p.newShape,m=p.keptDims,g=h;return g.length<n.length?"\n        "+s(d(e,g))+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+f(["row","col","depth"],m)+");\n        }\n      ":u===c?"\n        float "+i+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+l+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+u+".0, "+a+".0);\n          return sample("+r+", uv);\n        }\n      ":u===l?"\n    float "+i+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+".0, "+a+".0);\n      return sample("+r+", uv);\n    }\n  ":"\n      float "+i+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+a+", "+u+", "+c+", "+l+", row, col, depth);\n        return sample("+r+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.shapeInfo.texShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[0],u=n[1],c=t[3],l=t[2]*c,p=t[1]*l,h=o.squeezeShape(t),m=h.newShape,g=h.keptDims;return m.length<t.length?"\n      "+s(d(e,m))+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+f(["row","col","depth","depth2"],g)+");\n      }\n    ":u===p?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+l+" + depth * "+c+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+u+".0, "+a+".0);\n        return sample("+r+", uv);\n      }\n    ":u===c?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+u+".0, "+a+".0);\n        return sample("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+a+", "+u+", "+p+", "+l+",\n          "+c+", row, col, depth, depth2);\n      return sample("+r+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}t.makeShader=function(e,t,n,a){var d=r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?l:u,f=r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?p:c,m=e.map(function(e){return"uniform sampler2D "+e.name+";"}).join("\n"),g=e.map(function(e){return function(e,t,n){var r=function(e){var t=e.name,n=e.shapeInfo.texShape,r="get"+t.charAt(0).toUpperCase()+t.slice(1)+"Flat",o=n[0],i=n[1];return 1===i&&1===o?"\n      float "+r+"(int index) {\n        return sample("+t+", halfCR);\n      }\n    ":1===i?"\n      float "+r+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+o+".0);\n        return sample("+t+", uv);\n      }\n    ":1===o?"\n      float "+r+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+i+".0, 0.5);\n        return sample("+t+", uv);\n      }\n    ":"\n    float "+r+"(int index) {\n      vec2 uv = UVfrom1D("+o+", "+i+", index);\n      return sample("+t+", uv);\n    }\n  "}(e);return r+=s(e),(n||o.arraysEqual(e.shapeInfo.logicalShape,t.logicalShape))&&(r+=function(e,t,n){var r=e.shapeInfo.texShape,a=e.name,s=a.charAt(0).toUpperCase()+a.slice(1),u="get"+s+"AtOutCoords",c=i.getBroadcastDims(e.shapeInfo.logicalShape,t.logicalShape),l=e.shapeInfo.logicalShape.length,p=t.logicalShape.length,h=n&&(p>l||c.length>0),d=i.broadcastDimsAreOuter(c);if(h&&!d)return function(e,t,n,r){var o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s="int";2===a?s="ivec2":3===a?s="ivec3":4===a&&(s="ivec4");var u=i.getBroadcastDims(e.shapeInfo.logicalShape,t.logicalShape),c=a-o;return"\n    float "+r+"() {\n      "+s+" coords = getOutputCoords();\n      "+(0===o?"":a<2&&u.length>=1?"coords = 0;":u.map(function(e){return"coords["+(e+c)+"] = 0;"}).join("\n"))+"\n      return get"+n+"("+(a<2&&o>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords["+(t+c)+"]"}).join(", "))+");\n    }\n  "}(e,t,s,u);var f=t.texShape;if(o.arraysEqual(r,f))return"\n      float "+u+"() {\n        return sample("+a+", resultUV);\n      }\n    ";var m=o.sizeFromShape(r),g="";return h&&d&&(g="\n        int mainPart = index / "+m+";\n        index -= mainPart * "+m+";\n      "),"\n    float "+u+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+f[0]+", "+f[1]+"));\n      int index = resTexRC.x * "+f[1]+" + resTexRC.y;\n      "+g+"\n      int texR = index / "+r[1]+";\n      int texC = index - texR * "+r[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+r[1]+".0, "+r[0]+".0);\n\n      return sample("+a+", uv);\n    }\n  "}(e,t,n)),r}(e,t,a)}).join("\n"),v=t.texShape,y=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return o.arraysEqual(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return function(e,t){var n=e[1]*e[2],r=e[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(e,t);case 4:return function(e,t){var n=e[3],r=e[2]*n,o=e[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}(t.logicalShape,v);return[h,d,f,m,y,g,n].join("\n")};var u="\n  uniform float NaN;\n\n  const vec4 floatDeltas = vec4(\n      1.0,\n      1.0 / 255.0,\n      1.0 / (255.0 * 255.0),\n      1.0 / (255.0 * 255.0 * 255.0)\n  );\n  const float minValue = "+a.FLOAT_MIN+".0;\n  const float maxValue = "+a.FLOAT_MAX+".0;\n  const float range = (maxValue - minValue) / 255.0;\n  const vec2 dotRange = vec2(1.0, range);\n\n  float sample(sampler2D texture, vec2 uv) {\n    vec4 sampleValue = texture2D(texture, uv);\n    if (all(equal(sampleValue, vec4("+a.BYTE_NAN_VALUE+")))) {\n      return NaN;\n    }\n\n    vec4 encValue = floor(sampleValue * 255.0 + 0.5);\n    float decodedValue = dot(encValue, floatDeltas);\n    return dot(vec2(minValue, decodedValue), dotRange);\n  }\n",c="\n  const vec4 floatPowers = vec4(\n    1.0,\n    255.0,\n    255.0 * 255.0,\n    255.0 * 255.0 * 255.0\n  );\n  const vec2 recipRange = vec2(1.0/range);\n  const vec2 recipRange255 = vec2(1.0/(maxValue - minValue));\n\n  void setOutput(float decodedValue) {\n    if (isNaN(decodedValue)) {\n      gl_FragColor = vec4("+a.BYTE_NAN_VALUE+");\n      return;\n    }\n\n    float a = dot(vec2(decodedValue, -minValue), recipRange);\n    float b = fract(a) * 255.0;\n    float c = fract(b) * 255.0;\n    float d = fract(c) * 255.0;\n    gl_FragColor = floor(vec4(a, b, c, d)) / 255.0;\n\n    // TODO(dsmilkov): Version above gets better accuracy but probably slower\n    // than the version below. Benchmark to determine if the accuracy is worth\n    // the cost.\n\n    // float normValue = dot(vec2(decodedValue, -minValue), recipRange255);\n    // vec4 f = normValue * floatPowers;\n    // gl_FragColor = floor(fract(f) * 255.0) / 255.0;\n  }\n",l="\n  float sample(sampler2D texture, vec2 uv) {\n    return texture2D(texture, uv).r;\n  }\n",p="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",h="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  bool isNaN(float val) {\n    float v1 = val * val;\n    float v2 = val * val;\n    return v1 == v2 ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  const vec2 randomConst = vec2(\n    23.14069263277926, // e^pi (Gelfond's constant)\n     2.665144142690225 // 2^sqrt(2) (GelfondâSchneider constant)\n  );\n\n  float random(float seed) {\n      return fract(cos(dot(resultUV * seed, randomConst)) * 12345.6789);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function d(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function f(e,t){return t.map(function(t){return e[t]}).join(", ")}t.getCoordsDataType=function(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";throw Error("GPU for rank "+e+" is not yet supported")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBroadcastDims=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r},t.getReductionAxes=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(null==o||1===o&&a>1)&&n.unshift(i)}return n},t.broadcastDimsAreOuter=function(e){for(var t=0;t<e.length;t++)if(e[t]!==t)return!1;return!0},t.assertAndGetBroadcastShape=function(e,t){for(var n=[],r="Operands could not be broadcast together with shapes "+e+" and "+t+".",o=Math.max(e.length,t.length),i=0;i<o;i++){var a=e[e.length-i-1]||1,s=t[t.length-i-1]||1;if(a>1&&s>1&&a!==s)throw Error(r);n.unshift(Math.max(a,s))}return n}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(2),a=n(33),s=n(12),u=n(6),c=n(3),l=function(){function e(e,t){this.learningRate=e,this.variableGradients=new s.TensorArrayMap,null!=t&&(this.specifiedVariableNodes=t)}return e.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach(function(e){return i[e].dispose()}),t?o:(o.dispose(),null)},e.prototype.computeGradients=function(e,t){return i.variableGrads(e,t)},e.prototype.beforeBatch=function(e,t,n,r,o){var i=this;this.variableNodes=null==this.specifiedVariableNodes?a.getVariableNodesFromEvaluationSet(n.nodes):this.specifiedVariableNodes,t!==this.prevBatchSize&&(null!=this.cGraph&&this.cGraph.dispose(),this.prevBatchSize=t,this.cGraph=e.keep(u.scalar(-this.learningRate/t))),this.variableNodes.forEach(function(t){return i.variableGradients.set(t.output,e.keep(c.Tensor.zeros(t.output.shape)))})},e.prototype.afterExample=function(e,t,n,r){var o=this;i.tidy(function(){o.variableNodes.forEach(function(t){var n=r.get(t.output),a=o.variableGradients.get(t.output);o.variableGradients.set(t.output,i.keep(e.add(n,a))),a.dispose()})})},e.prototype.dispose=function(){null!=this.cGraph&&this.cGraph.dispose(),null!=this.variableNodes&&this.variableNodes.forEach(function(e){e.data.dispose()}),null!=this.specifiedVariableNodes&&this.specifiedVariableNodes.forEach(function(e){e.data.dispose()})},r([o.doc({heading:"Training",subheading:"Optimizers"})],e.prototype,"minimize",null),r([o.doc({heading:"Training",subheading:"Classes",namespace:"train"})],e)}();t.Optimizer=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e,t,n,r,o,a,c,l){void 0===c&&(c=!1),void 0===l&&(l="channelsLast");var p=[-1,-1,-1,-1],h=p[0],d=p[1],f=p[2],m=p[3];if("channelsLast"===l)h=e[0],d=e[1],f=e[2],m=e[3];else{if("channelsFirst"!==l)throw new Error("Unknown dataFormat "+l);h=e[0],m=e[1],d=e[2],f=e[3]}var g,v=t[0],y=t[1],b=t[3],x=s(n),w=x[0],E=x[1],T=s(r),_=T[0],S=T[1],k=function(e,t,n,r,o,a,s,u){var c,l,p;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e};var h=i([t,n,1],a,1,r,e,u);l=h[0],p=h[1]}else if("same"===e){var d=((l=Math.ceil(t/r))-1)*r+a-t,f=((p=Math.ceil(n/o))-1)*o+s-n,m=Math.floor(d/2),g=d-m,v=Math.floor(f/2);c={top:m,bottom:g,left:v,right:f-v}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0},l=Math.ceil((t-a+1)/r),p=Math.ceil((n-s+1)/o)}return{padInfo:c,outHeight:l,outWidth:p}}(o,d,f,w,E,u(v,_),u(y,S),a),O=k.padInfo,C=k.outHeight,A=k.outWidth,N=c?b*m:b;return"channelsFirst"===l?g=[h,N,C,A]:"channelsLast"===l&&(g=[h,C,A,N]),{batchSize:h,dataFormat:l,inHeight:d,inWidth:f,inChannels:m,outHeight:C,outWidth:A,outChannels:N,padInfo:O,strideHeight:w,strideWidth:E,filterHeight:v,filterWidth:y,inShape:e,outShape:g,filterShape:t}}function i(e,t,n,o,i,s){null==i&&(i=a(e,t,o));var u=e[0],l=e[1],p=c((u-t+2*i)/o+1,s);r.assert(r.isInt(p),"The output # of rows ("+p+") must be an integer. Change the stride and/or zero pad parameters");var h=c((l-t+2*i)/o+1,s);return r.assert(r.isInt(h),"The output # of columns ("+h+") must be an integer. Change the stride and/or zero pad parameters"),[p,h,n]}function a(e,t,n){return Math.floor((e[0]*(n-1)-n+t)/2)}function s(e){return"number"==typeof e?[e,e]:e}function u(e,t){return t<=1?e:e+(e-1)*(t-1)}function c(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}t.computePool2DInfo=function(e,t,n,r,i,a){void 0===a&&(a="channelsLast");var u,c=s(t),l=c[0],p=c[1];if("channelsLast"===a)u=[l,p,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);u=[l,p,e[1],e[1]]}return o(e,u,n,1,r,i,!1,a)},t.computeConv2DInfo=o,t.computeOutputShape3D=i,t.computeDefaultPad=a,t.computeWeightsShape4D=function(e,t,n,r){return[n,r,e,t]},t.computeDilatedRC=function(e,t){return[(e[0]-1)*t+1,(e[1]-1)*t+1]}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=n(2),u=n(0),c=n(101),l=n(60);function p(e){return new m(e)}function h(e){return new g(e)}function d(e){return T.create(e)}t.streamFromItems=p,t.streamFromIncrementing=function(e){var t=e;return h(function(){return{value:t++,done:!1}})},t.streamFromFunction=h,t.streamFromConcatenated=d,t.streamFromConcatenatedFunction=function(e,t){return d(h(e).take(t))};var f=function(){function e(){}return e.prototype.collectRemaining=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return e=[],[4,this.next()];case 1:t=n.sent(),n.label=2;case 2:return t.done?[3,4]:(e.push(t.value),[4,this.next()]);case 3:return t=n.sent(),[3,2];case 4:return[2,e]}})})},e.prototype.resolveFully=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:e=t.sent(),t.label=2;case 2:return e.done?[3,4]:[4,this.next()];case 3:return e=t.sent(),[3,2];case 4:return[2]}})})},e.prototype.filter=function(e){return new w(this,e)},e.prototype.map=function(e){return new E(this,e)},e.prototype.forEach=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,this.map(e).resolveFully()]})})},e.prototype.batch=function(e,t){return void 0===t&&(t=!0),new x(this,e,t)},e.prototype.concatenate=function(e){return T.create(p([this,e]))},e.prototype.take=function(e){return e<0||null==e?this:new y(this,e)},e.prototype.skip=function(e){return e<0||null==e?this:new v(this,e)},e.prototype.prefetch=function(e){return new _(this,e)},e.prototype.shuffle=function(e,t){return new S(this,e,t)},e}();t.DataStream=f;var m=function(e){function t(t){var n=e.call(this)||this;return n.items=t,n.trav=0,n}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(e=this.items[this.trav],this.trav++,[2,{value:e,done:!1}])})})},t}(f),g=function(e){function t(t){var n=e.call(this)||this;return n.nextFn=t,n}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.nextFn()]})})},t}(f),v=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.maxCount=n,r.count=0,r}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(e=t.sent()).done?[2,e]:(s.dispose(e.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},t}(f),y=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.maxCount=n,r.count=0,r}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},t}(f),b=function(e){function t(){var t=e.call(this)||this;return t.outputQueue=new c.GrowingRingBuffer,t}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return e.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},t}(f);t.QueueStream=b;var x=function(e){function t(t,n,r){void 0===r&&(r=!0);var o=e.call(this)||this;return o.upstream=t,o.batchSize=n,o.enableSmallLastBatch=r,o.currentBatch=[],o}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.upstream.next()];case 1:return(e=t.sent()).done?this.enableSmallLastBatch&&this.currentBatch.length>0?(this.outputQueue.push(this.currentBatch),this.currentBatch=[],[2,!0]):[2,!1]:(this.currentBatch.push(e.value),this.currentBatch.length===this.batchSize&&(this.outputQueue.push(this.currentBatch),this.currentBatch=[]),[2,!0])}})})},t}(b),w=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.predicate=n,r}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.upstream.next()];case 1:return(e=t.sent()).done?[2,!1]:(this.predicate(e.value)?this.outputQueue.push(e.value):s.dispose(e.value),[2,!0])}})})},t}(b),E=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.transform=n,r}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((e=i.sent()).done)return[2,!1];for(t=u.extractTensorsFromAny(e.value),n=this.transform(e.value),r=u.extractTensorsFromAny(n),o=0,a=t;o<a.length;o++)s=a[o],u.isTensorInList(s,r)||s.dispose();return this.outputQueue.push(n),[2,!0]}})})},t}(b),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stream=null,t.lastRead=null,t}return r(t,e),t.create=function(e){var n=new t;return n.moreStreams=e,n},t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},t.prototype.readFromChain=function(e){return o(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return[4,e];case 1:return r.sent(),null!=this.stream?[3,3]:[4,this.moreStreams.next()];case 2:if((t=r.sent()).done)return[2,{value:null,done:!0}];this.stream=t.value,r.label=3;case 3:return[4,this.stream.next()];case 4:return(n=r.sent()).done?(this.stream=null,[2,this.readFromChain(e)]):[2,n]}})})},t}(f);t.ChainedStream=T;var _=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.bufferSize=n,r.total=0,r.buffer=new l.RingBuffer(n),r}return r(t,e),t.prototype.refill=function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}},t.prototype.next=function(){return this.refill(),this.buffer.shift()},t}(f);t.PrefetchStream=_;var S=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.upstream=t,o.windowSize=n,o.upstreamExhausted=!1,o.random=a(r),o}return r(t,e),t.prototype.randomInt=function(e){return Math.floor(this.random()*e)},t.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},t.prototype.next=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(e=this.chooseIndex(),[4,this.buffer.shuffleExcise(e)]);case 2:return(t=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,t]);case 3:return[2,{value:null,done:!0}]}})})},t}(_);t.ShuffleStream=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.assertParams=function(e,t,n){var o=e.length,i=t.length;r.assert(e.length===t.length,"Error in concat"+o+"D: rank of x1 ("+o+") and x2 ("+i+") must be the same."),r.assert(n>=0&&n<o,"Error in concat"+o+"D: axis must be between 0 and "+(o-1)+".");for(var a=0;a<o;a++)r.assert(a===n||e[a]===t[a],"Error in concat"+o+"D: Shape ("+e+") does not match ("+t+") along the non-concatenated axis "+a+".")},t.computeOutShape1D=function(e,t){r.assert(1===e.length&&1===t.length,"x1 and x2 should be 1d array.");var n=e.slice();return n[0]+=t[0],n},t.computeOutShape=function(e,t,n){r.assert(e.length===t.length,"x1 and x2 should have the same rank.");var o=e.slice();return o[n]+=t[n],o},t.computeGradientSliceShapes=function(e,t){return{aBegin:[0,0],aSize:e,bBegin:[0,e[1]],bSize:t}}},function(e,t,n){"use strict";var r,o,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(t.DType||(t.DType={})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4"}(t.Rank||(t.Rank={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(o||(o={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32"}(i||(i={}));var a={float32:i,int32:r,bool:o};function s(e,t){return a[e][t]}t.upcastType=s,t.sumOutType=function(e){return s(e,"int32")}},function(e,t,n){"use strict";function r(e,t){return e*t}function o(e,t){if(e%t!=0)throw new Error("unpackedSize ("+e+") must be a multiple of "+t);return e/t}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FLOAT=0]="FLOAT",e[e.UNSIGNED_BYTE=1]="UNSIGNED_BYTE"}(t.TextureType||(t.TextureType={})),t.getUnpackedMatrixTextureShapeWidthHeight=function(e,t){return[t,e]},t.getUnpackedArraySizeFromMatrixSize=r,t.getColorMatrixTextureShapeWidthHeight=function(e,t){return[4*t,e]},t.getMatrixSizeFromUnpackedArraySize=o,t.encodeMatrixToUnpackedArray=function(e,t,n){var o=r(e.length,n);if(t.length<o)throw new Error("unpackedArray length ("+t.length+") must be >= "+o);for(var i=0,a=0;a<e.length;++a)t[i]=e[a],i+=n},t.FLOAT_MAX=2e4,t.FLOAT_MIN=-t.FLOAT_MAX;var i=(t.FLOAT_MAX-t.FLOAT_MIN)/255,a=[1,1/255,1/65025,1/16581375],s=[1,255,65025];function u(e,t){return[Math.ceil(t/2),Math.ceil(e/2)]}function c(e,t){var n=u(e,t);return n[0]*n[1]*4}t.BYTE_NAN_VALUE=0,t.encodeFloatArray=function(e){for(var n=new Uint8Array(4*e.length),r=function(r){var o=e[r/4];if(isNaN(o))return n[r]=t.BYTE_NAN_VALUE,n[r+1]=t.BYTE_NAN_VALUE,n[r+2]=t.BYTE_NAN_VALUE,n[r+3]=t.BYTE_NAN_VALUE,"continue";var a=(o-t.FLOAT_MIN)/i,u=s.map(function(e){return e*a}).map(function(e){return Math.floor(e%1*255)});n[r]=Math.floor(a),n[r+1]=u[0],n[r+2]=u[1],n[r+3]=u[2]},o=0;o<n.length;o+=4)r(o);return n},t.decodeToFloatArray=function(e){for(var n=new Float32Array(e.length/4),r=function(r){if(e[r]===t.BYTE_NAN_VALUE&&e[r+1]===t.BYTE_NAN_VALUE&&e[r+2]===t.BYTE_NAN_VALUE&&e[r+3]===t.BYTE_NAN_VALUE)return n[r/4]=NaN,"continue";var o=0;a.forEach(function(t,n){o+=t*e[r+n]});var s=o*i+t.FLOAT_MIN;n[r/4]=s},o=0;o<e.length;o+=4)r(o);return n},t.decodeMatrixFromUnpackedArray=function(e,t,n){var r=o(e.length,n);if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var i=0,a=0;a<e.length;a+=n)t[i++]=e[a]},t.decodeMatrixFromUnpackedColorRGBAArray=function(e,t,n){var r=e.length*n/4;if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var o=0,i=0;i<e.length;i+=4)for(var a=0;a<n;a++)t[o++]=e[i+a]},t.getPackedMatrixTextureShapeWidthHeight=u,t.getPackedRGBAArraySizeFromMatrixShape=c,t.encodeMatrixToPackedRGBA=function(e,t,n,r){var o=c(t,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var i=u(t,n),a=i[0],s=i[1],l=n%2==1,p=t%2==1,h=Math.floor(n/2),d=Math.floor(t/2),f=l?4:0,m=n,g=0,v=0;v<d;++v){for(var y=2*v*n,b=0;b<h;++b){var x=y+2*b;r[g]=e[x],r[g+1]=e[x+1],r[g+2]=e[x+m],r[g+3]=e[x+m+1],g+=4}g+=f}if(l){x=n-1,g=4*(a-1);var w=2*n;for(f=4*a,v=0;v<d;++v)r[g]=e[x],r[g+2]=e[x+n],x+=w,g+=f}if(p)for(x=(t-1)*n,g=(s-1)*a*4,b=0;b<h;++b)r[g++]=e[x++],r[g++]=e[x++],g+=2;return l&&p&&(r[r.length-4]=e[e.length-1]),r},t.decodeMatrixFromPackedRGBA=function(e,t,n,r){var o=t*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var i=n%2==1,a=t%2==1,s=Math.floor(n/2),c=Math.floor(t/2),l=u(t,n),p=l[0],h=l[1],d=i?4:0,f=n+(i?1:0),m=0,g=0,v=n,y=0;y<c;++y){for(var b=0;b<s;++b)r[g++]=e[m++],r[g++]=e[m++],r[v++]=e[m++],r[v++]=e[m++];m+=d,g+=f,v+=f}if(i){m=4*(p-1);var x=n-1;for(d=4*p,f=2*n,y=0;y<c;++y)r[x]=e[m],r[x+n]=e[m+2],m+=d,x+=f}if(a)for(m=(h-1)*p*4,x=(t-1)*n,b=0;b<s;++b)r[x++]=e[m++],r[x++]=e[m++],m+=2;return i&&a&&(r[r.length-1]=e[e.length-4]),r}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),i=n(18),a=n(3),s=n(0),u=n(73),c=function(){function e(e){this.g=e}return e.prototype.dense=function(e,t,n,r,o,i,a){void 0===r&&(r=null),void 0===o&&(o=!0),void 0===i&&(i=new u.VarianceScalingInitializer),void 0===a&&(a=new u.ZerosInitializer);var s=this.g.variable(e+"-weights",i.initialize([t.shape[0],n],t.shape[0],n)),c=this.g.matmul(t,s);if(o){var l=this.g.variable(e+"-bias",a.initialize([n],t.shape[0],n));c=this.g.add(c,l)}return null!=r&&(c=r(c)),c},e}();t.GraphLayers=c;var l=function(){function e(){this.nodes=[],this.layers=new c(this)}return e.prototype.variable=function(e,t){return this.addNodeAndReturnOutput(new d(this,e,t))},e.prototype.placeholder=function(e,t){return this.addNodeAndReturnOutput(new f(this,e,t))},e.prototype.constant=function(e){var t;if("number"==typeof e)t=a.Scalar.new(e);else if(e instanceof a.Tensor)t=e;else{if(!(e instanceof Array))throw new Error("unimplemented constant type.");var n=s.flatten(e),r=new Float32Array(n);t=a.Tensor.make(s.inferShape(e),{values:r})}return this.addNodeAndReturnOutput(new m(this,t))},e.prototype.reshape=function(e,t){return this.addNodeAndReturnOutput(new g(this,"Reshape",e,t))},e.prototype.fusedLinearCombination=function(e,t,n,r){return this.addNodeAndReturnOutput(new v(this,e,t,n,r))},e.prototype.add=function(e,t){return this.addNodeAndReturnOutput(new y(this,e,t))},e.prototype.subtract=function(e,t){return this.addNodeAndReturnOutput(new b(this,e,t))},e.prototype.multiply=function(e,t){return this.addNodeAndReturnOutput(new x(this,e,t))},e.prototype.divide=function(e,t){return this.addNodeAndReturnOutput(new w(this,e,t))},e.prototype.reduceSum=function(e){return this.addNodeAndReturnOutput(new E(this,e))},e.prototype.concat1d=function(e,t){return this.addNodeAndReturnOutput(new T(this,e,t))},e.prototype.concat2d=function(e,t,n){return this.addNodeAndReturnOutput(new _(this,e,t,n))},e.prototype.concat3d=function(e,t,n){return this.addNodeAndReturnOutput(new S(this,e,t,n))},e.prototype.concat4d=function(e,t,n){return this.addNodeAndReturnOutput(new k(this,e,t,n))},e.prototype.matmul=function(e,t){return this.addNodeAndReturnOutput(new O(this,e,t))},e.prototype.conv2d=function(e,t,n,r,o,i,a){return void 0===i&&(i=1),this.addNodeAndReturnOutput(new C(this,e,t,n,r,o,i,a))},e.prototype.maxPool=function(e,t,n,r){return void 0===n&&(n=1),this.addNodeAndReturnOutput(new A(this,e,t,n,r))},e.prototype.exp=function(e){return this.addNodeAndReturnOutput(new P(this,e))},e.prototype.log=function(e){return this.addNodeAndReturnOutput(new I(this,e))},e.prototype.relu=function(e){return this.addNodeAndReturnOutput(new N(this,e))},e.prototype.leakyRelu=function(e,t){return this.addNodeAndReturnOutput(new D(this,e,t))},e.prototype.prelu=function(e,t){return this.addNodeAndReturnOutput(new M(this,e,t))},e.prototype.elu=function(e){return this.addNodeAndReturnOutput(new R(this,e))},e.prototype.tanh=function(e){return this.addNodeAndReturnOutput(new L(this,e))},e.prototype.sigmoid=function(e){return this.addNodeAndReturnOutput(new B(this,e))},e.prototype.square=function(e){return this.addNodeAndReturnOutput(new F(this,e))},e.prototype.softmax=function(e){return this.addNodeAndReturnOutput(new z(this,e))},e.prototype.softmaxCrossEntropyCost=function(e,t){return this.addNodeAndReturnOutput(new j(this,e,t))},e.prototype.meanSquaredCost=function(e,t){return this.addNodeAndReturnOutput(new V(this,e,t))},e.prototype.argmax=function(e){return this.addNodeAndReturnOutput(new U(this,e))},e.prototype.argmaxEquals=function(e,t){return this.addNodeAndReturnOutput(new G(this,e,t))},e.prototype.addNodeAndReturnOutput=function(e){return this.nodes.push(e),e.validate(),e.output},e.prototype.getNodes=function(){return this.nodes},e}();t.Graph=l;var p=function(e){function t(n){var r=e.call(this,[],"float32")||this;return r.shape=n,r.id=t.nextID++,r}return r(t,e),t.nextID=0,t}(a.Tensor);t.SymbolicTensor=p;var h=function(){function e(t,n,r,o){this.graph=t,this.name=n,this.inputs=r,this.output=o,this.id=e.nextID++,o.node=this}return e.nextID=0,e}();t.Node=h;var d=function(e){function t(t,n,r){var o=e.call(this,t,n,{},new p(r.shape))||this;return o.data=r,o}return r(t,e),t.prototype.validate=function(){s.assert(null!=this.data,"Error adding variable op: Data for variable '"+this.name+"' is null or undefined")},t}(h);t.VariableNode=d;var f=function(e){function t(t,n,r){return e.call(this,t,n,{},new p(r))||this}return r(t,e),t.prototype.validate=function(){},t}(h);t.PlaceholderNode=f;var m=function(e){function t(t,n){var r=e.call(this,t,"Constant",{},new p(n.shape))||this;return r.data=n,r}return r(t,e),t.prototype.validate=function(){s.assert(null!=this.data,"Error adding constant: data for placeholder '"+this.name+"' is null or undefined")},t}(h);t.ConstantNode=m;var g=function(e){function t(t,n,r,o){var i=e.call(this,t,n,{x:r},new p(o))||this;return i.name=n,i.x=r,i.shape=o,i}return r(t,e),t.prototype.validate=function(){var e=s.sizeFromShape(this.x.shape),t=s.sizeFromShape(this.shape);s.assert(e===t,"Error making reshape operation: input to reshape '"+this.name+"' of shape ("+this.x.shape+") does not match size of requested shape "+this.shape+".")},t.X="x",t}(h);t.ReshapeNode=g;var v=function(e){function t(t,n,r,o,i){var a=e.call(this,t,"Linear Combination",{t1:n,t2:r,c1:o,c2:i},new p(n.shape))||this;return a.t1=n,a.t2=r,a.c1=o,a.c2=i,a}return r(t,e),t.prototype.validate=function(){if(s.assertShapesMatch(this.t1.shape,this.t2.shape),!s.isScalarShape(this.c1.shape))throw new Error("Error adding fusedLinearCombination: c1 is not a scalar, got shape: "+this.c1.shape);if(!s.isScalarShape(this.c2.shape))throw new Error("Error adding fusedLinearCombination: c2 is not a scalar, got shape: "+this.c2.shape)},t.T1="t1",t.T2="t2",t.C1="c1",t.C2="c2",t}(h);t.FusedLinearCombinationNode=v;var y=function(e){function t(t,n,r){var o=e.call(this,t,"Add",{t1:n,t2:r},new p(1===s.sizeFromShape(n.shape)?r.shape:n.shape.length<r.shape.length?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(t,e),t.prototype.validate=function(){s.assert(1===s.sizeFromShape(this.t1.shape)||1===s.sizeFromShape(this.t2.shape)||s.arraysEqual(this.t1.shape,this.t2.shape)||2===this.t1.shape.length&&1===this.t2.shape.length&&this.t1.shape[1]===this.t2.shape[0]||1===this.t1.shape.length&&2===this.t2.shape.length&&this.t1.shape[0]===this.t2.shape[1],"Error adding add operation op: one of inputs must be scalar, shapes "+this.t1.shape+" and "+this.t2.shape+" must match,or one of them can be broadcasted (2D and 1D).")},t.T1="t1",t.T2="t2",t}(h);t.AddNode=y;var b=function(e){function t(t,n,r){var o=e.call(this,t,"Subtract",{t1:n,t2:r},new p(1===s.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(t,e),t.prototype.validate=function(){s.assert(1===s.sizeFromShape(this.t1.shape)||1===s.sizeFromShape(this.t2.shape)||s.arraysEqual(this.t1.shape,this.t2.shape),"Error adding subtract op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},t.T1="t1",t.T2="t2",t}(h);t.SubtractNode=b;var x=function(e){function t(t,n,r){var o=e.call(this,t,"Multiply",{t1:n,t2:r},new p(1===s.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(t,e),t.prototype.validate=function(){s.assert(1===s.sizeFromShape(this.t1.shape)||1===s.sizeFromShape(this.t2.shape)||s.arraysEqual(this.t1.shape,this.t2.shape),"Error adding multiply op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},t.T1="t1",t.T2="t2",t}(h);t.MultiplyNode=x;var w=function(e){function t(t,n,r){var o=e.call(this,t,"Divide",{t1:n,t2:r},new p(1===s.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(t,e),t.prototype.validate=function(){s.assert(1===s.sizeFromShape(this.t1.shape)||1===s.sizeFromShape(this.t2.shape)||s.arraysEqual(this.t1.shape,this.t2.shape),"Error adding divide op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},t.T1="t1",t.T2="t2",t}(h);t.DivideNode=w;var E=function(e){function t(t,n){return e.call(this,t,"ReduceSum",{x:n},new p([]))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.ReduceSumNode=E;var T=function(e){function t(t,n,r){return e.call(this,t,"Concat1D",{x1:n,x2:r},new p(o.computeOutShape1D(n.shape,r.shape)))||this}return r(t,e),t.prototype.validate=function(){},t.X1="x1",t.X2="x2",t}(h);t.Concat1DNode=T;var _=function(e){function t(t,n,r,i){var a=e.call(this,t,"Concat2D",{x1:n,x2:r},new p(o.computeOutShape(n.shape,r.shape,i)))||this;return a.x1=n,a.x2=r,a.axis=i,a}return r(t,e),t.prototype.validate=function(){o.assertParams(this.x1.shape,this.x2.shape,this.axis)},t.X1="x1",t.X2="x2",t.AXIS="axis",t}(h);t.Concat2DNode=_;var S=function(e){function t(t,n,r,i){var a=e.call(this,t,"Concat3D",{x1:n,x2:r},new p(o.computeOutShape(n.shape,r.shape,i)))||this;return a.x1=n,a.x2=r,a.axis=i,a}return r(t,e),t.prototype.validate=function(){o.assertParams(this.x1.shape,this.x2.shape,this.axis)},t.X1="x1",t.X2="x2",t.AXIS="axis",t}(h);t.Concat3DNode=S;var k=function(e){function t(t,n,r,i){var a=e.call(this,t,"Concat4D",{x1:n,x2:r},new p(o.computeOutShape(n.shape,r.shape,i)))||this;return a.x1=n,a.x2=r,a.axis=i,a}return r(t,e),t.prototype.validate=function(){o.assertParams(this.x1.shape,this.x2.shape,this.axis)},t.X1="x1",t.X2="x2",t.AXIS="axis",t}(h);t.Concat4DNode=k;var O=function(e){function t(t,n,r){var o=e.call(this,t,"MatMul",{x1:n,x2:r},new p(function(e,t){return 1===e.length&&1===t.length?[1]:1===e.length&&2===t.length?[t[1]]:2===e.length&&1===t.length?[e[0]]:[e[0],t[1]]}(n.shape,r.shape)))||this;return o.x1=n,o.x2=r,o}return r(t,e),t.prototype.validate=function(){if(2===this.x1.shape.length&&2===this.x2.shape.length)s.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: inner shapes of matrices with shapes "+this.x1.shape+" and "+this.x2.shape+" must match.");else if(2===this.x1.shape.length&&1===this.x2.shape.length)s.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: second dimension of matrix with shape "+this.x1.shape.toString()+" must match size of vector with shape "+this.x2.shape+".");else{if(1!==this.x1.shape.length||2!==this.x2.shape.length)throw new Error("Error adding matmul op: inputs must be vectors or matrices.");s.assert(this.x1.shape[0]===this.x2.shape[0],"Error adding matmul op: size of vector with shape "+this.x1.shape+" must match first dimension of matrix with shape "+this.x2.shape+".")}},t.X1="x1",t.X2="x2",t}(h);t.MatMulNode=O;var C=function(e){function t(t,n,r,o,a,s,u,c){void 0===u&&(u=1);var l=e.call(this,t,"Convolution 2D",{x:n,w:r,b:o},new p(i.computeOutputShape3D(n.shape,a,s,u,c)))||this;return l.x=n,l.w=r,l.b=o,l.fieldSize=a,l.outputDepth=s,l.stride=u,l.zeroPad=c,l}return r(t,e),t.prototype.validate=function(){s.assert(3===this.x.shape.length,"Error adding conv2d op: input must be of rank 3, but got shape: "+this.x.shape+"."),s.assert(4===this.w.shape.length,"Error adding conv2d op: weights must be of rank 4, but got shape: "+this.w.shape+"."),s.assert(1===this.b.shape.length,"Error adding conv2d op: biases must be of rank 1, but got shape: "+this.b.shape+"."),s.assert(this.x.shape[2]===this.w.shape[2],"Error adding conv2d op: depth of input ("+this.x.shape[2]+") must match input depth for weights ("+this.w.shape[2]+").")},t.X="x",t.W="w",t.B="b",t}(h);t.Convolution2DNode=C;var A=function(e){function t(t,n,r,o,a){void 0===o&&(o=1);var s=e.call(this,t,"Max pool",{x:n},new p(i.computeOutputShape3D(n.shape,r,n.shape[2],o,a)))||this;return s.x=n,s.fieldSize=r,s.stride=o,s.zeroPad=a,s}return r(t,e),t.prototype.validate=function(){s.assert(3===this.x.shape.length,"Error adding maxPool op: input must be of rank 3, but got shape: "+this.x.shape+".")},t.X="x",t}(h);t.MaxPoolNode=A;var N=function(e){function t(t,n){return e.call(this,t,"ReLU",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.ReLUNode=N;var D=function(e){function t(t,n,r){var o=e.call(this,t,"LeakyReLU",{x:n},new p(n.shape))||this;return o.alpha=r,o}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.LeakyReLUNode=D;var M=function(e){function t(t,n,r){var o=e.call(this,t,"PReLU",{x:n,alpha:r},new p(n.shape))||this;return o.x=n,o.alpha=r,o}return r(t,e),t.prototype.validate=function(){s.assert(s.arraysEqual(this.x.shape,this.alpha.shape),"Error adding pRelu op: the shapes x: "+this.x.shape+" and alpha: "+this.alpha.shape+" must match.")},t.X="x",t.ALPHA="alpha",t}(h);t.PReLUNode=M;var R=function(e){function t(t,n){return e.call(this,t,"Elu",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.EluNode=R;var P=function(e){function t(t,n){return e.call(this,t,"Exp",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.ExpNode=P;var I=function(e){function t(t,n){return e.call(this,t,"Log",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.LogNode=I;var L=function(e){function t(t,n){return e.call(this,t,"TanH",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.TanHNode=L;var B=function(e){function t(t,n){return e.call(this,t,"Sigmoid",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.SigmoidNode=B;var F=function(e){function t(t,n){return e.call(this,t,"Square",{x:n},new p(n.shape))||this}return r(t,e),t.prototype.validate=function(){},t.X="x",t}(h);t.SquareNode=F;var j=function(e){function t(t,n,r){var o=e.call(this,t,"SoftmaxCrossEntropyCost",{x:n,target:r},new p([]))||this;return o.x=n,o.target=r,o}return r(t,e),t.prototype.validate=function(){s.assert(s.arraysEqual(this.x.shape,this.target.shape),"Error adding softmaxCrossEntropyCost op: x shape ("+this.x.shape+") must match target shape ("+this.target.shape+").")},t.X="x",t.TARGET="target",t}(h);t.SoftmaxCrossEntropyCostNode=j;var z=function(e){function t(t,n){var r=e.call(this,t,"Softmax",{x:n},new p(n.shape))||this;return r.x=n,r}return r(t,e),t.prototype.validate=function(){s.assert(1===this.x.shape.length,"The input to a softmax must be a 1-D tensor"),s.assert(this.x.shape[0]>=2,"The input to a softmax must have at least 2 values")},t.X="x",t}(h);t.SoftmaxNode=z;var V=function(e){function t(t,n,r){var o=e.call(this,t,"Mean Squared Cost",{label:n,prediction:r},new p([]))||this;return o.label=n,o.prediction=r,o}return r(t,e),t.prototype.validate=function(){s.assert(s.arraysEqual(this.label.shape,this.prediction.shape),"Error adding meanSquaredCost op: label shape ("+this.label.shape+") must match prediction shape ("+this.prediction.shape+").")},t.LABEL="label",t.PREDICTION="prediction",t}(h);t.MeanSquaredCostNode=V;var U=function(e){function t(t,n){var r=e.call(this,t,"ArgMax",{x:n},new p([1]))||this;return r.x=n,r}return r(t,e),t.prototype.validate=function(){s.assert(s.sizeFromShape(this.x.shape)>0,"Error adding argmax op: input tensor must have at least one entry.")},t.X="x",t}(h);t.ArgMaxNode=U;var G=function(e){function t(t,n,r){var o=e.call(this,t,"ArgMaxEquals",{x1:n,x2:r},new p([1]))||this;return o.x1=n,o.x2=r,o}return r(t,e),t.prototype.validate=function(){s.assert(s.arraysEqual(this.x1.shape,this.x2.shape),"Error adding ArgMaxEquals op: x1 shape ("+this.x1.shape+") must match x2 shape ("+this.x2.shape+").")},t.X1="x1",t.X2="x2",t}(h);t.ArgMaxEqualsNode=G},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var o=n(82),i=n(83);t.contrib=i;var a=n(65);t.xhr_dataset=a;var s=n(1);t.environment=s;var u=n(1),c=n(67);t.gpgpu_util=c;var l=n(28);t.webgl_util=l;var p=n(18);t.conv_util=p;var h=n(108);t.test_util=h;var d=n(0);t.util=d;var f=n(136);t.version=f.version;var m=n(137);t.CheckpointLoader=m.CheckpointLoader;var g=n(66);t.InMemoryDataset=g.InMemoryDataset;var v=n(138);t.InCPUMemoryShuffledInputProviderBuilder=v.InCPUMemoryShuffledInputProviderBuilder,t.InGPUMemoryShuffledInputProviderBuilder=v.InGPUMemoryShuffledInputProviderBuilder;var y=n(65);t.XhrDataset=y.XhrDataset;var b=n(1);t.ENV=b.ENV,t.Environment=b.Environment;var x=n(23);t.Graph=x.Graph,t.SymbolicTensor=x.SymbolicTensor;var w=n(139);t.GraphRunner=w.GraphRunner,t.MetricReduction=w.MetricReduction;var E=n(73);t.ConstantInitializer=E.ConstantInitializer,t.OnesInitializer=E.OnesInitializer,t.RandomNormalInitializer=E.RandomNormalInitializer,t.RandomTruncatedNormalInitializer=E.RandomTruncatedNormalInitializer,t.RandomUniformInitializer=E.RandomUniformInitializer,t.TensorInitializer=E.TensorInitializer,t.VarianceScalingInitializer=E.VarianceScalingInitializer,t.ZerosInitializer=E.ZerosInitializer;var T=n(74);t.CostReduction=T.CostReduction,t.Session=T.Session;var _=n(68);t.MathBackendCPU=_.MathBackendCPU,t.NDArrayMathCPU=_.NDArrayMathCPU;var S=n(69);t.MathBackendWebGL=S.MathBackendWebGL,t.NDArrayMathGPU=S.NDArrayMathGPU;var k=n(71);t.GPGPUContext=k.GPGPUContext;var O=n(27);t.NDArrayMath=O.NDArrayMath;var C=n(31);t.MatrixOrientation=C.MatrixOrientation;var A=n(34);t.AdadeltaOptimizer=A.AdadeltaOptimizer;var N=n(35);t.AdagradOptimizer=N.AdagradOptimizer;var D=n(36);t.AdamOptimizer=D.AdamOptimizer;var M=n(37);t.AdamaxOptimizer=M.AdamaxOptimizer;var R=n(38);t.MomentumOptimizer=R.MomentumOptimizer;var P=n(17);t.Optimizer=P.Optimizer;var I=n(39);t.RMSPropOptimizer=I.RMSPropOptimizer;var L=n(29);t.SGDOptimizer=L.SGDOptimizer;var B=n(3);t.Array1D=B.Array1D,t.Array2D=B.Array2D,t.Array3D=B.Array3D,t.Array4D=B.Array4D,t.NDArray=B.NDArray,t.Scalar=B.Scalar,t.Tensor=B.Tensor,t.Tensor1D=B.Tensor1D,t.Tensor2D=B.Tensor2D,t.Tensor3D=B.Tensor3D,t.Tensor4D=B.Tensor4D,t.variable=B.variable,t.Variable=B.Variable;var F=n(21);t.Rank=F.Rank;var j=n(161);t.loadWeights=j.loadWeights,r(n(6)),r(n(162)),r(n(2)),t.setBackend=u.Environment.setBackend,t.getBackend=u.Environment.getBackend,t.memory=u.Environment.memory,t.nextFrame=o.BrowserUtil.nextFrame},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=n(2),u=n(99),c=n(100),l=n(19),p=n(19),h=n(19),d=function(){function e(){}return e.prototype.computeStatistics=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(n){return[2,c.computeDatasetStatistics(this,e,t)]})})},e.prototype.filter=function(e){var t=this;return f(function(){return t.getStream().filter(function(t){return s.tidy(function(){return e(t)})})})},e.prototype.map=function(e){var t=this;return f(function(){return t.getStream().map(function(t){return s.tidy(function(){return e(t)})})})},e.prototype.batch=function(e,t){return void 0===t&&(t=!0),new u.BatchDataset(this,e,t)},e.prototype.concatenate=function(e){var t=this;return f(function(){return t.getStream().concatenate(e.getStream())})},e.prototype.repeat=function(e){var t=this;return f(function(){var n=l.streamFromFunction(function(){return{value:t.getStream(),done:!1}});return p.streamFromConcatenated(n.take(e))})},e.prototype.take=function(e){var t=this;return f(function(){return t.getStream().take(e)})},e.prototype.skip=function(e){var t=this;return f(function(){return t.getStream().skip(e)})},e.prototype.shuffle=function(e,t,n){void 0===n&&(n=!0);var r=this,o=a(t);return f(function(){var t=o.int32();return n&&(t+=o.int32()),r.getStream().shuffle(e,t.toString())})},e.prototype.prefetch=function(e){var t=this;return f(function(){return t.getStream().prefetch(e)})},e.prototype.collectAll=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.getStream().collectRemaining()]})})},e.prototype.forEach=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,this.getStream().forEach(e)]})})},e}();function f(e){return new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.getStream=function(){return e()},n}(d))}t.Dataset=d,t.datasetFromStreamFn=f,t.datasetFromElements=function(e){return f(function(){return h.streamFromItems(e)})}},function(e,t,n){var r=n(84),o=n(85),i=n(86),a=n(87),s=n(88),u=n(89),c=n(90);c.alea=r,c.xor128=o,c.xorwow=i,c.xorshift7=a,c.xor4096=s,c.tychei=u,e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(40),i=n(43),a=n(44),s=n(45),u=n(46),c=n(47),l=n(48),p=n(49),h=n(50),d=n(31),f=n(51),m=n(6),g=n(52),v=n(53),y=n(54),b=n(55),x=n(56),w=n(57),E=n(58),T=n(59),_=n(0),S=T.Tracking.tidy,k=T.Tracking.keep,O=function(){function e(e,t){this.matMul=d.MatmulOps.matMul,this.vectorTimesMatrix=d.MatmulOps.vectorTimesMatrix,this.outerProduct=d.MatmulOps.outerProduct,this.matrixTimesVector=d.MatmulOps.matrixTimesVector,this.dotProduct=d.MatmulOps.dotProduct,this.slice=b.SliceOps.slice,this.slice1D=b.SliceOps.slice1d,this.slice2D=b.SliceOps.slice2d,this.slice3D=b.SliceOps.slice3d,this.slice4D=b.SliceOps.slice4d,this.reverse=y.ReverseOps.reverse,this.reverse1D=y.ReverseOps.reverse1d,this.reverse2D=y.ReverseOps.reverse2d,this.reverse3D=y.ReverseOps.reverse3d,this.reverse4D=y.ReverseOps.reverse4d,this.batchNormalization=i.BatchNormOps.batchNormalization,this.batchNormalization2D=i.BatchNormOps.batchNormalization2d,this.batchNormalization3D=i.BatchNormOps.batchNormalization3d,this.batchNormalization4D=i.BatchNormOps.batchNormalization4d,this.avgPool=g.PoolOps.avgPool,this.maxPool=g.PoolOps.maxPool,this.minPool=g.PoolOps.minPool,this.maxPoolBackprop=g.PoolOps.maxPoolBackprop,this.conv2dTranspose=u.ConvOps.conv2dTranspose,this.depthwiseConv2D=u.ConvOps.depthwiseConv2d,this.conv2dDerFilter=u.ConvOps.conv2dDerFilter,this.conv2dDerInput=u.ConvOps.conv2dDerInput,this.argMax=v.ReductionOps.argMax,this.argMin=v.ReductionOps.argMin,this.logSumExp=v.ReductionOps.logSumExp,this.max=v.ReductionOps.max,this.mean=v.ReductionOps.mean,this.min=v.ReductionOps.min,this.moments=v.ReductionOps.moments,this.sum=v.ReductionOps.sum,this.add=a.BinaryOps.add,this.addStrict=a.BinaryOps.addStrict,this.div=a.BinaryOps.div,this.divide=this.div,this.divStrict=a.BinaryOps.divStrict,this.divideStrict=this.divStrict,this.maximum=a.BinaryOps.maximum,this.maximumStrict=a.BinaryOps.maximumStrict,this.minimum=a.BinaryOps.minimum,this.minimumStrict=a.BinaryOps.minimumStrict,this.mul=a.BinaryOps.mul,this.multiply=this.mul,this.mulStrict=a.BinaryOps.mulStrict,this.multiplyStrict=this.mulStrict,this.pow=a.BinaryOps.pow,this.powStrict=a.BinaryOps.powStrict,this.sub=a.BinaryOps.sub,this.subtract=this.sub,this.subStrict=a.BinaryOps.subStrict,this.logicalNot=l.LogicalOps.logicalNot,this.logicalAnd=l.LogicalOps.logicalAnd,this.logicalOr=l.LogicalOps.logicalOr,this.logicalXor=l.LogicalOps.logicalXor,this.where=l.LogicalOps.where,this.transpose=w.TransposeOps.transpose,this.equal=s.CompareOps.equal,this.equalStrict=s.CompareOps.equalStrict,this.greater=s.CompareOps.greater,this.greaterStrict=s.CompareOps.greaterStrict,this.greaterEqual=s.CompareOps.greaterEqual,this.greaterEqualStrict=s.CompareOps.greaterEqualStrict,this.less=s.CompareOps.less,this.lessStrict=s.CompareOps.lessStrict,this.lessEqual=s.CompareOps.lessEqual,this.lessEqualStrict=s.CompareOps.lessEqualStrict,this.notEqual=s.CompareOps.notEqual,this.notEqualStrict=s.CompareOps.notEqualStrict,this.abs=E.UnaryOps.abs,this.acos=E.UnaryOps.acos,this.asin=E.UnaryOps.asin,this.atan=E.UnaryOps.atan,this.ceil=E.UnaryOps.ceil,this.clip=E.UnaryOps.clipByValue,this.cos=E.UnaryOps.cos,this.cosh=E.UnaryOps.cosh,this.elu=E.UnaryOps.elu,this.exp=E.UnaryOps.exp,this.floor=E.UnaryOps.floor,this.leakyRelu=E.UnaryOps.leakyRelu,this.log=E.UnaryOps.log,this.neg=E.UnaryOps.neg,this.prelu=E.UnaryOps.prelu,this.relu=E.UnaryOps.relu,this.selu=E.UnaryOps.selu,this.sigmoid=E.UnaryOps.sigmoid,this.sin=E.UnaryOps.sin,this.sinh=E.UnaryOps.sinh,this.sqrt=E.UnaryOps.sqrt,this.square=E.UnaryOps.square,this.step=E.UnaryOps.step,this.tan=E.UnaryOps.tan,this.tanh=E.UnaryOps.tanh,this.norm=f.NormOps.norm,this.basicLSTMCell=h.LSTMOps.basicLSTMCell,this.multiRNNCell=h.LSTMOps.multiRNNCell,this.softmax=x.SoftmaxOps.softmax,this.softmaxCrossEntropy=x.SoftmaxOps.softmaxCrossEntropy,this.cast=o.ArrayOps.cast,this.clone=o.ArrayOps.clone,this.gather=o.ArrayOps.gather,this.reshape=o.ArrayOps.reshape,this.tile=o.ArrayOps.tile,this.oneHot=o.ArrayOps.oneHot,this.multinomial=o.ArrayOps.multinomial,this.pad1D=o.ArrayOps.pad1d,this.pad2D=o.ArrayOps.pad2d,this.resizeBilinear3D=c.ImageOps.resizeBilinear,this.localResponseNormalization3D=p.LRNOps.localResponseNormalization,this.localResponseNormalization4D=p.LRNOps.localResponseNormalization,this.keep=T.Tracking.keep,r.ENV.setMath(this,e,t),this.engine=r.ENV.engine,this.dispose=r.ENV.engine.dispose.bind(r.ENV.engine),this.registeredVariables=r.ENV.engine.registeredVariables,this.startScope=r.ENV.engine.startScope.bind(r.ENV.engine),this.endScope=r.ENV.engine.endScope.bind(r.ENV.engine)}return e.prototype.scope=function(e){var t=function(e){return k(e)},n=function(e){return e};return S(function(){return e(t,n)})},e.prototype.track=function(e){return e},e.prototype.topK=function(e,t){var n,o;return _.assert(t<=e.size,"Error in topK: k value ("+t+") must be less than size of input tensor, got shape "+e.shape+"."),S("topK",function(){return n=r.ENV.engine.runKernel(function(n){return n.topKValues(e,t)},{x:e}),o=r.ENV.engine.runKernel(function(n){return n.topKIndices(e,t)},{x:e}),n}),{values:n,indices:o}},e.prototype.elementWiseMul=function(e,t){return e.mulStrict(t)},e.prototype.scalarDividedByArray=function(e,t){return _.assert(1===e.size,"Error in scalarDividedByArray: first argument must be rank 0, but got Tensor of rank "+e.rank+"."),e.div(t)},e.prototype.arrayDividedByScalar=function(e,t){return _.assert(1===t.size,"Error in arrayDividedByScalar: second argument must be rank 0, but got Tensor of rank "+t.rank+"."),e.div(t)},e.prototype.switchDim=function(e,t){return m.transpose(e,t)},e.prototype.scalarPlusArray=function(e,t){return _.assert(1===e.size,"Error in scalarPlusArray: first argument must be rank 0, but got rank "+e.rank+"."),this.add(e,t)},e.prototype.scalarMinusArray=function(e,t){return _.assert(1===e.size,"Error in scalarMinusArray: first argument must be rank 0, but got rank "+e.rank+"."),this.subtract(e,t)},e.prototype.arrayMinusScalar=function(e,t){return _.assert(1===t.size,"Error in arrayMinusScalar: second argument must be rank 0, but got rank "+t.rank+"."),this.subtract(e,t)},e.prototype.scaledArrayAdd=function(e,t,n,r){var o=this;return _.assert(1===e.size,"Error in scaledArrayAdd: first argument must rank 0, but got  rank "+e.rank+"."),_.assert(1===n.size,"Error in scaledArrayAdd: third argument must be rank 0, but got Tensor of rank "+n.rank+"."),_.assertShapesMatch(t.shape,r.shape,"Error in scaledArrayAdd: "),S("scaledArrayAdd",function(){return o.add(o.multiply(e,t),o.multiply(n,r))})},e.prototype.scalarTimesArray=function(e,t){return _.assert(1===e.size,"Error in arrayDividedByScalar: first argument must be rank 0, but got rank "+e.rank+"."),this.multiply(e,t)},e.prototype.concat=function(e,t,n){return m.concat([e,t],n)},e.prototype.concat1D=function(e,t){return m.concat1d([e,t])},e.prototype.concat2D=function(e,t,n){return m.concat2d([e,t],n)},e.prototype.concat3D=function(e,t,n){return m.concat3d([e,t],n)},e.prototype.concat4D=function(e,t,n){return m.concat4d([e,t],n)},e.prototype.conv1d=function(e,t,n,r,o,i){return null!=n&&_.assert(1===n.rank,"Error in conv1d: bias must be rank 1, but got rank "+n.rank+"."),m.conv1d(e,t,r,o,i).add(n)},e.prototype.conv2d=function(e,t,n,r,o,i){return null!=n&&_.assert(1===n.rank,"Error in conv2d: bias must be rank 1, but got rank "+n.rank+"."),m.conv2d(e,t,r,o,i).add(n)},e.prototype.argMaxEquals=function(e,t){return _.assertShapesMatch(e.shape,t.shape,"Error in argMaxEquals: "),e.argMax().equal(t.argMax())},e}();t.NDArrayMath=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=null,o=n(0),i=n(1);function a(e,t){var n,r=i.ENV.get("WEBGL_VERSION");if(2===r?n=e.getContext("webgl2",t):1===r&&(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function s(e,t){var n=t();return c(e),n}t.createWebGLRenderingContext=function(e){var t=document.createElement("canvas");return t.width=1,t.height=1,a(t,e)},t.createWebGLRenderingContextFromCanvas=a,t.callAndCheck=s;var u=!1;function c(e){if(u){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+l(e,t))}}function l(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}t.enableDebugWebGLErrorChecking=function(e){u=e},t.checkWebGLError=c,t.getWebGLErrorMessage=l,t.getExtensionOrThrow=function(e,t){return m(e,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')},t.createVertexShader=function(e,t){var n=m(e,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(s(e,function(){return e.shaderSource(n,t)}),s(e,function(){return e.compileShader(n)}),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n},t.createFragmentShader=function(e,t){var n=m(e,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(s(e,function(){return e.shaderSource(n,t)}),s(e,function(){return e.compileShader(n)}),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=p.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),a=i.length.toString().length+2,s=i.map(function(e,t){return o.rightPad((t+1).toString(),a)+e}),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var l=s.slice(0,r-1),h=s.slice(r-1,r),d=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+o.rightPad(h[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n};var p=/ERROR: [0-9]+:([0-9]+):/g;function h(e){return null!=r?r:r=s(e,function(){return e.getParameter(e.MAX_TEXTURE_SIZE)})}function d(e,t,n){g(e,n),s(e,function(){return e.activeTexture(e.TEXTURE0+n)}),s(e,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function f(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function m(e,t,n){var r=s(e,function(){return t()});if(null==r)throw new Error(n);return r}function g(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}t.createProgram=function(e){return m(e,function(){return e.createProgram()},"Unable to create WebGLProgram.")},t.linkProgram=function(e,t){if(s(e,function(){return e.linkProgram(t)}),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")},t.validateProgram=function(e,t){if(s(e,function(){return e.validateProgram(t)}),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")},t.createStaticVertexBuffer=function(e,t){var n=m(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return s(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),s(e,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),n},t.createStaticIndexBuffer=function(e,t){var n=m(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return s(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),s(e,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),n},t.queryMaxTextureSize=h,t.getChannelsPerTexture=function(){return i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===i.ENV.get("WEBGL_VERSION")?1:4},t.createTexture=function(e){return m(e,function(){return e.createTexture()},"Unable to create WebGLTexture.")},t.validateTextureSize=function(e,t,n){var r=h(e);if(t<=0||n<=0){var o="["+t+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(t>r||n>r)throw o="["+t+"x"+n+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")},t.createFramebuffer=function(e){return m(e,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")},t.bindVertexBufferToProgramAttribute=function(e,t,n,r,o,i,a){var u=e.getAttribLocation(t,n);-1!==u&&(s(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),s(e,function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,i,a)}),s(e,function(){return e.enableVertexAttribArray(u)}))},t.bindTextureUnit=d,t.unbindTextureUnit=function(e,t){g(e,t),s(e,function(){return e.activeTexture(e.TEXTURE0+t)}),s(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})},t.getProgramUniformLocationOrThrow=function(e,t,n){return m(e,function(){return e.getUniformLocation(t,n)},'uniform "'+n+'" not present in program.')},t.getProgramUniformLocation=function(e,t,n){return e.getUniformLocation(t,n)},t.bindTextureToProgramUniformSampler=function(e,t,n,r,o){s(e,function(){return d(e,n,o)}),s(e,function(){return e.uniform1i(r,o)})},t.bindCanvasToFramebuffer=function(e){s(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),s(e,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),s(e,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},t.bindColorTextureToFramebuffer=function(e,t,n){s(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),s(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})},t.unbindColorTextureFromFramebuffer=function(e,t){s(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),s(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})},t.validateFramebuffer=function(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+f(e,t))},t.getFramebufferErrorMessage=f,t.getTextureShapeFromLogicalShape=function(e,t){2!==t.length&&(t=o.squeezeShape(t).newShape);var n=h(e),r=o.sizeFromShape(t);return t.length<=1&&r<=n?[r,1]:2===t.length&&t[0]<=n&&t[1]<=n?t:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?[t[0],t[1]*t[2]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n?[t[0],t[1]*t[2]*t[3]]:o.sizeToSquarishShape(r)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.learningRate=t,r.setLearningRate(t),r}return r(t,e),t.prototype.applyGradients=function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n],a=o.ENV.engine.registeredVariables[n];i.tidy(function(){var e=t.c.mul(r).add(a);a.assign(e)})})},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=o.ENV.math.keep(s.scalar(-e))},t.prototype.dispose=function(){this.c.dispose(),null!=this.one&&this.one.dispose(),e.prototype.dispose.call(this)},t.prototype.afterBatch=function(e,t,n,r,o){var u=this;null==this.one&&(this.one=i.keep(s.scalar(1))),i.tidy(function(){u.variableNodes.forEach(function(t){var n=r.get(t.output),o=u.variableGradients.get(t.output),a=e.scaledArrayAdd(u.cGraph,o,u.one,n);r.set(t.output,i.keep(a)),t.data=a,n.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t}(n(17).Optimizer);t.SGDOptimizer=u},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(4),a=n(1),s=n(0),u=n(7);!function(e){e[e.REGULAR=0]="REGULAR",e[e.TRANSPOSED=1]="TRANSPOSED"}(o=t.MatrixOrientation||(t.MatrixOrientation={}));var c=function(){function e(){}return e.matMul=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),o=[l(n),l(r)],r=o[1];var o,i=(n=o[0])?e.shape[0]:e.shape[1],u=r?t.shape[1]:t.shape[0];return s.assert(2===e.rank&&2===t.rank,"Error in matMul: inputs must be rank 2, got ranks "+e.rank+" and "+t.rank+"."),s.assert(i===u,"Error in matMul: inner shapes ("+i+") and ("+u+") of Tensors with shapes "+e.shape+" and "+t.shape+" and transposeA="+n+" and transposeB="+r+" must match."),a.ENV.engine.runKernel(function(o){return o.matMul(e,t,n,r)},{a:e,b:t},function(o){if(n||r)throw new Error("Backprop for transposed MatMul not yet implemented.");return{a:function(){return o.matMul(t.toFloat(),!1,!0)},b:function(){return e.toFloat().matMul(o,!0,!1)}}})},e.vectorTimesMatrix=function(e,t){return s.assert(1===e.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got rank "+e.rank+"."),s.assert(2===t.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got rank "+t.rank+"."),s.assert(e.size===t.shape[0],"Error in vectorTimesMatrix: size of vector ("+e.size+") must match first dimension of matrix ("+t.shape[0]+")"),e.as2D(1,-1).matMul(t).as1D()},e.matrixTimesVector=function(e,t){return s.assert(1===t.rank,"Error in matrixTimesVector: second input must rank 1, but got rank "+t.rank+"."),s.assert(2===e.rank,"Error in matrixTimesVector: first input must be a rank 2, but got rank "+e.rank+"."),s.assert(t.size===e.shape[1],"Error in matrixTimesVector: size of first rank 1 input "+t.size+" must match inner dimension of second rank 2 input, but got shape "+e.shape+"."),e.matMul(t.as2D(-1,1)).as1D()},e.dotProduct=function(e,t){return s.assert(1===e.rank&&1===t.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."),s.assert(e.size===t.size,"Error in dotProduct: size of inputs ("+e.size+") and ("+t.size+") must match."),e.as2D(1,-1).matMul(t.as2D(-1,1)).asScalar()},e.outerProduct=function(e,t){return s.assert(1===e.rank&&1===t.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+t.rank+"."),e.as2D(-1,1).matMul(t.as2D(1,-1))},r([i.doc({heading:"Operations",subheading:"Matrices"}),u.operation],e,"matMul",null),r([u.operation],e,"vectorTimesMatrix",null),r([u.operation],e,"matrixTimesVector",null),r([u.operation],e,"dotProduct",null),r([i.doc({heading:"Operations",subheading:"Matrices"}),u.operation],e,"outerProduct",null),e}();function l(e){return e!==o.REGULAR&&(e===o.TRANSPOSED||e)}t.MatmulOps=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SELU_SCALEALPHA=1.7580993408473768,t.SELU_SCALE=1.0507009873554805},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(0),i=n(23),a=n(10);function s(e){return Object.keys(e.dict).map(function(t){return e.dict[+t].tensor.node})}t.getTerminatingNodesFromFeedDictionary=s,t.getOrderedEvaluationSetFromEvalTensor=function(e,t){var n=s(t),r=e.map(function(e){return e.node}),o=a.getUnorderedEvaluationSet(r,n);return a.getOrderedEvaluationSet(o)},t.addPersistentArraysToTensorArrayMap=function(e,t){e.forEach(function(e){(e instanceof i.VariableNode||e instanceof i.ConstantNode)&&t.set(e.output,e.data)})},t.getVariableNodesFromEvaluationSet=function(e){var t=[];return e.forEach(function(e){e instanceof i.VariableNode&&t.push(e)}),t},t.throwIfFeedDictionaryContainsNDArrays=function(e){Object.keys(e.dict).forEach(function(t){if(e.dict[+t].data instanceof r.Tensor)throw new Error("training requires FeedDictionary entries to be InputProvidersand not NDArrays.")})},t.loadInputsFromFeedDictionaryToTensorArrayMap=function(e,t,n){Object.keys(e.dict).forEach(function(n){var i,a=e.dict[+n];i=a.data instanceof r.Tensor?a.data:a.data.getNextCopy(),o.assert(o.arraysEqual(a.tensor.shape,i.shape),"Error loading FeedEntry: feeding NDArray of shape "+i.shape+" does not match Tensor (id: "+a.tensor.id+") shape: "+a.tensor.shape+"."),t.set(a.tensor,i)})},t.releaseFeedDictionaryInputsFromTensorArrayMap=function(e,t,n){Object.keys(e.dict).forEach(function(n){var o=e.dict[+n];if(!(o.data instanceof r.Tensor)){var i=o.data,a=t.get(o.tensor);i.disposeCopy(a)}t.delete(o.tensor)})},t.removeFeedDictionaryNodesFromEvaluationSet=function(e,t){for(var n=0;n<t.length;){var r=t[n];null!=e.dict[r.output.id]?t.splice(n,1):++n}},t.disposeAndInitializeOperationOutputs=function(e,t){e.forEach(function(e){a.isInputNode(e)||(a.isPassthroughNode(e,t)||t.disposeArray(e.output),t.set(e.output,null))})},t.disposeAndInitializeOperationInputGradients=function(e,t){e.forEach(function(e){Object.keys(e.inputs).forEach(function(n){var r=e.inputs[n];t.get(r,!0)!==t.get(e.output,!0)&&t.disposeArray(r),t.nullify(r)})})},t.disposeTransientOperationArrays=function(e,t,n){e.forEach(function(e){return e.disposeTransientArrays(t,n)})},t.throwErrorIfEvaluationSetContainsPlaceholderNodes=function(e){e.forEach(function(e){if(e instanceof i.PlaceholderNode){var t="["+e.output.shape.join(", ")+"]";throw new Error('Placeholder node "'+e.name+'" '+t+" not present in feed dictionary.")}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=n(3),c=function(e){function t(t,n,r,o){void 0===o&&(o=1e-8);var u=e.call(this,t,r)||this;return u.accumulatedGrads={},u.accumulatedUpdates={},u.accumulatedSquaredGradientsGraph=new a.TensorArrayMap,u.accumulatedUpdatesGraph=new a.TensorArrayMap,u.c=i.keep(s.scalar(-t)),u.epsilon=i.keep(s.scalar(o)),u.rho=i.keep(s.scalar(n)),u.oneMinusRho=i.keep(s.scalar(1-n)),u}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=o.ENV.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&i.tidy(function(){t.accumulatedGrads[n]=s.zerosLike(a).variable(!1)}),null==r.accumulatedUpdates[n]&&i.tidy(function(){t.accumulatedUpdates[n]=s.zerosLike(a).variable(!1)});var u=e[n],c=r.accumulatedGrads[n],l=r.accumulatedUpdates[n];i.tidy(function(){var e=t.rho.mul(c).add(t.oneMinusRho.mul(u.square())),r=l.add(t.epsilon).sqrt().div(c.add(t.epsilon).sqrt()).mul(u),o=t.rho.mul(l).add(t.oneMinusRho.mul(r.square()));t.accumulatedGrads[n].assign(e),t.accumulatedUpdates[n].assign(o);var i=t.c.mul(r).add(a);a.assign(i)})},r=this;for(var a in e)n(a)},t.prototype.beforeBatch=function(t,n,r,o,i){var a=this;e.prototype.beforeBatch.call(this,t,n,r,o,i),0===this.accumulatedSquaredGradientsGraph.size()&&this.variableNodes.forEach(function(e){a.accumulatedSquaredGradientsGraph.set(e.output,u.Tensor.zeros(e.output.shape)),a.accumulatedUpdatesGraph.set(e.output,u.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var u=this;null==this.one&&(this.one=i.keep(s.scalar(1))),i.tidy(function(){u.variableNodes.forEach(function(t){var n=r.get(t.output),o=u.variableGradients.get(t.output),a=u.accumulatedSquaredGradientsGraph.get(t.output),s=u.accumulatedUpdatesGraph.get(t.output),c=e.multiply(o,o),l=e.scaledArrayAdd(u.rho,a,e.subtract(u.one,u.rho),c),p=e.multiply(e.divide(e.sqrt(e.add(s,u.epsilon)),e.sqrt(e.add(a,u.epsilon))),o),h=e.scaledArrayAdd(u.cGraph,p,u.one,n),d=e.multiply(p,p),f=e.scaledArrayAdd(u.rho,s,e.subtract(u.one,u.rho),d);u.accumulatedSquaredGradientsGraph.set(t.output,i.keep(l)),u.accumulatedUpdatesGraph.set(t.output,i.keep(f)),r.set(t.output,i.keep(h)),t.data=h,n.dispose(),a.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.c.dispose(),this.epsilon.dispose(),this.rho.dispose(),this.oneMinusRho.dispose(),null!=this.one&&this.one.dispose(),null!=this.accumulatedSquaredGradientsGraph&&this.accumulatedSquaredGradientsGraph.dispose(),null!=this.accumulatedUpdatesGraph&&this.accumulatedUpdatesGraph.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(e){return t.accumulatedUpdates[e].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()}))},t}(n(17).Optimizer);t.AdadeltaOptimizer=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=n(3),c=function(e){function t(t,n,r){void 0===r&&(r=.1);var o=e.call(this,t,n)||this;return o.learningRate=t,o.initialAccumulatorValue=r,o.accumulatedGrads={},o.accumulatedSquaredGradients=new a.TensorArrayMap,o.c=i.keep(s.scalar(-t)),o.epsilon=i.keep(s.scalar(1e-8)),o}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=o.ENV.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&i.tidy(function(){t.accumulatedGrads[n]=s.fill(a.shape,t.initialAccumulatorValue).variable(!1)});var u=e[n],c=r.accumulatedGrads[n];i.tidy(function(){var e=c.add(u.square());t.accumulatedGrads[n].assign(e);var r=t.c.mul(u.div(e.add(t.epsilon).sqrt())).add(a);a.assign(r)})},r=this;for(var a in e)n(a)},t.prototype.beforeBatch=function(t,n,r,o,i){var a=this;e.prototype.beforeBatch.call(this,t,n,r,o,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(e){a.accumulatedSquaredGradients.set(e.output,u.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var u=this;null==this.one&&(this.one=i.keep(s.scalar(1))),i.tidy(function(){u.variableNodes.forEach(function(t){var n=r.get(t.output),o=u.variableGradients.get(t.output),a=u.accumulatedSquaredGradients.get(t.output),s=e.multiply(o,o),c=e.add(a,s),l=e.scaledArrayAdd(u.cGraph,e.divide(o,e.add(e.sqrt(c),u.epsilon)),u.one,n);u.accumulatedSquaredGradients.set(t.output,i.keep(c)),r.set(t.output,i.keep(l)),t.data=l,n.dispose(),a.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.epsilon.dispose(),this.c.dispose(),null!=this.one&&this.one.dispose(),null!=this.accumulatedSquaredGradients&&this.accumulatedSquaredGradients.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()})},t}(n(17).Optimizer);t.AdagradOptimizer=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=n(3),c=function(e){function t(t,n,r,o,u){void 0===o&&(o=1e-8);var c=e.call(this,t,u)||this;return c.learningRate=t,c.accumulatedFirstMoment={},c.accumulatedSecondMoment={},c.firstMomentGraph=new a.TensorArrayMap,c.secondMomentGraph=new a.TensorArrayMap,c.c=i.keep(s.scalar(-t)),c.eps=i.keep(s.scalar(o)),c.beta1=i.keep(s.scalar(n)),c.beta2=i.keep(s.scalar(r)),i.tidy(function(){c.accBeta1=s.scalar(n).variable(),c.accBeta2=s.scalar(r).variable()}),c.oneMinusBeta1=i.keep(s.scalar(1-n)),c.oneMinusBeta2=i.keep(s.scalar(1-r)),c.one=i.keep(s.scalar(1)),c}return r(t,e),t.prototype.applyGradients=function(e){var t=this;i.tidy(function(){var n=t.one.sub(t.accBeta1),r=t.one.sub(t.accBeta2);for(var i in e){var a=o.ENV.engine.registeredVariables[i];if(null==t.accumulatedFirstMoment[i]){var u=!1;t.accumulatedFirstMoment[i]=s.zerosLike(a).variable(u)}null==t.accumulatedSecondMoment[i]&&(u=!1,t.accumulatedSecondMoment[i]=s.zerosLike(a).variable(u));var c=e[i],l=t.accumulatedFirstMoment[i],p=t.accumulatedSecondMoment[i],h=t.beta1.mul(l).add(t.oneMinusBeta1.mul(c)),d=t.beta2.mul(p).add(t.oneMinusBeta2.mul(c.square())),f=h.div(n),m=d.div(r);t.accumulatedFirstMoment[i].assign(h),t.accumulatedSecondMoment[i].assign(d);var g=t.c.mul(f.div(t.eps.add(m.sqrt()))).add(a);a.assign(g)}t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})},t.prototype.beforeBatch=function(t,n,r,o,i){var a=this;e.prototype.beforeBatch.call(this,t,n,r,o,i),0===this.firstMomentGraph.size()&&this.variableNodes.forEach(function(e){a.firstMomentGraph.set(e.output,u.Tensor.zeros(e.output.shape))}),0===this.secondMomentGraph.size()&&this.variableNodes.forEach(function(e){a.secondMomentGraph.set(e.output,u.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var s=this;i.tidy(function(){var t=s.one.sub(s.accBeta1),n=s.one.sub(s.accBeta2);s.variableNodes.forEach(function(o){var a=r.get(o.output),u=s.variableGradients.get(o.output),c=s.firstMomentGraph.get(o.output),l=s.secondMomentGraph.get(o.output),p=e.scaledArrayAdd(s.beta1,c,s.oneMinusBeta1,u),h=e.scaledArrayAdd(s.beta2,l,s.oneMinusBeta2,u.square()),d=p.div(t),f=h.div(n),m=e.scaledArrayAdd(s.cGraph,d.div(s.eps.add(f.sqrt())),s.one,a);r.set(o.output,i.keep(m)),o.data=m,s.firstMomentGraph.set(o.output,i.keep(p)),s.secondMomentGraph.set(o.output,i.keep(h)),a.dispose(),u.dispose(),c.dispose(),l.dispose()}),s.accBeta1.assign(s.accBeta1.mul(s.beta1)),s.accBeta2.assign(s.accBeta2.mul(s.beta2))}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.c.dispose(),this.eps.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.firstMomentGraph&&this.firstMomentGraph.dispose(),null!=this.secondMomentGraph&&this.secondMomentGraph.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(e){return t.accumulatedSecondMoment[e].dispose()})},t}(n(17).Optimizer);t.AdamOptimizer=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=n(3),c=function(e){function t(t,n,r,o,u,c){void 0===o&&(o=1e-8),void 0===u&&(u=0);var l=e.call(this,t,c)||this;return l.learningRate=t,l.accumulatedFirstMoment={},l.accumulatedWeightedInfNorm={},l.firstMomentGraph=new a.TensorArrayMap,l.weightedInfNormGraph=new a.TensorArrayMap,l.c=i.keep(s.scalar(-t)),l.eps=i.keep(s.scalar(o)),l.beta1=i.keep(s.scalar(n)),l.beta2=i.keep(s.scalar(r)),l.decay=i.keep(s.scalar(u)),i.tidy(function(){l.iteration=s.scalar(0).variable(),l.accBeta1=s.scalar(n).variable()}),l.oneMinusBeta1=i.keep(s.scalar(1-n)),l.one=i.keep(s.scalar(1)),l}return r(t,e),t.prototype.applyGradients=function(e){var t=this;i.tidy(function(){var n=t.one.sub(t.accBeta1),r=t.c.div(t.one.add(t.decay.mul(t.iteration)));for(var i in e){var a=o.ENV.engine.registeredVariables[i];if(null==t.accumulatedFirstMoment[i]){var u=!1;t.accumulatedFirstMoment[i]=s.zerosLike(a).variable(u)}null==t.accumulatedWeightedInfNorm[i]&&(u=!1,t.accumulatedWeightedInfNorm[i]=s.zerosLike(a).variable(u));var c=e[i],l=t.accumulatedFirstMoment[i],p=t.accumulatedWeightedInfNorm[i],h=t.beta1.mul(l).add(t.oneMinusBeta1.mul(c)),d=t.beta2.mul(p),f=c.abs(),m=d.maximum(f);t.accumulatedFirstMoment[i].assign(h),t.accumulatedWeightedInfNorm[i].assign(m);var g=r.div(n).mul(h.div(t.eps.add(m))).add(a);a.assign(g)}t.iteration.assign(t.iteration.add(t.one)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})},t.prototype.beforeBatch=function(t,n,r,o,i){var a=this;e.prototype.beforeBatch.call(this,t,n,r,o,i),0===this.firstMomentGraph.size()&&this.variableNodes.forEach(function(e){a.firstMomentGraph.set(e.output,u.Tensor.zeros(e.output.shape))}),0===this.weightedInfNormGraph.size()&&this.variableNodes.forEach(function(e){a.weightedInfNormGraph.set(e.output,u.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var s=this;i.tidy(function(){var t=s.cGraph.div(s.one.add(s.decay.mul(s.iteration)));s.variableNodes.forEach(function(n){var o=r.get(n.output),a=s.variableGradients.get(n.output),u=s.firstMomentGraph.get(n.output),c=s.weightedInfNormGraph.get(n.output),l=e.scaledArrayAdd(s.beta1,u,s.oneMinusBeta1,a),p=s.beta2.mul(c),h=a.abs(),d=p.maximum(h),f=e.scaledArrayAdd(s.one,o,t.div(s.one.sub(s.accBeta1)),l.div(s.eps.add(d)));r.set(n.output,i.keep(f)),n.data=f,s.firstMomentGraph.set(n.output,i.keep(l)),s.weightedInfNormGraph.set(n.output,i.keep(d)),o.dispose(),a.dispose(),u.dispose(),c.dispose()}),s.iteration.assign(s.iteration.add(s.one)),s.accBeta1.assign(s.accBeta1.mul(s.beta1))}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.c.dispose(),this.eps.dispose(),this.accBeta1.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.oneMinusBeta1.dispose(),this.decay.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.firstMomentGraph&&this.firstMomentGraph.dispose(),null!=this.weightedInfNormGraph&&this.weightedInfNormGraph.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(e){return t.accumulatedWeightedInfNorm[e].dispose()})},t}(n(17).Optimizer);t.AdamaxOptimizer=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(12),s=n(6),u=n(3),c=function(e){function t(t,n,r,o){void 0===o&&(o=!1);var i=e.call(this,t,r)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=o,i.m=s.scalar(i.momentum),i.accumulations={},i}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=o.ENV.engine.registeredVariables[n];null==r.accumulations[n]&&i.tidy(function(){t.accumulations[n]=s.zerosLike(a).variable(!1)});var u=r.accumulations[n],c=e[n];i.tidy(function(){var e,r=t.m.mul(u).add(c);e=t.useNesterov?t.c.mul(c.add(r.mul(t.m))).add(a):t.c.mul(r).add(a),t.accumulations[n].assign(r),a.assign(e)})},r=this;for(var a in e)n(a)},t.prototype.beforeBatch=function(t,n,r,o,i){var s=this;null==this.variableVelocitiesGraph&&(this.variableVelocitiesGraph=new a.TensorArrayMap),e.prototype.beforeBatch.call(this,t,n,r,o,i),0===this.variableVelocitiesGraph.size()&&this.variableNodes.forEach(function(e){s.variableVelocitiesGraph.set(e.output,u.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var s=this;i.tidy(function(){s.variableNodes.forEach(function(e){var t,n=r.get(e.output),o=s.variableGradients.get(e.output),a=s.variableVelocitiesGraph.get(e.output),u=s.m.mul(a).add(o);t=s.useNesterov?s.cGraph.mul(o.add(u.mul(s.m))).add(n):s.cGraph.mul(u).add(n),s.variableVelocitiesGraph.set(e.output,i.keep(u)),r.set(e.output,i.keep(t)),e.data=t,n.dispose(),a.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.m.dispose(),null!=this.variableVelocitiesGraph&&this.variableVelocitiesGraph.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(e){this.momentum=e},t}(n(29).SGDOptimizer);t.MomentumOptimizer=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(33),s=n(12),u=n(6),c=n(3),l=function(e){function t(t,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=1e-8);var c=e.call(this,t,o)||this;return c.learningRate=t,c.accumulatedMeanSquares={},c.accumulatedMoments={},c.accumulatedMeanSquaredGraph=new s.TensorArrayMap,c.accumulatedMomentGraph=new s.TensorArrayMap,c.c=i.keep(u.scalar(t)),c.epsilon=i.keep(u.scalar(a)),c.decay=i.keep(u.scalar(n)),c.momentum=i.keep(u.scalar(r)),c.oneMinusDecay=i.keep(u.scalar(1-n)),c}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=o.ENV.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&i.tidy(function(){t.accumulatedMeanSquares[n]=u.zerosLike(a).variable(!1)}),null==r.accumulatedMoments[n]&&i.tidy(function(){t.accumulatedMoments[n]=u.zerosLike(a).variable(!1)});var s=r.accumulatedMeanSquares[n],c=r.accumulatedMoments[n],l=e[n];i.tidy(function(){var e=t.decay.mul(s).add(t.oneMinusDecay.mul(l.square())),r=t.momentum.mul(c).add(t.c.mul(l).div(e.add(t.epsilon).sqrt()));t.accumulatedMeanSquares[n].assign(e),t.accumulatedMoments[n].assign(r);var o=a.sub(r);a.assign(o)})},r=this;for(var a in e)n(a)},t.prototype.beforeBatch=function(e,t,n,r,o){var i=this;this.variableNodes=null==this.specifiedVariableNodes?a.getVariableNodesFromEvaluationSet(n.nodes):this.specifiedVariableNodes,t!==this.prevBatchSize&&(null!=this.cGraph&&this.cGraph.dispose(),this.prevBatchSize=t,this.cGraph=e.keep(u.scalar(this.learningRate/t))),this.variableNodes.forEach(function(t){return i.variableGradients.set(t.output,e.keep(c.Tensor.zeros(t.output.shape)))}),0===this.accumulatedMeanSquaredGraph.size()&&this.variableNodes.forEach(function(e){i.accumulatedMeanSquaredGraph.set(e.output,c.Tensor.zeros(e.output.shape)),i.accumulatedMomentGraph.set(e.output,c.Tensor.zeros(e.output.shape))})},t.prototype.afterBatch=function(e,t,n,r,o){var a=this;i.tidy(function(){a.variableNodes.forEach(function(t){var n=r.get(t.output),o=a.variableGradients.get(t.output),s=a.accumulatedMeanSquaredGraph.get(t.output),u=a.accumulatedMomentGraph.get(t.output),c=e.scaledArrayAdd(a.decay,s,a.oneMinusDecay,o.square()),l=e.scaledArrayAdd(a.momentum,u,a.cGraph,o.div(c.add(a.epsilon).sqrt())),p=n.sub(l);a.accumulatedMeanSquaredGraph.set(t.output,i.keep(c)),a.accumulatedMomentGraph.set(t.output,i.keep(l)),r.set(t.output,i.keep(p)),t.data=p,n.dispose(),s.dispose(),u.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},t.prototype.dispose=function(){var t=this;e.prototype.dispose.call(this),this.c.dispose(),this.epsilon.dispose(),this.decay.dispose(),this.momentum.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquaredGraph&&this.accumulatedMeanSquaredGraph.dispose(),null!=this.accumulatedMomentGraph&&this.accumulatedMomentGraph.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(e){return t.accumulatedMeanSquares[e].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(e){return t.accumulatedMoments[e].dispose()})},t}(n(17).Optimizer);t.RMSPropOptimizer=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(3),s=n(41),u=n(0),c=n(11),l=n(42),p=n(7),h=n(95),d=function(){function e(){}return e.tensor=function(e,t,n){void 0===n&&(n="float32");var r=u.inferShape(e);return null!=t&&1!==r.length&&u.assertShapesMatch(t,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "),u.isTypedArray(e)||Array.isArray(e)||(e=[e]),t=t||r,a.Tensor.make(t,{values:function(e,t){return function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t)?e:(Array.isArray(e)&&(e=u.flatten(e)),u.copyTypedArray(e,t))}(e,n)},n)},e.scalar=function(t,n){if(void 0===n&&(n="float32"),u.isTypedArray(t)||Array.isArray(t))throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return e.tensor(t,[],n)},e.tensor1d=function(t,n){void 0===n&&(n="float32");var r=u.inferShape(t);if(1!==r.length)throw new Error("Error creating a new Tensor1D: values must be a flat/TypedArray");return e.tensor(t,r,n)},e.tensor2d=function(t,n,r){void 0===r&&(r="float32");var o=u.inferShape(t);if(2!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor2D: values must be number[][] or flat/TypedArray");return n=n||o,e.tensor(t,n,r)},e.tensor3d=function(t,n,r){void 0===r&&(r="float32");var o=u.inferShape(t);if(3!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor3D: values must be number[][][]or flat/TypedArray");return n=n||o,e.tensor(t,n,r)},e.tensor4d=function(t,n,r){void 0===r&&(r="float32");var o=u.inferShape(t);if(4!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor4D: values must be number[][][][]or flat/TypedArray");return n=n||o,e.tensor(t,n,r)},e.ones=function(e,t){void 0===t&&(t="float32");var n=function(e,t){for(var n=f(e,t),r=0;r<n.length;r++)n[r]=1;return n}(u.sizeFromShape(e),t);return a.Tensor.make(e,{values:n},t)},e.zeros=function(e,t){void 0===t&&(t="float32");var n=f(u.sizeFromShape(e),t);return a.Tensor.make(e,{values:n},t)},e.fill=function(e,t,n){void 0===n&&(n="float32");var r=u.getTypedArrayFromDType(n,u.sizeFromShape(e));return r.fill(t),a.Tensor.make(e,{values:r},n)},e.onesLike=function(t){return e.ones(t.shape,t.dtype)},e.zerosLike=function(t){return e.zeros(t.shape,t.dtype)},e.clone=function(e){return a.Tensor.make(e.shape,{dataId:e.dataId},e.dtype)},e.randomNormal=function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var i=new h.MPRandGauss(t,n,r,!1,o);return a.Tensor.rand(e,function(){return i.nextValue()},r)},e.truncatedNormal=function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var i=new h.MPRandGauss(t,n,r,!0,o);return a.Tensor.rand(e,function(){return i.nextValue()},r)},e.randomUniform=function(e,t,n,r){return void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32"),a.Tensor.rand(e,function(){return u.randUniform(t,n)},r)},e.rand=function(e,t,n){var r=u.sizeFromShape(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return a.Tensor.make(e,{values:o},n)},e.multinomial=function(e,t,n){var r=e.size,o=e.rank;if(r<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+r+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var a=1===o?e.as2D(1,-1):e,s=i.ENV.engine.runKernel(function(e){return e.multinomial(a,t,n)},{prob2D:a});return 1===o?s.as1D():s},e.oneHot=function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);return i.ENV.engine.runKernel(function(o){return o.oneHot(e,t,n,r)},{indices:e})},e.fromPixels=function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return i.ENV.engine.fromPixels(e,t)},e.reshape=function(e,t){return t=u.inferFromImplicitShape(t,e.size),u.assert(e.size===u.sizeFromShape(t),"new shape and old shape must have the same number of elements."),i.ENV.engine.runKernel(function(n){return a.Tensor.make(t,{dataId:e.dataId},e.dtype)},{x:e},function(t){return{x:function(){return t.reshape(e.shape)}}})},e.squeeze=function(t,n){return e.reshape(t,u.squeezeShape(t.shape,n).newShape)},e.cast=function(t,n){return i.ENV.engine.runKernel(function(r){if(!u.hasEncodingLoss(t.dtype,n))return a.Tensor.make(t.shape,{dataId:t.dataId},n);if("int32"===n)return r.int(t);if("bool"===n)return r.notEqual(t,e.scalar(0,t.dtype));throw new Error("Error in Cast: unknown dtype argument ("+n+")")},{x:t},function(e){return{x:function(){return e.clone()}}})},e.tile=function(t,n){return u.assert(t.rank===n.length,"Error in transpose: rank of input "+t.rank+" must match length of reps "+n+"."),i.ENV.engine.runKernel(function(e){return e.tile(t,n)},{x:t},function(r){return{x:function(){var o=e.zerosLike(t);if(1===t.rank)for(var i=0;i<n[0];++i)o=o.add(r.slice([i*t.shape[0]],[t.shape[0]]));else if(2===t.rank)for(i=0;i<n[0];++i)for(var a=0;a<n[1];++a)o=o.add(r.slice([i*t.shape[0],a*t.shape[1]],[t.shape[0],t.shape[1]]));else if(3===t.rank)for(i=0;i<n[0];++i)for(a=0;a<n[1];++a)for(var s=0;s<n[2];++s)o=o.add(r.slice([i*t.shape[0],a*t.shape[1],s*t.shape[2]],[t.shape[0],t.shape[1],t.shape[2]]));else{if(4!==t.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+t.rank+" tensors yet.");for(i=0;i<n[0];++i)for(a=0;a<n[1];++a)for(s=0;s<n[2];++s)for(var u=0;u<n[3];++u)o=o.add(r.slice([i*t.shape[0],a*t.shape[1],s*t.shape[2],u*t.shape[3]],[t.shape[0],t.shape[1],t.shape[2],t.shape[3]]))}return o}}})},e.gather=function(e,t,n){void 0===n&&(n=0);var r=c.parseAxisParam(n,e.shape);return i.ENV.engine.runKernel(function(n){return n.gather(e,t,r[0])},{x:e,indices:t})},e.pad1d=function(t,n,r){return void 0===r&&(r=0),u.assert(2===n.length,"Invalid number of paddings. Must be length of 2."),e.pad(t,[n],r)},e.pad2d=function(t,n,r){return void 0===r&&(r=0),u.assert(2===n.length&&2===n[0].length&&2===n[1].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,n,r)},e.pad3d=function(t,n,r){return void 0===r&&(r=0),u.assert(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,n,r)},e.pad4d=function(t,n,r){return void 0===r&&(r=0),u.assert(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,"Invalid number of paddings. Must be length of 2 each."),e.pad(t,n,r)},e.pad=function(e,t,n){if(void 0===n&&(n=0),0===e.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var r=t.map(function(e){return e[0]});return i.ENV.engine.runKernel(function(r){return r.pad(e,t,n)},{x:e},function(t){return{x:function(){return t.slice(r,e.shape)}}})},e.stack=function(e,t){void 0===t&&(t=0),u.assert(e.length>=2,"Pass at least two tensors to dl.stack");var n=e[0].rank,r=e[0].shape,o=e[0].dtype;u.assert(t<=n,"Axis must be <= rank of the tensor"),e.forEach(function(e){u.assertShapesMatch(r,e.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(e){u.assert(o===e.dtype,"All tensors passed to stack must have matching dtypes")});var i=e.map(function(e){return e.expandDims(t)});return l.ConcatOps.concat(i,t)},e.expandDims=function(t,n){void 0===n&&(n=0),u.assert(n<=t.rank,"Axis must be <= rank of the tensor");var r=t.shape.slice();return r.splice(n,0,1),e.reshape(t,r)},e.linspace=function(e,t,n){if(0===n)throw new Error("Cannot request zero samples");var r=(t-e)/(n-1),o=f(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return a.Tensor1D.new(o,"float32")},e.range=function(t,n,r,o){if(void 0===r&&(r=1),void 0===o&&(o="float32"),0===r)throw new Error("Cannot have a step of zero");if(t===n||t<n&&r<0||n<t&&r>1)return e.zeros([0],o);var i=f(Math.abs(Math.ceil((n-t)/r)),o);n<t&&1===r&&(r=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return e.tensor1d(i,o)},e.buffer=function(e,t,n){return void 0===t&&(t="float32"),new a.TensorBuffer(e,t,n)},e.print=function(e,t){void 0===t&&(t=!1),console.log(s.tensorToString(e,t))},r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"scalar",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor1d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor2d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor3d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"tensor4d",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"ones",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"zeros",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"fill",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"onesLike",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"zerosLike",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"clone",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"randomNormal",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"truncatedNormal",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"randomUniform",null),r([p.operation],e,"rand",null),r([p.operation],e,"multinomial",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"oneHot",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],e,"fromPixels",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],e,"reshape",null),r([o.doc({heading:"Tensors",subheading:"Transformations"})],e,"squeeze",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],e,"cast",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],e,"tile",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],e,"gather",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],e,"pad",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],e,"stack",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],e,"expandDims",null),r([p.operation,o.doc({heading:"Tensors",subheading:"Creation"})],e,"linspace",null),r([p.operation,o.doc({heading:"Tensors",subheading:"Creation"})],e,"range",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"buffer",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],e,"print",null),e}();function f(e,t){if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type $ {dtype}")}t.ArrayOps=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=7;function i(e,t){return r.rightPad(parseFloat(e.toFixed(o)).toString(),t)}t.tensorToString=function(e,t){var n=e.dataSync(),r=function(e){var t=e.dataSync(),n=e.size,r=e.strides[e.strides.length-1],o=new Array(r).fill(0);if(e.rank>1)for(var a=0;a<n/r;a++)for(var s=a*r,u=0;u<r;u++)o[u]=Math.max(o[u],i(t[s+u],0).length);return o}(e),o=function e(t,n,r,o,a){void 0===a&&(a=!0);var s=n[0],u=n.length;if(0===u)return[t[0].toString()];if(1===u){if(s>20){var c=Array.from(t.subarray(0,3)),l=Array.from(t.subarray(s-3,s));return["["+c.map(function(e,t){return i(e,o[t])}).join(", ")+", ..., "+l.map(function(e,t){return i(e,o[s-3+t])}).join(", ")+"]"]}return["["+Array.from(t).map(function(e,t){return i(e,o[t])}).join(", ")+"]"]}var p=n.slice(1),h=r.slice(1),d=r[0],f=[];if(s>20){for(var m=0;m<3;m++){var g=(v=m*d)+d;f.push.apply(f,e(t.subarray(v,g),p,h,o,!1))}f.push("...");for(m=s-3;m<s;m++){g=(v=m*d)+d;f.push.apply(f,e(t.subarray(v,g),p,h,o,m===s-1))}}else for(m=0;m<s;m++){var v;g=(v=m*d)+d;f.push.apply(f,e(t.subarray(v,g),p,h,o,m===s-1))}var y=2===u?",":"";f[0]="["+f[0]+y;for(m=1;m<f.length-1;m++)f[m]=" "+f[m]+y;var b=",\n";for(m=2;m<u;m++)b+="\n";return f[f.length-1]=" "+f[f.length-1]+"]"+(a?"":b),f}(n,e.shape,e.strides,r),a=["Tensor"];return t&&(a.push("  dtype: "+e.dtype),a.push("  rank: "+e.rank),a.push("  shape: ["+e.shape+"]"),a.push("  values:")),a.push(o.map(function(e){return"    "+e}).join("\n")),a.join("\n")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(11),u=n(20),c=n(7),l=function(){function e(){}return e.concat1d=function(t){return e.concat(t,0)},e.concat2d=function(t,n){return e.concat(t,n)},e.concat3d=function(t,n){return e.concat(t,n)},e.concat4d=function(t,n){return e.concat(t,n)},e.concat=function(e,t){void 0===t&&(t=0),a.assert(e.length>=2,"Pass at least two tensors to concat");for(var n=e[0],r=s.parseAxisParam(t,n.shape),o=1;o<e.length;++o)n=p(n,e[o],r[0]);return n},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),c.operation],e,"concat",null),e}();function p(e,t,n){u.assertParams(e.shape,t.shape,n);var r=u.computeOutShape(e.shape,t.shape,n),o=e.as2D(-1,a.sizeFromShape(e.shape.slice(n))),s=t.as2D(-1,a.sizeFromShape(t.shape.slice(n))),c=u.computeGradientSliceShapes(o.shape,s.shape),l=c.aBegin,p=c.aSize,h=c.bBegin,d=c.bSize;return i.ENV.engine.runKernel(function(e){return e.concat(o,s)},{a:o,b:s},function(e){return{a:function(){return e.slice(l,p)},b:function(){return e.slice(h,d)}}}).reshape(r)}t.ConcatOps=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(7),u=function(){function e(){}return e.batchNormalization2d=function(t,n,r,o,i,s){return void 0===o&&(o=.001),a.assert(2===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),a.assert(2===n.rank||1===n.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+n.rank+"."),a.assert(2===r.rank||1===r.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(2===i.rank||1===i.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),e.batchNormalization(t,n,r,o,i,s)},e.batchNormalization3d=function(t,n,r,o,i,s){return void 0===o&&(o=.001),a.assert(3===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),a.assert(3===n.rank||1===n.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+n.rank+"."),a.assert(3===r.rank||1===r.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(3===i.rank||1===i.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),e.batchNormalization(t,n,r,o,i,s)},e.batchNormalization4d=function(t,n,r,o,i,s){return void 0===o&&(o=.001),a.assert(4===t.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+t.rank+"."),a.assert(4===n.rank||1===n.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+n.rank+"."),a.assert(4===r.rank||1===r.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(4===i.rank||1===i.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),e.batchNormalization(t,n,r,o,i,s)},e.batchNormalization=function(e,t,n,r,o,a){var s;return void 0===r&&(r=.001),s=0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e,i.ENV.engine.runKernel(function(e){return e.batchNormalization4D(s,c(t),c(n),r,c(o),c(a))},{x:e,mean:t,variance:n}).reshape(e.shape)},r([s.operation],e,"batchNormalization2d",null),r([s.operation],e,"batchNormalization3d",null),r([s.operation],e,"batchNormalization4d",null),r([o.doc({heading:"Operations",subheading:"Normalization"})],e,"batchNormalization",null),e}();function c(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}t.BatchNormOps=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(16),u=n(7),c=n(6),l=function(){function e(){}return e.add=function(e,t){a.assertTypesMatch(e,t);var n=s.assertAndGetBroadcastShape(e.shape,t.shape);return i.ENV.engine.runKernel(function(n){return n.add(e,t)},{a:e,b:t},function(r){return{a:function(){var t=r,o=s.getReductionAxes(e.shape,n);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)},b:function(){var e=r,o=s.getReductionAxes(t.shape,n);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)}}})},e.addStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in addStrict: "),e.add(t)},e.sub=function(e,t){a.assertTypesMatch(e,t);var n=s.assertAndGetBroadcastShape(e.shape,t.shape);return i.ENV.engine.runKernel(function(n){return n.subtract(e,t)},{a:e,b:t},function(r){return{a:function(){var t=r,o=s.getReductionAxes(e.shape,n);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)},b:function(){var e=r,o=s.getReductionAxes(t.shape,n);return o.length>0&&(e=e.sum(o)),e.neg().reshape(t.shape)}}})},e.subStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in subStrict: "),e.sub(t)},e.pow=function(e,t){return s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.pow(e,t)},{base:e},function(n){if(!a.arraysEqual(e.shape,t.shape)&&!a.isScalarShape(t.shape))throw new Error("Gradient of pow not yet supported for broadcasted shapes.");return{base:function(){var r=t.toFloat(),o=r.mul(e.toFloat().pow(r.sub(c.scalar(1))));return n.mulStrict(o)}}})},e.powStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in powStrict: "),e.pow(t)},e.mul=function(e,t){a.assertTypesMatch(e,t);var n=s.assertAndGetBroadcastShape(e.shape,t.shape);return i.ENV.engine.runKernel(function(n){return n.multiply(e,t)},{a:e,b:t},function(r){return{a:function(){var o=r.mul(t.toFloat()),i=s.getReductionAxes(e.shape,n);return i.length>0?o.sum(i).reshape(e.shape):o},b:function(){var o=r.mul(e.toFloat()),i=s.getReductionAxes(t.shape,n);return i.length>0?o.sum(i).reshape(t.shape):o}}})},e.mulStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)},e.div=function(e,t){var n=s.assertAndGetBroadcastShape(e.shape,t.shape);return i.ENV.engine.runKernel(function(n){return n.divide(e,t)},{a:e,b:t},function(r){return{a:function(){var o=r.div(t.toFloat()),i=s.getReductionAxes(e.shape,n);return i.length>0?o.sum(i).reshape(e.shape):o},b:function(){var o=r.mul(e.toFloat()),i=s.getReductionAxes(t.shape,n);i.length>0&&(o=o.sum(i).reshape(t.shape));var a=t.square();return o.div(a.toFloat()).neg()}}})},e.divStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in divideStrict: "),e.div(t)},e.minimum=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.minimum(e,t)},{a:e,b:t},function(n){return{a:function(){return n.mul(e.lessEqual(t).toFloat())},b:function(){return n.mul(e.greater(t).toFloat())}}})},e.minimumStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)},e.maximum=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.maximum(e,t)},{a:e,b:t},function(n){return{a:function(){return n.mul(e.greaterEqual(t).toFloat())},b:function(){return n.mul(e.less(t).toFloat())}}})},e.maximumStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in minimumStrict: "),e.maximum(t)},r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"add",null),r([u.operation],e,"addStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"sub",null),r([u.operation],e,"subStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"pow",null),r([u.operation],e,"powStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"mul",null),r([u.operation],e,"mulStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"div",null),r([u.operation],e,"divStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"minimum",null),r([u.operation],e,"minimumStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],e,"maximum",null),r([u.operation],e,"maximumStrict",null),e}();t.BinaryOps=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(16),u=n(7),c=function(){function e(){}return e.notEqual=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.notEqual(e,t)},{a:e,b:t})},e.notEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in notEqualStrict: "),e.notEqual(t)},e.less=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.less(e,t)},{a:e,b:t})},e.lessStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in lessStrict: "),e.less(t)},e.equal=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.equal(e,t)},{a:e,b:t})},e.equalStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in equalStrict: "),e.equal(t)},e.lessEqual=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.lessEqual(e,t)},{a:e,b:t})},e.lessEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in lessEqualStrict: "),e.lessEqual(t)},e.greater=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.greater(e,t)},{a:e,b:t})},e.greaterStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in greaterStrict: "),e.greater(t)},e.greaterEqual=function(e,t){return a.assertTypesMatch(e,t),s.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.greaterEqual(e,t)},{a:e,b:t})},e.greaterEqualStrict=function(e,t){return a.assertShapesMatch(e.shape,t.shape,"Error in greaterEqualStrict: "),e.greaterEqual(t)},r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"notEqual",null),r([u.operation],e,"notEqualStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"less",null),r([u.operation],e,"lessStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"equal",null),r([u.operation],e,"equalStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"lessEqual",null),r([u.operation],e,"lessEqualStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"greater",null),r([u.operation],e,"greaterStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],e,"greaterEqual",null),r([u.operation],e,"greaterEqualStrict",null),e}();t.CompareOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(18),u=n(7),c=function(){function e(){}return e.conv1d=function(t,n,r,o,i){var s=t,u=!1;2===t.rank&&(u=!0,s=t.as3D(1,t.shape[0],t.shape[1])),a.assert(3===s.rank,"Error in conv1d: input must be rank 3, but got rank "+s.rank+"."),a.assert(3===n.rank,"Error in conv1d: filter must be rank 3, but got rank "+n.rank+"."),null!=i&&a.assert(a.isInt(o),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."),a.assert(s.shape[2]===n.shape[1],"Error in conv1d: depth of input ("+s.shape[2]+") must match  input depth for filter "+n.shape[1]+".");var c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),l=s.as4D(s.shape[0],1,s.shape[1],s.shape[2]),p=[1,r],h=e.conv2d(l,c,p,o,i);return u?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])},e.conv2d=function(t,n,r,o,u){var c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."),a.assert(4===n.rank,"Error in conv2d: filter must be rank 4, but got rank "+n.rank+"."),null!=u&&a.assert(a.isInt(o),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."),a.assert(c.shape[3]===n.shape[2],"Error in conv2d: depth of input ("+c.shape[3]+") must match  input depth for filter "+n.shape[2]+".");var p=s.computeConv2DInfo(c.shape,n.shape,r,1,o,u),h=i.ENV.engine.runKernel(function(e){return e.conv2d(c,n,p)},{x:c,filter:n},function(t){return{x:function(){return e.conv2dDerInput(c.shape,t,n,r,o)},filter:function(){return e.conv2dDerFilter(c,t,n.shape,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},e.conv2dDerInput=function(e,t,n,r,o,u){a.assert(e.length===t.rank,"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match");var c=e,l=t,p=!1;3===t.rank&&(p=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),c=[1,e[0],e[1],e[2]]);var h=c[3],d=l.shape[3];a.assert(4===c.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+c.length+"."),a.assert(4===l.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),a.assert(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),a.assert(h===n.shape[2],"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+n.shape[2]+"."),a.assert(d===n.shape[3],"Error in conv2dDerInput: depth of output ("+d+") mustmatch output depth for filter "+n.shape[3]+"."),null!=u&&a.assert(a.isInt(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var f=s.computeConv2DInfo(c,n.shape,r,1,o,u),m=i.ENV.engine.runKernel(function(e){return e.conv2dDerInput(l,n,f)},{dy4D:l});return p?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m},e.conv2dDerFilter=function(e,t,n,r,o,u){var c=e;3===e.rank&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+c.shape+"."),a.assert(4===l.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."),a.assert(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),a.assert(c.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+c.shape[3]+") must match input depth in filter ("+n[2]+"."),a.assert(l.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+l.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=u&&a.assert(a.isInt(o),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computeConv2DInfo(c.shape,n,r,1,o,u);return i.ENV.engine.runKernel(function(e){return e.conv2dDerFilter(c,l,p)},{x4D:c,dy4D:l})},e.conv2dTranspose=function(t,n,r,o,i,a){return e.conv2dDerInput(r,t,n,o,i,a)},e.depthwiseConv2d=function(e,t,n,r,o,u){void 0===o&&(o=[1,1]);var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in depthwiseConv2D: input must be rank 4, but got rank "+c.rank+"."),a.assert(4===t.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+t.rank+"."),a.assert(c.shape[3]===t.shape[2],"Error in depthwiseConv2D: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+t.shape[2]+"."),null==o&&(o=[1,1]);var p="number"==typeof o?[o,o]:o,h=p[0],d=p[1];a.assert(1===h&&1===d,"Error in depthwiseConv2D: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"),null!=u&&a.assert(a.isInt(r),"Error in depthwiseConv2D: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+".");var f=s.computeConv2DInfo(c.shape,t.shape,n,o,r,u,!0),m=i.ENV.engine.runKernel(function(e){return e.depthwiseConv2D(c,t,f)},{input4D:c,filter:t});return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m},r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"conv1d",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"conv2d",null),r([u.operation],e,"conv2dDerInput",null),r([u.operation],e,"conv2dDerFilter",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"conv2dTranspose",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"depthwiseConv2d",null),e}();t.ConvOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(7),u=function(){function e(){}return e.resizeBilinear=function(e,t,n){void 0===n&&(n=!1),a.assert(3===e.rank||4===e.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+e.rank+"."),a.assert(2===t.length,"Error in resizeBilinear: new shape must 2D, but got shape "+t+".");var r=e,o=!1;3===e.rank&&(o=!0,r=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t[0],u=t[1],c=i.ENV.engine.runKernel(function(e){return e.resizeBilinear(r,s,u,n)},{batchImages:r});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},r([o.doc({heading:"Operations",subheading:"Images",namespace:"image"}),s.operation],e,"resizeBilinear",null),e}();t.ImageOps=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(21),s=n(0),u=n(16),c=n(7),l=function(){function e(){}return e.logicalNot=function(e){return s.assert("bool"===e.dtype,"Error Array must be of type bool."),i.ENV.engine.runKernel(function(t){return t.logicalNot(e)},{x:e})},e.logicalAnd=function(e,t){return s.assert("bool"===e.dtype&&"bool"===t.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.logicalAnd(e,t)},{a:e,b:t})},e.logicalOr=function(e,t){return s.assert("bool"===e.dtype&&"bool"===t.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.logicalOr(e,t)},{a:e,b:t})},e.logicalXor=function(e,t){return s.assert("bool"===e.dtype&&"bool"===t.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(e.shape,t.shape),i.ENV.engine.runKernel(function(n){return n.logicalXor(e,t)},{a:e,b:t})},e.where=function(e,t,n){s.assert("bool"===e.dtype||"bool"===t.dtype||"bool"===n.dtype,"Error Array must be of type bool."),s.assertShapesMatch(t.shape,n.shape,"Error in where: "),1===e.rank?s.assert(e.shape[0]===t.shape[0],"The first dimension of `a` must match the size of `condition`."):s.assertShapesMatch(e.shape,n.shape,"Error in where: ");var r=a.upcastType(t.dtype,n.dtype);return i.ENV.engine.runKernel(function(o){return o.where(e,t,n,r)},{condition:e,a:t,b:n})},r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],e,"logicalNot",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],e,"logicalAnd",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],e,"logicalOr",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],e,"logicalXor",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],e,"where",null),e}();t.LogicalOps=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(7),u=function(){function e(){}return e.localResponseNormalization=function(e,t,n,r,o,s){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5),void 0===s&&(s="acrossChannels"),a.assert(4===e.rank||3===e.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+e.rank+"."),a.assert(a.isInt(t),"Error in localResponseNormalization3D: radius must be an integer\n                     but got radius "+t+".");var u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=i.ENV.engine.runKernel(function(e){return e.localResponseNormalization4D(u,t,n,r,o,s)},{x4D:u});return c?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},r([o.doc({heading:"Operations",subheading:"Normalization"}),s.operation],e,"localResponseNormalization",null),e}();t.LRNOps=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(7),a=function(){function e(){}return e.multiRNNCell=function(e,t,n,r){for(var o=t,i=[],a=0;a<e.length;a++){var s=e[a](o,n[a],r[a]);i.push(s[0]),i.push(s[1]),o=s[1]}var u=[],c=[];for(a=0;a<i.length;a+=2)u.push(i[a]),c.push(i[a+1]);return[u,c]},e.basicLSTMCell=function(e,t,n,r,o,i){var a=r.concat(i,1).matMul(t).add(n),s=a.shape[0],u=a.shape[1]/4,c=[s,u],l=a.slice([0,0],c),p=a.slice([0,u],c),h=a.slice([0,2*u],c),d=a.slice([0,3*u],c),f=l.sigmoid().mulStrict(p.tanh()).addStrict(o.mulStrict(e.add(h).sigmoid()));return[f,f.tanh().mulStrict(d.sigmoid())]},r([o.doc({heading:"Operations",subheading:"RNN"}),i.operation],e,"multiRNNCell",null),r([o.doc({heading:"Operations",subheading:"RNN"}),i.operation],e,"basicLSTMCell",null),e}();t.LSTMOps=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(11),a=n(7),s=n(6),u=function(){function e(){}return e.norm=function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(s.scalar(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e,t,n),a=o.shape;if(r){var u=i.parseAxisParam(n,e.shape);a=i.expandShapeToKeepDim(o.shape,u)}return o.reshape(a)},r([o.doc({heading:"Operations",subheading:"Matrices"}),a.operation],e,"norm",null),e}();t.NormOps=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(18),u=n(7),c=function(){function e(){}return e.maxPool=function(t,n,r,o,u){var c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in maxPool: input must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(o),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computePool2DInfo(c.shape,n,r,o,u),h=i.ENV.engine.runKernel(function(e){return e.maxPool(c,p)},{x:c},function(t){return{x:function(){return e.maxPoolBackprop(t,c,n,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},e.maxPoolBackprop=function(e,t,n,r,o,u){a.assert(t.rank===e.rank,"Rank of input ("+t.rank+") does not match rank of dy ("+e.rank+")");var c=t,l=e,p=!1;3===t.rank&&(p=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===l.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."),a.assert(4===c.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(o),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var h=s.computePool2DInfo(c.shape,n,r,o,u),d=i.ENV.engine.runKernel(function(e){return e.maxPoolBackprop(l,c,h)},{dy4D:l,input4D:c});return p?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d},e.minPool=function(e,t,n,r,o){var u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===u.rank,"Error in minPool: x must be rank 4 but got rank "+u.rank+"."),null!=o&&a.assert(a.isInt(r),"Error in minPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var l=s.computePool2DInfo(u.shape,t,n,r,o),p=i.ENV.engine.runKernel(function(e){return e.minPool(u,l)},{input4D:u});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p},e.avgPool=function(t,n,r,o,u){var c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in avgPool: x must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(o),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computePool2DInfo(c.shape,n,r,o),h=i.ENV.engine.runKernel(function(e){return e.avgPool(c,p)},{x:c},function(t){return{x:function(){return e.avgPoolBackprop(t,c,n,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},e.avgPoolBackprop=function(e,t,n,r,o){a.assert(t.rank===e.rank,"Rank of input ("+t.rank+") does not match rank of dy ("+e.rank+")");var u=t,c=e,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."),a.assert(4===u.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var p=s.computePool2DInfo(u.shape,n,r,o),h=i.ENV.engine.runKernel(function(e){return e.avgPoolBackprop(c,u,p)},{dy4D:c,input4D:u});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"maxPool",null),r([u.operation],e,"maxPoolBackprop",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"minPool",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],e,"avgPool",null),r([u.operation],e,"avgPoolBackprop",null),e}();t.PoolOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(2),s=n(3),u=n(0),c=n(11),l=n(7),p=n(6),h=function(){function e(){}return e.logSumExp=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape),o=e.max(r,!0),i=e.sub(o).exp().sum(r).log(),a=o.reshape(i.shape).add(i);if(n){var s=c.expandShapeToKeepDim(a.shape,r);return a.reshape(s)}return a},e.sum=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape);return a.customGrad(function(e){var t=c.getAxesPermutation(r,e.rank),o=r,a=e;null!=t&&(a=e.transpose(t),o=c.getInnerMostAxes(o.length,e.rank));var u=i.ENV.engine.runKernel(function(e){return e.sum(a,o)},{permutedX:a});if(n){var l=c.expandShapeToKeepDim(u.shape,r);u=u.reshape(l)}return{value:u,gradFunc:function(t){var n=e.shape.slice();return r.forEach(function(e){n[e]=1}),t.reshape(n).mul(s.Tensor.ones(e.shape,"float32"))}}})(e)},e.mean=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape),o=c.computeOutAndReduceShapes(e.shape,r)[1],i=u.sizeFromShape(o);return a.customGrad(function(e){var o=p.scalar(i);return{value:e.div(o).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return r.forEach(function(e){n[e]=1}),t.reshape(n).mul(s.Tensor.ones(e.shape,"float32")).div(o)}}})(e)},e.min=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape),o=r,a=c.getAxesPermutation(o,e.rank);null!=a&&(e=e.transpose(a),o=c.getInnerMostAxes(o.length,e.rank));var s=i.ENV.engine.runKernel(function(t){return t.min(e,o)},{x:e});if(n){var u=c.expandShapeToKeepDim(s.shape,r);return s.reshape(u)}return s},e.max=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape),o=r,a=c.getAxesPermutation(o,e.rank);null!=a&&(e=e.transpose(a),o=c.getInnerMostAxes(o.length,e.rank));var s=i.ENV.engine.runKernel(function(t){return t.max(e,o)},{x:e});if(n){var u=c.expandShapeToKeepDim(s.shape,r);return s.reshape(u)}return s},e.argMin=function(e,t){void 0===t&&(t=null);var n=c.parseAxisParam(t,e.shape),r=c.getAxesPermutation(n,e.rank);return null!=r&&(e=e.transpose(r),n=c.getInnerMostAxes(n.length,e.rank)),i.ENV.engine.runKernel(function(t){return t.argMin(e,n)},{x:e})},e.argMax=function(e,t){void 0===t&&(t=null);var n=c.parseAxisParam(t,e.shape),r=c.getAxesPermutation(n,e.rank);return null!=r&&(e=e.transpose(r),n=c.getInnerMostAxes(n.length,e.rank)),i.ENV.engine.runKernel(function(t){return t.argMax(e,n)},{x:e})},e.moments=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=c.parseAxisParam(t,e.shape),o=e.mean(r,n),i=o.shape;return n||(i=c.expandShapeToKeepDim(o.shape,r)),{mean:o,variance:e.toFloat().sub(o.reshape(i)).square().mean(r,n)}},r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"logSumExp",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"sum",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"mean",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"min",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"max",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"argMin",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],e,"argMax",null),r([o.doc({heading:"Operations",subheading:"Normalization"}),l.operation],e,"moments",null),e}();t.ReductionOps=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(11),u=n(7),c=function(){function e(){}return e.reverse1d=function(t){return a.assert(1===t.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+t.rank+"."),e.reverse(t,0)},e.reverse2d=function(t,n){return a.assert(2===t.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+t.rank+"."),e.reverse(t,n)},e.reverse3d=function(t,n){return a.assert(3===t.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+t.rank+"."),e.reverse(t,n)},e.reverse4d=function(t,n){return a.assert(4===t.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+t.rank+"."),e.reverse(t,n)},e.reverse=function(e,t){if(0===e.rank)return e.clone();var n=s.parseAxisParam(t,e.shape);return i.ENV.engine.runKernel(function(t){return t.reverse(e,n)},{x:e},function(e){return{x:function(){return e.reverse(n)}}}).reshapeAs(e)},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),u.operation],e,"reverse",null),e}();t.ReverseOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(7),u=n(96),c=function(){function e(){}return e.slice1d=function(t,n,r){return a.assert(1===t.rank,"slice1d expects a rank-1 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,[n],[r])},e.slice2d=function(t,n,r){return a.assert(2===t.rank,"slice1d expects a rank-2 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,n,r)},e.slice3d=function(t,n,r){return a.assert(3===t.rank,"slice1d expects a rank-3 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,n,r)},e.slice4d=function(t,n,r){return a.assert(4===t.rank,"slice1d expects a rank-4 tensor, but got a rank-"+t.rank+" tensor"),e.slice(t,n,r)},e.slice=function(e,t,n){if(u.assertParamsValid(e,t,n),0===e.rank)throw new Error("Slicing scalar is not possible");var r=e.shape;return i.ENV.engine.runKernel(function(r){return r.slice(e,t,n)},{x:e},function(e){for(var o=[],i=0;i<e.rank;i++)o.push([t[i],r[i]-t[i]-n[i]]);return{x:function(){return e.pad(o)}}})},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),s.operation],e,"slice",null),e}();t.SliceOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(2),a=n(0),s=n(11),u=n(7),c=n(6),l=function(){function e(){}return e.softmax=function(e,t){if(void 0===t&&(t=-1),-1===t&&(t=e.rank-1),t!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+t);return i.customGrad(function(e){var n=e.logSumExp([t],!0),r=e.toFloat().sub(n).exp();return{value:r,gradFunc:function(e){var n=e.mul(r);return n.sub(n.sum([t],!0).mul(r))}}})(e)},e.softmaxCrossEntropy=function(e,t,n){if(void 0===n&&(n=-1),a.assertShapesMatch(e.shape,t.shape,"Error in softmaxCrossEntropy: "),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return i.customGrad(function(e,t){var r=t.softmax(n);return{value:c.scalar(1e-5).add(r).log().mul(e).neg().sum([n]),gradFunc:function(t){var o=s.expandShapeToKeepDim(t.shape,[n]);return[t.reshape(o).mul(e.toFloat().sub(r)),t.reshape(o).mul(r.sub(e.toFloat()))]}}})(e,t)},r([o.doc({heading:"Operations",subheading:"Normalization"}),u.operation],e,"softmax",null),r([o.doc({heading:"Training",subheading:"Losses",namespace:"losses"}),u.operation],e,"softmaxCrossEntropy",null),e}();t.SoftmaxOps=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(11),u=n(7),c=function(){function e(){}return e.transpose=function(e,t){return null==t&&(t=e.shape.map(function(e,t){return t}).reverse()),a.assert(e.rank===t.length,"Error in transpose: rank of input "+e.rank+" must match length of perm "+t+"."),i.ENV.engine.runKernel(function(n){return n.transpose(e,t)},{x:e},function(e){var n=s.getUndoAxesPermutation(t);return{x:function(){return e.transpose(n)}}})},r([o.doc({heading:"Operations",subheading:"Matrices"}),u.operation],e,"transpose",null),e}();t.TransposeOps=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=n(7),u=n(6),c=n(6),l=n(32),p=function(){function e(){}return e.neg=function(e){return i.ENV.engine.runKernel(function(t){return t.neg(e)},{x:e},function(e){return{x:function(){return e.neg()}}})},e.ceil=function(e){return i.ENV.engine.runKernel(function(t){return t.ceil(e)},{x:e},function(e){return{x:function(){return u.zerosLike(e)}}})},e.floor=function(e){return i.ENV.engine.runKernel(function(t){return t.floor(e)},{x:e},function(e){return{x:function(){return u.zerosLike(e)}}})},e.exp=function(e){return i.ENV.engine.runKernel(function(t,n){return n(t.exp(e))},{x:e},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n)}}})},e.log=function(e){return i.ENV.engine.runKernel(function(t){return t.log(e)},{x:e},function(t){return{x:function(){return t.divStrict(e.toFloat())}}})},e.sqrt=function(e){return i.ENV.engine.runKernel(function(t){return t.sqrt(e)},{x:e},function(t){return{x:function(){return t.divStrict(e.toFloat().sqrt().mul(u.scalar(2)))}}})},e.square=function(e){return i.ENV.engine.runKernel(function(t){return t.square(e)},{x:e},function(t){return{x:function(){return t.mulStrict(e.toFloat().mul(u.scalar(2)))}}})},e.abs=function(e){return i.ENV.engine.runKernel(function(t){return t.abs(e)},{x:e},function(t){return{x:function(){return t.mulStrict(e.toFloat().step(-1))}}})},e.clipByValue=function(e,t,n){return a.assert(t<=n,"Error in clip: min ("+t+") must beless than or equal to max ("+n+")."),i.ENV.engine.runKernel(function(r){return r.clip(e,t,n)},{x:e},function(r){return{x:function(){return r.where(e.greater(u.scalar(t)).logicalAnd(e.less(u.scalar(n))),c.zerosLike(r))}}})},e.relu=function(e){return i.ENV.engine.runKernel(function(t){return t.relu(e)},{x:e},function(t){var n=e.step();return{x:function(){return t.mulStrict(n.toFloat())}}})},e.elu=function(e){return i.ENV.engine.runKernel(function(t){return t.elu(e)},{x:e},function(t){return{x:function(){return t.mulStrict(function(e){return i.ENV.engine.runKernel(function(t){return t.eluDer(e)},{x:e})}(e))}}})},e.selu=function(e){return i.ENV.engine.runKernel(function(t){return t.selu(e)},{x:e},function(t){return{x:function(){var n=e.greater(u.scalar(0)),r=u.scalar(l.SELU_SCALEALPHA),o=u.scalar(l.SELU_SCALE),i=t.mul(o),a=t.mul(r).mul(e.toFloat().exp());return u.where(n,i,a)}}})},e.leakyRelu=function(e,t){return void 0===t&&(t=.2),i.ENV.engine.runKernel(function(n){return n.leakyRelu(e,t)},{x:e},function(n){return{x:function(){return n.mulStrict(e.step(t))}}})},e.prelu=function(e,t){return i.ENV.engine.runKernel(function(n){return n.prelu(e,t)},{x:e},function(n){return{x:function(){return n.mulStrict(function(e,t){return i.ENV.engine.runKernel(function(n){return n.preluDer(e,t)},{x:e,alpha:t})}(e,t))}}})},e.sigmoid=function(e){return i.ENV.engine.runKernel(function(t,n){return n(t.sigmoid(e))},{x:e},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.mul(u.scalar(1).sub(n)))}}})},e.sin=function(e){return i.ENV.engine.runKernel(function(t){return t.sin(e)},{x:e},function(t){return{x:function(){return e.toFloat().cos().mulStrict(t)}}})},e.cos=function(e){return i.ENV.engine.runKernel(function(t){return t.cos(e)},{x:e},function(t){return{x:function(){return e.toFloat().sin().neg().mulStrict(t)}}})},e.tan=function(e){return i.ENV.engine.runKernel(function(t){return t.tan(e)},{x:e},function(t){return{x:function(){return t.divStrict(e.cos().square())}}})},e.asin=function(t){return i.ENV.engine.runKernel(function(e){return e.asin(t)},{x:t},function(n){return{x:function(){return n.divStrict(e.sqrt(u.scalar(1).sub(t.toFloat().square())))}}})},e.acos=function(t){return i.ENV.engine.runKernel(function(e){return e.acos(t)},{x:t},function(n){return{x:function(){return n.divStrict(e.sqrt(u.scalar(1).sub(t.toFloat().square()))).neg()}}})},e.atan=function(e){return i.ENV.engine.runKernel(function(t){return t.atan(e)},{x:e},function(t){return{x:function(){return t.divStrict(u.scalar(1).add(e.toFloat().square()))}}})},e.sinh=function(e){return i.ENV.engine.runKernel(function(t){return t.sinh(e)},{x:e},function(t){return{x:function(){return e.toFloat().cosh().mulStrict(t)}}})},e.cosh=function(e){return i.ENV.engine.runKernel(function(t){return t.cosh(e)},{x:e},function(t){return{x:function(){return e.toFloat().sinh().mulStrict(t)}}})},e.tanh=function(e){return i.ENV.engine.runKernel(function(t,n){return n(t.tanh(e))},{x:e},function(e,t){var n=t[0];return{x:function(){return u.scalar(1).sub(n.square()).mulStrict(e)}}})},e.step=function(e,t){return void 0===t&&(t=0),i.ENV.engine.runKernel(function(n){return n.step(e,t)},{x:e},function(e){return{x:function(){return u.zerosLike(e)}}})},r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"neg",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"ceil",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"floor",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"exp",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"log",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sqrt",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"square",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"abs",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"clipByValue",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"relu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"elu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"selu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"leakyRelu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"prelu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sigmoid",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sin",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"cos",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"tan",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"asin",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"acos",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"atan",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"sinh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"cosh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"tanh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],e,"step",null),e}();t.UnaryOps=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(0),s=function(){function e(){}return e.tidy=function(e,t,n){void 0===n&&(n=!1);var r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to dl.tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to dl.tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to dl.tidy() must be a function");r=e}i.ENV.engine.startScope(r,n);var o=t();return o instanceof Promise&&console.warn("Returning a promise inside of tidy is dangerous. This will be a run-time error in 0.6.0"),i.ENV.engine.endScope(o,n),o},e.dispose=function(e){a.extractTensorsFromAny(e).forEach(function(e){return e.dispose()})},e.keep=function(e){return i.ENV.engine.keep(e)},e.time=function(e){return i.ENV.engine.time(e)},r([o.doc({heading:"Performance",subheading:"Memory"})],e,"tidy",null),r([o.doc({heading:"Performance",subheading:"Memory"})],e,"keep",null),r([o.doc({heading:"Performance",subheading:"Timing"})],e,"time",null),e}();t.Tracking=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){if(this.capacity=e,this.begin=0,this.end=0,e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}return e.prototype.wrap=function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity},e.prototype.get=function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]},e.prototype.set=function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t},e.prototype.length=function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e},e.prototype.isFull=function(){return this.length()===this.capacity},e.prototype.isEmpty=function(){return 0===this.length()},e.prototype.push=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)},e.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e},e.prototype.unshift=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)},e.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e},e.prototype.shuffleExcise=function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n},e}();t.RingBuffer=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){void 0===n&&(n="line");var r=e.call(this)||this;return r.input=t,r.columnName=n,r}return r(t,e),t.prototype.getStream=function(){var e=this;return this.input.getStream().decodeUTF8().split("\n").map(function(t){return(n={})[e.columnName]=t,n;var n})},t}(n(25).Dataset);t.TextLineDataset=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.DataSource=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.file=t,r.options=n,r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){var e,t,n=this;return i(this,function(r){switch(r.label){case 0:return this.offset>=this.file.size?[2,{value:null,done:!0}]:(e=new Promise(function(e,t){var r=new FileReader;r.onload=function(n){var o=r.result;if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),!(o instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(o)},r.onabort=function(e){return t(new Error("Aborted"))},r.onerror=function(e){return t(new Error(e.error))};var o=n.offset+n.chunkSize,i=n.file.slice(n.offset,o);r.readAsArrayBuffer(i),n.offset=o}),t={},[4,e]);case 1:return[2,(t.value=r.sent(),t.done=!1,t)]}})})},t}(n(64).ByteStream);t.FileReaderStream=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(104),s=n(19),u=n(105),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.decodeUTF8=function(){return new l(this)},t}(s.DataStream);t.ByteStream=c;var l=function(e){function t(t){var n=e.call(this)||this;return n.impl=new p(t),n}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.impl.next()]})})},t}(u.StringStream),p=function(e){function t(t){var n=e.call(this)||this;return n.upstream=t,n.partial=new Uint8Array([]),n.partialBytesValid=0,n}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,s,u,c;return i(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((e=i.sent()).done){if(0===this.partial.length)return[2,!1];t=new Uint8Array([])}else t=e.value;for(n=this.partial.length-this.partialBytesValid,o=r=n,s=0;r<t.length;)o=r,s=h(t[r]),r=o+s;return r===t.length&&(o=r),u=a.decode(String.fromCharCode.apply(null,t.slice(n,o))),n>0?(this.partial.set(t.slice(0,n),this.partialBytesValid),c=a.decode(String.fromCharCode.apply(null,this.partial)),this.outputQueue.push(c+u)):this.outputQueue.push(u),o===t.length?(this.partial=new Uint8Array([]),this.partialBytesValid=0):(this.partial=new Uint8Array(new ArrayBuffer(s)),this.partial.set(t.slice(o),0),this.partialBytesValid=t.length-o),[2,!0]}})})},t}(s.QueueStream);function h(e){return e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(0),a=n(66);t.getXhrDatasetConfig=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){t(JSON.parse(r.responseText))},r.onerror=function(e){n(e)},r.send()})};var s=function(e){function t(t){var n=e.call(this,t.data.map(function(e){return e.shape}))||this;return n.xhrDatasetConfig=t,n}return r(t,e),t.prototype.getTensor=function(e){var t="png"===e.dataType?function(e,t){return new Promise(function(n,r){var o=new Image;o.setAttribute("crossOrigin",""),o.onload=function(){var e=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.height,a=i.sizeFromShape(t),s=new Uint8Array(o*a);if(e.width!==t[0]*t[1])throw new Error("Image width ("+e.width+") must be multiple of rows*columns ("+t[0]+"*"+t[1]+") of the tensor");n.width=e.width,n.height=1e3;for(var l=n.width,p=n.height,h=l,d=p,f=t[2],m=0,g=Math.ceil(o/n.height),v=0;v<g;++v){var y=v*n.height;v===g-1&&o%n.height>0&&(n.height=o%n.height,d=p=n.height),r.drawImage(e,0,y,l,p,0,0,h,d);var b=r.getImageData(0,0,n.width,n.height).data;1===f?u(b,s,m):c(b,s,m),m+=n.height*a}return s}(o,t);o.src="",o=null,n(e)},o.src=e.path})}(e,e.shape):function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e.path),r.responseType="arraybuffer",r.onload=function(n){var o="float32"===e.dataType?new Float32Array(r.response):new Uint8Array(r.response);t(o)},r.onerror=function(e){return n(e)},r.send()})}(e),n=i.sizeFromShape(e.shape);return t.then(function(t){for(var r=[],i=0;i<t.length/n;i++){var a=t.subarray(i*n,(i+1)*n),s=o.Tensor.make(e.shape,{values:new Float32Array(a)},"float32");r.push(s)}return r})},t.prototype.fetchData=function(){var e=this;return new Promise(function(t,n){var r=e.xhrDatasetConfig.data.map(function(t){return e.getTensor(t)});Promise.all(r).then(function(n){e.dataset=n,t()})})},t}(a.InMemoryDataset);function u(e,t,n){for(var r=n,o=0;o<e.length;o+=4)t[r++]=e[o]}function c(e,t,n){for(var r=n,o=0;o<e.length;o+=4)t[r]=e[o],t[r+1]=e[o+1],t[r+2]=e[o+2],r+=3}t.XhrDataset=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(0),i=function(){function e(e){this.dataShapes=e,this.normalizationInfo={}}return e.prototype.getDataShape=function(e){return this.dataShapes[e]},e.prototype.getData=function(){return this.dataset},e.prototype.getStats=function(){var e=this;if(null==this.dataset)throw new Error("Data is null.");return this.dataset.map(function(t){return e.getStatsForData(t)})},e.prototype.getStatsForData=function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=e.map(function(e,t){return t});o.shuffle(r),r=r.slice(.1*r.length);for(var i=0;i<r.length;i++)for(var a=e[r[i]].dataSync(),s=0;s<a.length;s++)t=Math.min(t,a[s]),n=Math.max(n,a[s]);return{inputMin:t,inputMax:n,exampleCount:e.length,shape:e[0].shape}},e.prototype.normalizeExamplesToRange=function(e,t,n,i,a){var s=n instanceof Float32Array&&t instanceof Float32Array,u=i instanceof Float32Array&&a instanceof Float32Array,c=o.sizeFromShape(e[0].shape),l=[];return e.forEach(function(e){for(var o=e.dataSync(),p=new Float32Array(c),h=0;h<c;h++){var d=s?t[h]:t,f=(s?n[h]:n)-d,m=u?i[h]:i,g=(u?a[h]:a)-m;p[h]=0===f?m:m+g*(o[h]-d)/f}l.push(r.Tensor.make(e.shape,{values:p},"float32"))}),l},e.prototype.computeBounds=function(e){var t=this;if(null==this.dataset)throw new Error("Data is null.");var n=o.sizeFromShape(this.dataset[e][0].shape);this.normalizationInfo[e]={isNormalized:!1,minValues:new Float32Array(n),maxValues:new Float32Array(n)};for(var r=0;r<n;r++)this.normalizationInfo[e].minValues[r]=Number.POSITIVE_INFINITY,this.normalizationInfo[e].maxValues[r]=Number.NEGATIVE_INFINITY;this.dataset[e].forEach(function(r){for(var o=r.dataSync(),i=0;i<n;i++)t.normalizationInfo[e].minValues[i]=Math.min(t.normalizationInfo[e].minValues[i],o[i]),t.normalizationInfo[e].maxValues[i]=Math.max(t.normalizationInfo[e].maxValues[i],o[i])})},e.prototype.normalizeWithinBounds=function(e,t,n){if(null==this.dataset)throw new Error("Data is null.");if(e>=this.dataset.length)throw new Error("dataIndex out of bounds.");var r,o;null==this.normalizationInfo[e]&&this.computeBounds(e),this.normalizationInfo[e].isNormalized?(r=this.normalizationInfo[e].lowerBound,o=this.normalizationInfo[e].upperBound):(r=this.normalizationInfo[e].minValues,o=this.normalizationInfo[e].maxValues),this.dataset[e]=this.normalizeExamplesToRange(this.dataset[e],r,o,t,n),this.normalizationInfo[e].isNormalized=!0,this.normalizationInfo[e].lowerBound=t,this.normalizationInfo[e].upperBound=n},e.prototype.isNormalized=function(e){return null!=this.normalizationInfo&&this.normalizationInfo[e].isNormalized},e.prototype.removeNormalization=function(e){if(null==this.dataset)throw new Error("Training or test data is null.");this.isNormalized(e)&&(this.dataset[e]=this.normalizeExamplesToRange(this.dataset[e],this.normalizationInfo[e].lowerBound,this.normalizationInfo[e].upperBound,this.normalizationInfo[e].minValues,this.normalizationInfo[e].maxValues),this.normalizationInfo[e].isNormalized=!1)},e.prototype.unnormalizeExamples=function(e,t){return this.isNormalized(t)?this.normalizeExamplesToRange(e,this.normalizationInfo[t].lowerBound,this.normalizationInfo[t].upperBound,this.normalizationInfo[t].minValues,this.normalizationInfo[t].maxValues):e},e.prototype.dispose=function(){if(null!=this.dataset){for(var e=0;e<this.dataset.length;e++)for(var t=0;t<this.dataset[e].length;t++)this.dataset[e][t].dispose();this.dataset=[]}},e}();t.InMemoryDataset=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(22),s=n(28);function u(e,t){return i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===i.ENV.get("WEBGL_VERSION")?4===t?e.RGBA:e.RED:e.RGBA}function c(e){return i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?e.FLOAT:e.UNSIGNED_BYTE}function l(e,t,n,r){s.validateTextureSize(e,t,n);var o=s.createTexture(e),a=e.TEXTURE_2D,l=function(e,t){return i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===i.ENV.get("WEBGL_VERSION")?4===t?e.RGBA32F:e.R32F:e.RGBA}(e,r),p=u(e,r);return s.callAndCheck(e,function(){return e.bindTexture(a,o)}),s.callAndCheck(e,function(){return e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),s.callAndCheck(e,function(){return e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),s.callAndCheck(e,function(){return e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)}),s.callAndCheck(e,function(){return e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)}),s.callAndCheck(e,function(){return e.texImage2D(a,0,l,t,n,0,p,c(e),null)}),s.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)}),o}function p(e,t,n,r,o,i){var a=u(e,i);s.validateTextureSize(e,n,r),s.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),s.callAndCheck(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,a,c(e),o)}),s.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function h(e,t,n){return i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?new Float32Array(a.getUnpackedArraySizeFromMatrixSize(e*t,n)):new Uint8Array(e*t*n)}function d(e,t,n,r){if(i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var o=new Float32Array(t*n);return a.decodeMatrixFromUnpackedArray(e,o,r),o}return a.decodeToFloatArray(e)}t.getWebGLContextAttributes=function(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}},t.createWebGLContext=function(e){var t,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return t=null!=e?s.createWebGLRenderingContextFromCanvas(e,n):s.createWebGLRenderingContext(n),s.callAndCheck(t,function(){return t.disable(t.DEPTH_TEST)}),s.callAndCheck(t,function(){return t.disable(t.STENCIL_TEST)}),s.callAndCheck(t,function(){return t.disable(t.BLEND)}),s.callAndCheck(t,function(){return t.disable(t.DITHER)}),s.callAndCheck(t,function(){return t.disable(t.POLYGON_OFFSET_FILL)}),s.callAndCheck(t,function(){return t.disable(t.SAMPLE_COVERAGE)}),s.callAndCheck(t,function(){return t.enable(t.SCISSOR_TEST)}),s.callAndCheck(t,function(){return t.enable(t.CULL_FACE)}),s.callAndCheck(t,function(){return t.cullFace(t.BACK)}),t},t.createVertexShader=function(e){return s.createVertexShader(e,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")},t.createVertexBuffer=function(e){var t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return s.createStaticVertexBuffer(e,t)},t.createIndexBuffer=function(e){var t=new Uint16Array([0,1,2,2,1,3]);return s.createStaticIndexBuffer(e,t)},t.createMatrixTexture=function(e,t,n){var r=a.getUnpackedMatrixTextureShapeWidthHeight(t,n);return l(e,r[0],r[1],1)},t.createColorMatrixTexture=function(e,t,n){var r=a.getColorMatrixTextureShapeWidthHeight(t,n);return l(e,r[0],r[1],4)},t.createPackedMatrixTexture=function(e,t,n){var r=a.getPackedMatrixTextureShapeWidthHeight(t,n);return l(e,r[0],r[1],4)},t.bindVertexProgramAttributeStreams=function(e,t,n){s.callAndCheck(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),s.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",n,3,20,0),s.bindVertexBufferToProgramAttribute(e,t,"uv",n,2,20,12)},t.uploadPixelDataToTexture=function(e,t,n){s.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),s.callAndCheck(e,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),s.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})},t.uploadMatrixToTexture=function(e,t,n,r,o,u){var c,l=a.getUnpackedMatrixTextureShapeWidthHeight(n,r),h=l[0],d=l[1];if(i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var f=1===u?s.getChannelsPerTexture():u;1===f?c=o:(c=new Float32Array(a.getUnpackedArraySizeFromMatrixSize(o.length,f)),a.encodeMatrixToUnpackedArray(o,c,f))}else c=a.encodeFloatArray(o);p(e,t,h,d,c,u)},t.uploadMatrixToPackedTexture=function(e,t,n,r,o){var i=a.getPackedMatrixTextureShapeWidthHeight(n,r),s=i[0],u=i[1],c=new Float32Array(a.getPackedRGBAArraySizeFromMatrixShape(n,r));a.encodeMatrixToPackedRGBA(o,n,r,c),p(e,t,s,u,c,4)},t.downloadMatrixFromOutputTextureAsync=function(e,t,n,i){return r(this,void 0,void 0,function(){var r,a,u,l,p;return o(this,function(o){switch(o.label){case 0:return r=e,u=h(n,i,a=4),l=u instanceof Float32Array?4*u.length:u,p=e.createBuffer(),s.callAndCheck(e,function(){return e.bindBuffer(r.PIXEL_PACK_BUFFER,p)}),s.callAndCheck(e,function(){return e.bufferData(r.PIXEL_PACK_BUFFER,l,e.STATIC_DRAW)}),s.callAndCheck(e,function(){return r.readPixels(0,0,i,n,e.RGBA,c(e),0)}),[4,t.getBufferSubDataAsync(r.PIXEL_PACK_BUFFER,0,u)];case 1:return o.sent(),[2,d(u,n,i,a)]}})})},t.downloadMatrixFromOutputTexture=function(e,t,n){var r=a.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=r[0],i=r[1],u=h(t,n,4);return s.callAndCheck(e,function(){return e.readPixels(0,0,o,i,e.RGBA,c(e),u)}),d(u,t,n,4)},t.downloadMatrixFromRGBAColorTexture=function(e,t,n,r){var o=t*n*4,i=new Uint8Array(o);s.callAndCheck(e,function(){return e.readPixels(0,0,n,t,e.RGBA,e.UNSIGNED_BYTE,i)});for(var u=new Float32Array(o),c=0;c<i.length;c++)u[c]=i[c];var l=new Float32Array(t*n*r);return a.decodeMatrixFromUnpackedColorRGBAArray(u,l,r),l},t.downloadMatrixFromPackedOutputTexture=function(e,t,n){var r=a.getPackedMatrixTextureShapeWidthHeight(t,n),o=r[0],i=r[1],u=new Float32Array(a.getPackedRGBAArraySizeFromMatrixShape(t,n));s.callAndCheck(e,function(){return e.readPixels(0,0,o,i,e.RGBA,c(e),u)});var l=new Float32Array(t*n);return a.decodeMatrixFromPackedRGBA(u,t,n,l)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=n(1),u=n(27),c=n(11),l=n(16),p=n(20),h=n(6),d=n(6),f=n(32),m=n(3),g=n(21),v=n(0),y=function(){function e(){this.data=new WeakMap,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas"))}return e.prototype.register=function(e,t,n){if(this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,null)},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(e),this.data.set(e,t)},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("MathBackendCPU.writePixels(): pixels can not be null");var n,r;if(e instanceof ImageData)n=e.data;else if(e instanceof HTMLCanvasElement)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels is of unknown type: "+e.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),n=this.canvas.getContext("2d").getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n);else{var o=e.width*e.height;r=new Int32Array(o*t);for(var i=0;i<o;i++)for(var a=0;a<t;++a)r[i*t+a]=n[4*i+a]}var s=[e.height,e.width,t];return d.tensor3d(r,s,"int32")},e.prototype.read=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,this.readSync(e)]})})},e.prototype.readSync=function(e){return this.throwIfNoData(e),this.data.get(e)},e.prototype.disposeData=function(e){this.data.has(e)&&this.data.delete(e)},e.prototype.time=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return t=performance.now(),e(),[2,{kernelMs:performance.now()-t}]})})},e.prototype.memory=function(){return{unreliable:!0}},e.prototype.throwIfNoData=function(e){if(!this.data.has(e))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.slice=function(e,t,n){for(var r=h.buffer(n,e.dtype),o=0;o<r.size;++o){var i=r.indexToLoc(o),a=i.map(function(e,n){return e+t[n]});r.set.apply(r,[e.get.apply(e,a)].concat(i))}return r.toTensor()},e.prototype.reverse=function(e,t){for(var n=h.buffer(e.shape,e.dtype),r=e.buffer(),o=function(o){var i=n.indexToLoc(o),a=i.slice();t.forEach(function(t){return a[t]=e.shape[t]-1-a[t]}),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},e.prototype.concat=function(e,t){var n=p.computeOutShape(e.shape,t.shape,1),r=h.buffer(n,e.dtype);if(1===e.shape[0]&&1===t.shape[0]){var o=e.dataSync(),i=t.dataSync(),a=r.values;return a.set(o,0),a.set(i,e.size),r.toTensor()}for(var s=0;s<n[0];++s){for(var u=0;u<e.shape[1];++u)r.set(e.get(s,u),s,u);for(u=0;u<t.shape[1];++u)r.set(t.get(s,u),s,u+e.shape[1])}return r.toTensor()},e.prototype.neg=function(e){return this.multiply(h.scalar(-1),e)},e.prototype.add=function(e,t){return this.broadcastedBinaryOp(e,t,g.upcastType(e.dtype,t.dtype),function(e,t){return e+t})},e.prototype.subtract=function(e,t){return this.broadcastedBinaryOp(e,t,g.upcastType(e.dtype,t.dtype),function(e,t){return e-t})},e.prototype.pow=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},e.prototype.matMul=function(e,t,n,r){for(var o=n?e.shape[0]:e.shape[1],i=n?e.shape[1]:e.shape[0],a=r?t.shape[0]:t.shape[1],s=function(e,t,n){return e.get(t,n)},u=function(e,t,n){return e.get(n,t)},c=n?u:s,l=r?u:s,p=new Float32Array(i*a),d=0,f=0;f<i;++f)for(var m=0;m<a;++m){for(var g=0,v=0;v<o;++v)g+=c(e,f,v)*l(t,v,m);p[d++]=g}return h.tensor2d(p,[i,a])},e.prototype.multiply=function(e,t){return this.broadcastedBinaryOp(e,t,g.upcastType(e.dtype,t.dtype),function(e,t){return e*t})},e.prototype.divide=function(e,t){return this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},e.prototype.sum=function(e,t){c.assertAxesAreInnerMostDims("sum",t,e.rank);for(var n=c.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=g.upcastType(e.dtype,"int32"),a=h.zeros(r,i),s=v.sizeFromShape(o),u=a.dataSync(),l=e.dataSync(),p=0;p<u.length;++p){for(var d=p*s,f=0,m=0;m<s;++m)f+=l[d+m];u[p]=f}return a},e.prototype.argMin=function(e,t){c.assertAxesAreInnerMostDims("argMin",t,e.rank);for(var n=c.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.zeros(r,"int32"),a=v.sizeFromShape(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var p=l*a,d=u[p],f=0,m=0;m<a;++m){var g=u[p+m];if(isNaN(g)){f=v.NAN_INT32;break}g<d&&(d=g,f=m)}s[l]=f}return i},e.prototype.argMax=function(e,t){c.assertAxesAreInnerMostDims("argMax",t,e.rank);for(var n=c.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.zeros(r,"int32"),a=v.sizeFromShape(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var p=l*a,d=u[p],f=0,m=0;m<a;++m){var g=u[p+m];if(isNaN(g)){f=v.NAN_INT32;break}g>d&&(d=g,f=m)}s[l]=f}return i},e.prototype.equal=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n===r?1:0})},e.prototype.notEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n!==r?1:0})},e.prototype.less=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n<r?1:0})},e.prototype.lessEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n<=r?1:0})},e.prototype.greater=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n>r?1:0})},e.prototype.greaterEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n>=r?1:0})},e.prototype.logicalNot=function(e){for(var t=e.dataSync(),n=new Int32Array(t.length),r=0;r<t.length;++r)v.isValNaN(t[r],e.dtype)?n[r]=v.getNaN("bool"):n[r]=t[r]?0:1;return m.Tensor.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n&&r})},e.prototype.logicalOr=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n||r})},e.prototype.logicalXor=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(n,r){return v.isValNaN(n,e.dtype)||v.isValNaN(r,t.dtype)?v.getNaN("bool"):n^r})},e.prototype.where=function(e,t,n,r){for(var o=e.dataSync(),i=t.dataSync(),a=n.dataSync(),s=h.zeros(t.shape,r),u=s.dataSync(),c=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],p=0;p<o.length;p++)for(var d=0;d<l;d++)1===o[p]?u[c++]=i[p]:u[c++]=a[p];return s},e.prototype.topKValues=function(e,t){return this.topK(e,t).values},e.prototype.topKIndices=function(e,t){return this.topK(e,t).indices},e.prototype.topK=function(e,t){for(var n=e.dataSync(),r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});r.sort(function(e,t){return t.value-e.value});var i=v.getTypedArrayFromDType(e.dtype,t),a=new Int32Array(t);for(o=0;o<t;o++)i[o]=r[o].value,a[o]=r[o].index;return{values:h.tensor1d(i,e.dtype),indices:m.Tensor1D.new(a)}},e.prototype.min=function(e,t){c.assertAxesAreInnerMostDims("min",t,e.rank);for(var n=c.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.zeros(r,e.dtype),a=v.sizeFromShape(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var p=l*a,d=u[0],f=0;f<a;++f){var m=u[p+f];if(isNaN(m)){d=Number.NaN;break}m<d&&(d=m)}s[l]=d}return i},e.prototype.minimum=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},e.prototype.max=function(e,t){c.assertAxesAreInnerMostDims("max",t,e.rank);for(var n=c.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.zeros(r,e.dtype),a=v.sizeFromShape(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var p=l*a,d=u[p],f=0;f<a;++f){var m=u[p+f];if(isNaN(m)){d=Number.NaN;break}m>d&&(d=m)}s[l]=d}return i},e.prototype.maximum=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},e.prototype.ceil=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return m.Tensor.make(e.shape,{values:n})},e.prototype.floor=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return m.Tensor.make(e.shape,{values:n})},e.prototype.exp=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return m.Tensor.make(e.shape,{values:n})},e.prototype.log=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return m.Tensor.make(e.shape,{values:n})},e.prototype.sqrt=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return m.Tensor.make(e.shape,{values:n})},e.prototype.square=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=o*o}return m.Tensor.make(e.shape,{values:n})},e.prototype.relu=function(e){for(var t=h.zeros(e.shape,e.dtype),n=t.dataSync(),r=e.dataSync(),o=0;o<r.length;++o){var i=r[o];v.isValNaN(i,e.dtype)?n[o]=v.getNaN(t.dtype):n[o]=Math.max(0,r[o])}return t},e.prototype.elu=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return m.Tensor.make(e.shape,{values:t})},e.prototype.eluDer=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?1:Math.exp(o)}return m.Tensor.make(e.shape,{values:t})},e.prototype.selu=function(e){for(var t=f.SELU_SCALEALPHA,n=f.SELU_SCALE,r=new Float32Array(e.size),o=e.dataSync(),i=0;i<o.length;++i){var a=o[i];r[i]=a>=0?n*a:t*(Math.exp(a)-1)}return m.Tensor.make(e.shape,{values:r})},e.prototype.leakyRelu=function(e,t){for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;o++){var i=r[o];n[o]=i>=0?i:t*i}return m.Tensor.make(e.shape,{values:n})},e.prototype.prelu=function(e,t){for(var n=new Float32Array(e.size),r=e.dataSync(),o=t.dataSync(),i=0;i<r.length;i++){var a=r[i];n[i]=a>=0?a:o[i]*a}return m.Tensor.make(e.shape,{values:n})},e.prototype.preluDer=function(e,t){for(var n=new Float32Array(e.size),r=e.dataSync(),o=t.dataSync(),i=0;i<r.length;i++){var a=r[i];n[i]=a>0?1:a<0?o[i]:a}return m.Tensor.make(e.shape,{values:n})},e.prototype.clip=function(e,t,n){for(var r=new Float32Array(e.size),o=e.dataSync(),i=0;i<o.length;++i)r[i]=Math.min(n,Math.max(t,o[i]));return m.Tensor.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.int=function(e){for(var t=new Int32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=n[r];return m.Tensor.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return m.Tensor.make(e.shape,{values:t})},e.prototype.sin=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.cos=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.tan=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.asin=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.acos=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.atan=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.sinh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.cosh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.tanh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=v.tanh(n[r]);return m.Tensor.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0);for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o){var i=r[o];v.isValNaN(i,e.dtype)?n[o]=v.getNaN(e.dtype):n[o]=i>0?1:t}return m.Tensor.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.padInfo.left,a=n.padInfo.top,s=h.buffer(n.outShape,e.dtype),u=0;u<n.batchSize;++u)for(var c=0;c<n.outChannels;++c)for(var l=0;l<n.outHeight;++l)for(var p=l*n.strideHeight-i,d=Math.max(0,p),f=Math.min(n.inHeight,r+p),m=0;m<n.outWidth;++m){for(var g=m*n.strideWidth-a,v=Math.max(0,g),y=Math.min(n.inWidth,o+g),b=0,x=d;x<f;++x)for(var w=x-p,E=v;E<y;++E)for(var T=E-g,_=0;_<n.inChannels;++_)b+=e.get(u,x,E,_)*t.get(w,T,_,c);s.set(b,u,l,m,c)}return s.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){for(var r=n.filterHeight,o=n.filterWidth,i=r-1-n.padInfo.top,a=o-1-n.padInfo.left,s=n.strideHeight,u=n.strideWidth,c=h.buffer(n.inShape,"float32"),l=0;l<n.batchSize;++l)for(var p=0;p<n.inChannels;++p)for(var d=0;d<n.inHeight;++d)for(var f=d-a,m=Math.max(0,Math.ceil(f/s)),g=Math.min(n.outHeight,(r+f)/s),v=0;v<n.inWidth;++v){for(var y=v-i,b=Math.max(0,Math.ceil(y/u)),x=Math.min(n.outWidth,(o+y)/u),w=0,E=m;E<g;++E)for(var T=E*s-f,_=b;_<x;++_)for(var S=_*u-y,k=0;k<n.outChannels;++k)w+=e.get(l,E,_,k)*t.get(r-1-T,o-1-S,p,k);c.set(w,l,d,v,p)}return c.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=h.buffer(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=0;l<i;++l)for(var p=Math.max(0,Math.ceil((c-l)/r)),d=Math.min(n.outHeight,(n.inHeight+c-l)/r),f=0;f<a;++f)for(var m=Math.max(0,Math.ceil((u-f)/o)),g=Math.min(n.outWidth,(n.inWidth+u-f)/o),v=0;v<n.inChannels;++v)for(var y=0;y<n.outChannels;++y){for(var b=0,x=0;x<n.batchSize;++x)for(var w=p;w<d;++w)for(var E=l+w*r-c,T=m;T<g;++T){var _=f+T*o-u;b+=e.get(x,E,_,v)*t.get(x,w,T,y)}s.set(b,l,f,v,y)}return s.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.padInfo.left,a=n.padInfo.top,s=n.outChannels/n.inChannels,u=h.buffer(n.outShape,e.dtype),c=0;c<n.batchSize;++c)for(var l=0;l<n.inChannels;++l)for(var p=0;p<n.outHeight;++p)for(var d=p*n.strideHeight-i,f=Math.max(0,d),m=Math.min(n.inHeight,r+d),g=0;g<n.outWidth;++g)for(var v=g*n.strideWidth-a,y=Math.max(0,v),b=Math.min(n.inWidth,o+v),x=0;x<s;++x){for(var w=0,E=f;E<m;++E)for(var T=E-d,_=y;_<b;++_){var S=_-v;w+=e.get(c,E,_,l)*t.get(T,S,l,x)}u.set(w,c,p,g,l*s+x)}return u.toTensor()},e.prototype.tile=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=h.buffer(n,e.dtype),i=e.dataSync();for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=a[u]%e.shape[u];var c=e.locToIndex(s);o.values[r]=i[c]}return o.toTensor()},e.prototype.pad=function(e,t,n){var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),o=t.map(function(e){return e[0]}),i=e.buffer(),a=h.buffer(r,e.dtype);0!==n&&a.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),c=u.map(function(e,t){return e+o[t]});a.set.apply(a,[e.get.apply(e,u)].concat(c))}return a.toTensor()},e.prototype.transpose=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=new Float32Array(e.size),i=e.dataSync(),a=m.Tensor.make(n,{values:o});for(r=0;r<e.size;++r){for(var s=e.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[t[c]];o[a.locToIndex(u)]=i[r]}return a},e.prototype.gather=function(e,t,n){var r=e.shape.slice(),o=t.dataSync();r[n]=o.length;for(var i=h.zeros(r,e.dtype),a=e.dataSync(),s=i.dataSync(),u=0;u<i.size;++u){var c=i.indexToLoc(u),l=c.slice();l[n]=o[c[n]];var p=e.locToIndex(l);s[u]=a[p]}return i},e.prototype.pool=function(e,t,n){for(var r=t.strideHeight,o=t.strideWidth,i=t.filterHeight,a=t.filterWidth,s=h.buffer(t.outShape,"float32"),u=t.padInfo.top,c=t.padInfo.left,l=0;l<t.batchSize;++l)for(var p=0;p<t.inChannels;++p)for(var d=0;d<t.outHeight;++d)for(var f=d*r-u,m=Math.max(0,f),g=Math.min(t.inHeight,i+f),v=0;v<t.outWidth;++v){for(var y=v*o-c,b=Math.max(0,y),x=Math.min(t.inWidth,a+y),w="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=0,T=m;T<g;++T){for(var _=b;_<x;++_){var S=e.get(l,T,_,p);if(isNaN(S)){w=NaN,E=NaN;break}"max"===n&&S>w||"min"===n&&S<w?w=S:"avg"===n&&(E+=S/(i*a))}if(isNaN(w))break}s.set("avg"===n?E:w,l,d,v,p)}return s.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=h.buffer(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,i=t.filterHeight,a=t.filterWidth,s=t.padInfo.top,u=t.padInfo.left,c=0;c<t.batchSize;++c)for(var l=0;l<t.inChannels;++l)for(var p=0;p<t.outHeight;++p)for(var d=p*r-s,f=Math.max(0,d),m=Math.min(t.inHeight,i+d),g=0;g<t.outWidth;++g){for(var v=g*o-u,y=Math.max(0,v),b=Math.min(t.inWidth,a+v),x=Number.NEGATIVE_INFINITY,w=-1,E=f;E<m;++E)for(var T=E-d,_=y;_<b;++_){var S=_-v,k=e.get(c,E,_,l);k>x&&(x=k,w=T*a+S)}n.set(w,c,p,g,l)}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n){for(var r=this.maxPoolPositions(t,n),o=n.strideHeight,i=n.strideWidth,a=n.filterHeight,s=n.filterWidth,u=s-1-n.padInfo.left,c=a-1-n.padInfo.top,l=h.buffer(t.shape,"float32"),p=0;p<n.batchSize;++p)for(var d=0;d<n.inChannels;++d)for(var f=0;f<n.inHeight;++f)for(var m=0;m<n.inWidth;++m){for(var g=f-c,v=m-u,y=0,b=0;b<a;++b){var x=(g+b)/o;if(!(x<0||x>=n.outHeight||Math.floor(x)!==x))for(var w=0;w<s;++w){var E=(v+w)/i;if(!(E<0||E>=n.outWidth||Math.floor(E)!==E)){var T=a*s-1-r.get(p,x,E,d)===b*s+w?1:0;0!==T&&(y+=e.get(p,x,E,d)*T)}}}l.set(y,p,f,m,d)}return l.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=a-1-n.padInfo.left,u=i-1-n.padInfo.top,c=h.buffer(t.shape,"float32"),l=1/(i*a),p=0;p<n.batchSize;++p)for(var d=0;d<n.inChannels;++d)for(var f=0;f<n.inHeight;++f)for(var m=0;m<n.inWidth;++m){for(var g=f-u,v=m-s,y=0,b=0;b<i;++b){var x=(g+b)/r;if(!(x<0||x>=n.outHeight||Math.floor(x)!==x))for(var w=0;w<a;++w){var E=(v+w)/o;E<0||E>=n.outWidth||Math.floor(E)!==E||(y+=e.get(p,x,E,d))}}c.set(y*l,p,f,m,d)}return c.toTensor()},e.prototype.minPool=function(e,t){return this.pool(e,t,"min")},e.prototype.avgPool=function(e,t){return this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){for(var o=e.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=h.buffer([i,t,n,u],e.dtype),l=r?[a-1,s-1]:[a,s],p=r?[t-1,n-1]:[t,n],d=0;d<i;d++)for(var f=0;f<t;f++)for(var m=0;m<n;m++)for(var g=0;g<u;g++){var v=l[0]*f/p[0],y=l[1]*m/p[1],b=Math.floor(v),x=Math.min(a-1,Math.ceil(v)),w=Math.floor(y),E=Math.min(s-1,Math.ceil(y)),T=e.get(d,b,w,g),_=e.get(d,x,w,g),S=y-w,k=T+(e.get(d,b,E,g)-T)*S,O=k+(_+(e.get(d,x,E,g)-_)*S-k)*(v-b);c.set(O,d,f,m,g)}return c.toTensor()},e.prototype.batchNormalization4D=function(e,t,n,r,o,i){for(var a=e.dataSync(),s=t.dataSync(),u=n.dataSync(),c=o?o.dataSync():new Float32Array([1]),l=i?i.dataSync():new Float32Array([0]),p=new Float32Array(a.length),h=0;h<a.length;h++)p[h]=l[h%l.length]+(a[h]-s[h%s.length])*c[h%c.length]/Math.sqrt(u[h%u.length]+r);return d.tensor4d(p,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o,i){for(var a=h.buffer(e.shape,"float32"),s=t,u=a.shape[1]-1,c=a.shape[2]-1,l=a.shape[3]-1,p=function(t,n,r,o){for(var i=0,a=Math.max(0,o-s);a<=Math.min(o+s,l);a++){var u=e.get(t,n,r,a);i+=u*u}return i},d=function(t,n,r,o){for(var i=0,a=Math.max(0,n-s);a<=Math.min(n+s,u);a++)for(var l=Math.max(0,r-s);l<=Math.min(r+s,c);l++)i+=Math.pow(e.get(t,a,l,o),2);return i},f=0;f<a.shape[0];f++)for(var m=0;m<=a.shape[1];m++)for(var g=0;g<a.shape[2];g++)for(var v=0;v<a.shape[3];v++){var y="withinChannel"===i?d(f,m,g,v):p(f,m,g,v),b=e.get(f,m,g,v)*Math.pow(n+r*y,-o);a.set(b,f,m,g,v)}return a.toTensor()},e.prototype.multinomial=function(e,t,n){for(var r=e.shape[0],o=e.shape[1],i=h.zeros([r,t],"int32"),s=i.dataSync(),u=e.dataSync(),c=0;c<r;++c){var l=c*o,p=new Float32Array(o-1);p[0]=u[l];for(var d=1;d<p.length;++d)p[d]=p[d-1]+u[l+d];for(var f=a.alea(n.toString()),m=c*t,g=0;g<t;++g){var v=f();s[m+g]=p.length;for(var y=0;y<p.length;y++)if(v<p[y]){s[m+g]=y;break}}}return i},e.prototype.oneHot=function(e,t,n,r){var o=new Float32Array(e.size*t);o.fill(r);for(var i=0;i<e.size;++i)o[i*t+e.get(i)]=n;return h.tensor2d(o,[e.size,t])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){for(var o=l.assertAndGetBroadcastShape(e.shape,t.shape),i=h.buffer(o,n),a=e.dataSync(),s=t.dataSync(),u=l.getBroadcastDims(e.shape,o),c=l.getBroadcastDims(t.shape,o),p=function(n){var o=i.indexToLoc(n),l=o.slice(-e.rank);u.forEach(function(e){return l[e]=0});var p=e.locToIndex(l),h=o.slice(-t.rank);c.forEach(function(e){return h[e]=0});var d=t.locToIndex(h);i.values[n]=r(a[p],s[d])},d=0;d<i.values.length;++d)p(d);return i.toTensor()},e.prototype.dispose=function(){},e}();t.MathBackendCPU=y,s.ENV.registerBackend("cpu",function(){return new y});var b=function(e){function t(t){return void 0===t&&(t=!1),console.warn("new NDArrayMathCPU() is deprecated. Please use dl.setBackend('cpu')."),e.call(this,"cpu",t)||this}return r(t,e),t}(u.NDArrayMath);t.NDArrayMathCPU=b},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(27),u=n(11),c=n(109),l=n(3),p=n(21),h=n(0),d=n(110),f=n(111),m=n(112),g=n(70),v=n(70),y=n(113),b=n(114),x=n(115),w=n(116),E=n(117),T=n(118),_=n(119),S=n(71),k=n(120),O=n(121),C=n(122),A=n(123),N=n(124),D=n(125),M=n(126),R=n(127),P=n(128),I=n(129),L=n(130),B=n(131),F=n(132),j=n(22),z=n(133),V=n(134),U=n(135),G=n(72),q=n(72),W=n(28),H=function(){function e(e,t){if(void 0===t&&(t=!0),this.gpgpu=e,this.delayedStorage=t,this.texData=new WeakMap,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,a.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");null==e?(this.gpgpu=new S.GPGPUContext,this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas")),this.textureManager=new z.TextureManager(this.gpgpu)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n,values:null,texture:null,texShape:null,texType:j.TextureType.FLOAT})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("MathBackendWebGL.writePixels(): pixels can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(e instanceof HTMLVideoElement){if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),e=this.canvas}var o=l.Tensor.make(n,{},"int32");this.texData.get(o.dataId).texType=j.TextureType.UNSIGNED_BYTE,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),e);var i=new T.FromPixelsProgram(r),a=this.compileAndRun(i,[o]);return o.dispose(),a},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(e);var n=this.texData.get(e),r=n.texture,o=n.texShape,i=n.texType;null!=r&&(this.textureManager.releaseTexture(r,o,i),n.texture=null,n.texShape=null),n.values=t,this.delayedStorage||this.uploadToGPU(e)},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.texture,r=t.values,o=t.texShape;if(null!=r)return this.cacheOnCPU(e),r;var i,a=null!=this.activeTimers;a&&(i=performance.now());var s=this.gpgpu.downloadMatrixFromTexture(n,o[0],o[1]);return a&&(this.downloadWaitMs+=performance.now()-i),this.cacheOnCPU(e,s),t.values},e.prototype.read=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,s;return i(this,function(i){switch(i.label){case 0:return this.throwIfNoData(e),t=this.texData.get(e),n=t.texture,r=t.values,o=t.texShape,null!=r?(this.cacheOnCPU(e),[2,r]):a.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")?[4,this.gpgpu.downloadMatrixFromTextureAsync(n,o[0],o[1])]:[3,2];case 1:return s=i.sent(),this.cacheOnCPU(e,s),[2,t.values];case 2:return 0===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?[2,this.readSync(e)]:[4,this.gpgpu.runQuery(function(){})];case 3:return i.sent(),[2,this.readSync(e)]}})})},e.prototype.time=function(e){return o(this,void 0,void 0,function(){var t,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=h.flatten(this.activeTimers),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(o).then(function(e){var t=0;return e.forEach(function(e){return t+=e}),t})];case 1:return a=i.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:a,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1}},e.prototype.startTimer=function(){return a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.pollQueryTime(e)]:[2,(t=e).endMs-t.startMs]})})},e.prototype.disposeData=function(e){if(this.texData.has(e)){var t=this.texData.get(e),n=t.texture,r=t.texShape,o=t.texType;null!=n&&this.textureManager.releaseTexture(n,r,o),this.texData.delete(e)}},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getTextureData=function(e){return this.uploadToGPU(e),this.texData.get(e)},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.slice=function(e,t,n){var r=new F.SliceProgram(n),o=r.getCustomSetupFunc(t);return this.compileAndRun(r,[e],null,o)},e.prototype.reverse=function(e,t){var n=new B.ReverseProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){var n=new b.ConcatProgram(e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.neg=function(e){var t=new q.UnaryOpProgram(e.shape,G.NEG);return this.compileAndRun(t,[e])},e.prototype.matMul=function(e,t,n,r){var o=new N.MatMulProgram(e.shape,t.shape,n,r);return this.compileAndRun(o,[e,t])},e.prototype.multiply=function(e,t){var n=new v.BinaryOpProgram(g.MUL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,p.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.batchNormalization4D=function(e,t,n,r,o,i){var a=[e,t,n],s=null;null!=i&&(s=i.shape,a.push(i));var u=null;null!=o&&(u=o.shape,a.push(o));var c=new m.BatchNormProgram(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,a)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o,i){var a=new C.LRNProgram(e.shape,t,n,r,o,i);return this.compileAndRun(a,[e])},e.prototype.tile=function(e,t){var n=new V.TileProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=new R.PadProgram(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){var n=new U.TransposeProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){var r=new _.GatherProgram(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],i={windowSize:c.computeOptimalWindowSize(o),inSize:o,batchSize:r},a=new I.ReduceProgram(i,t),s=a.outputShape,u=s[0],l=s[1],p=this.makeOutputArray([u,l],n);return this.compileAndRun(a,[e],p),1===p.shape[1]?p:this.reduce(p,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i={windowSize:c.computeOptimalWindowSize(o),inSize:o,batchSize:r},a=new d.ArgMinMaxProgram(i,t,null==n),s=a.outputShape,u=s[0],l=s[1],p=this.makeOutputArray([u,l],"int32"),h=[e];return null!=n&&h.push(n),this.compileAndRun(a,h,p),1===p.shape[1]?p:this.argReduce(e,t,p)},e.prototype.sum=function(e,t){u.assertAxesAreInnerMostDims("sum",t,e.rank);var n=u.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.sizeFromShape(o),a=e.as2D(-1,i),s=p.sumOutType(e.dtype);return this.reduce(a,"sum",s).reshape(r)},e.prototype.argMin=function(e,t){u.assertAxesAreInnerMostDims("argMin",t,e.rank);var n=u.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.sizeFromShape(o),a=e.as2D(-1,i);return this.argReduce(a,"min").reshape(r)},e.prototype.argMax=function(e,t){u.assertAxesAreInnerMostDims("argMax",t,e.rank);var n=u.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.sizeFromShape(o),a=e.as2D(-1,i);return this.argReduce(a,"max").reshape(r)},e.prototype.equal=function(e,t){var n=new v.BinaryOpProgram(g.EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){var n=new v.BinaryOpProgram(g.NOT_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){var n=new v.BinaryOpProgram(g.LESS,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){var n=new v.BinaryOpProgram(g.LESS_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){var n=new v.BinaryOpProgram(g.GREATER,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){var n=new v.BinaryOpProgram(g.GREATER_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new q.UnaryOpProgram(e.shape,G.LOGICAL_NOT);return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){var n=new v.BinaryOpProgram(g.LOGICAL_AND,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){var n=new v.BinaryOpProgram(g.LOGICAL_OR,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalXor=function(e,t){var n=new v.BinaryOpProgram(g.LOGICAL_XOR,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.where=function(e,t,n,r){var o=new O.WhereProgram(e.rank,t.shape,t.rank),i=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[e,t,n],i)},e.prototype.topKValues=function(e,t){throw new Error("topKValues GPU not yet implemented!")},e.prototype.topKIndices=function(e,t){throw new Error("topKIndices GPU not yet implemented!")},e.prototype.min=function(e,t){u.assertAxesAreInnerMostDims("min",t,e.rank);var n=u.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.sizeFromShape(o),a=e.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},e.prototype.minimum=function(e,t){var n=new v.BinaryOpProgram(g.MIN,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){u.assertAxesAreInnerMostDims("max",t,e.rank);var n=u.computeOutAndReduceShapes(e.shape,t),r=n[0],o=n[1],i=h.sizeFromShape(o),a=e.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},e.prototype.maximum=function(e,t){var n=new v.BinaryOpProgram(g.MAX,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.divide=function(e,t){var n=new v.BinaryOpProgram(g.DIV,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){var n=new v.BinaryOpProgram(g.ADD,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,p.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.subtract=function(e,t){var n=new v.BinaryOpProgram(g.SUB,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,p.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.pow=function(e,t){var n=new v.BinaryOpProgram(g.POW,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,p.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.ceil=function(e){var t=new q.UnaryOpProgram(e.shape,G.CEIL);return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new q.UnaryOpProgram(e.shape,G.FLOOR);return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t=new q.UnaryOpProgram(e.shape,G.EXP);return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t=new q.UnaryOpProgram(e.shape,G.LOG);return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new q.UnaryOpProgram(e.shape,G.SQRT);return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new q.UnaryOpProgram(e.shape,G.SQUARE);return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t=new q.UnaryOpProgram(e.shape,G.RELU);return this.compileAndRun(t,[e])},e.prototype.elu=function(e){var t=new q.UnaryOpProgram(e.shape,G.ELU);return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e){var t=new q.UnaryOpProgram(e.shape,G.ELU_DER);return this.compileAndRun(t,[e])},e.prototype.selu=function(e){var t=new q.UnaryOpProgram(e.shape,G.SELU);return this.compileAndRun(t,[e])},e.prototype.leakyRelu=function(e,t){var n=new q.UnaryOpProgram(e.shape,G.LEAKY_RELU(t));return this.compileAndRun(n,[e])},e.prototype.prelu=function(e,t){var n=new v.BinaryOpProgram(g.PRELU,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.preluDer=function(e,t){var n=new v.BinaryOpProgram(g.PRELU_DER,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.int=function(e){var t=new q.UnaryOpProgram(e.shape,G.TO_INT),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r=new y.ClipProgram(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.abs=function(e){var t=new q.UnaryOpProgram(e.shape,G.ABS);return this.compileAndRun(t,[e])},e.prototype.sigmoid=function(e){var t=new q.UnaryOpProgram(e.shape,G.SIGMOID);return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new q.UnaryOpProgram(e.shape,G.SIN);return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new q.UnaryOpProgram(e.shape,G.COS);return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new q.UnaryOpProgram(e.shape,G.TAN);return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new q.UnaryOpProgram(e.shape,G.ASIN);return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new q.UnaryOpProgram(e.shape,G.ACOS);return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new q.UnaryOpProgram(e.shape,G.ATAN);return this.compileAndRun(t,[e])},e.prototype.sinh=function(e){var t=new q.UnaryOpProgram(e.shape,G.SINH);return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new q.UnaryOpProgram(e.shape,G.COSH);return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new q.UnaryOpProgram(e.shape,G.TANH);return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new q.UnaryOpProgram(e.shape,G.STEP(t));return this.compileAndRun(n,[e])},e.prototype.conv2d=function(e,t,n){var r=new w.Conv2DProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new x.Conv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new x.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r=new E.DepthwiseConv2DProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new P.Pool2DProgram(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.minPool=function(e,t){var n=new P.Pool2DProgram(t,"min",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new P.Pool2DProgram(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n){var r=new P.Pool2DProgram(n,"max",!0),o=this.compileAndRun(r,[t]),i=new A.MaxPool2DBackpropProgram(n),a=this.makeOutputArray(i.outputShape,t.dtype),s=this.compileAndRun(i,[e,o],a);return o.dispose(),s},e.prototype.avgPoolBackprop=function(e,t,n){var r=new f.AvgPool2DBackpropProgram(n),o=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],o)},e.prototype.resizeBilinear=function(e,t,n,r){var o=new L.ResizeBilinearProgram(e.shape,t,n,r);return this.compileAndRun(o,[e])},e.prototype.multinomial=function(e,t,n){var r=e.shape[0],o=e.shape[1],i=new D.MultinomialProgram(r,o,t),a=this.makeOutputArray(i.outputShape,"int32"),s=i.getCustomSetupFunc(n);return this.compileAndRun(i,[e],a,s)},e.prototype.oneHot=function(e,t,n,r){var o=new M.OneHotProgram(e.size,t,n,r);return this.compileAndRun(o,[e])},e.prototype.makeOutputArray=function(e,t){return l.Tensor.make(e,{},t)},e.prototype.compileAndRun=function(e,t,n,r){var o=this;null==n&&(n=this.makeOutputArray(e.outputShape,t[0].dtype));var i=t.map(function(e){return o.uploadToGPU(e.dataId),{tensor:e,texData:o.texData.get(e.dataId)}});this.uploadToGPU(n.dataId);var a,s={tensor:n,texData:this.texData.get(n.dataId)},u=k.makeShaderKey(e,i,s),c=this.getAndSaveBinary(u,function(){return k.compileProgram(o.gpgpu,e,i,s)}),l=null!=this.activeTimers;return l&&(a=this.startTimer()),k.runProgram(c,i,s,r),l&&(a=this.endTimer(a),this.activeTimers.push(this.getQueryTime(a))),n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){if(!this.disposed){for(var e in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},e.prototype.throwIfNoData=function(e){if(!this.texData.has(e))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.uploadToGPU=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.values,o=t.texture,i=t.dtype,a=t.texType;if(null==o){var s,u=null!=this.activeTimers;u&&(s=performance.now());var c=W.getTextureShapeFromLogicalShape(this.gpgpu.gl,n);t.texShape=c;var l=this.textureManager.acquireTexture(c,a);t.texture=l,null!=r&&(this.gpgpu.uploadMatrixToTexture(l,c[0],c[1],function(e,t){if(e instanceof Float32Array)return e;for(var n=new Float32Array(e.length),r=0;r<n.length;r++){var o=e[r];n[r]=h.isValNaN(o,t)?NaN:o}return n}(r,i)),t.values=null,u&&(this.uploadWaitMs+=performance.now()-s))}},e.prototype.cacheOnCPU=function(e,t){var n=this.delayedStorage,r=this.texData.get(e),o=r.texture,i=r.texShape,a=r.dtype,s=r.texType;n&&null!=o&&(this.textureManager.releaseTexture(o,i,s),r.texture=null,r.texShape=null),null!=t&&(r.values=function(e,t){if("float32"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r){var o=e[r];o=isNaN(o)?h.getNaN(t):Math.round(o),n[r]=o}return n}throw new Error("Unknown dtype "+t)}(t,a))},e}();t.MathBackendWebGL=H,a.ENV.registerBackend("webgl",function(){return new H});var X=function(e){function t(t,n){return void 0===n&&(n=!1),console.warn("new NDArrayMathGPU() is deprecated. Please use dl.setBackend('webgl')."),e.call(this,new H(t),n)||this}return r(t,e),t}(s.NDArrayMath);t.NDArrayMathGPU=X},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n";t.ADD="return a + b;",t.SUB="return a - b;",t.MUL="return a * b;",t.DIV="return a / b;",t.POW="\n  return (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.EQUAL=o+"\n  return float(a == b);\n",t.NOT_EQUAL=o+"\n  return float(a != b);\n",t.LESS=o+"\n  return float(a < b);\n",t.LESS_EQUAL=o+"\n  return float(a <= b);\n",t.GREATER=o+"\n  return float(a > b);\n",t.GREATER_EQUAL=o+"\n  return float(a >= b);\n",t.LOGICAL_AND=o+"\n  return float(a >= 1.0 && b >= 1.0);\n",t.LOGICAL_OR=o+"\n  return float(a >= 1.0 || b >= 1.0);\n",t.LOGICAL_XOR=o+"\n  return float(a >= 1.0 ^^ b >= 1.0);\n",t.PRELU="\n  return (a >= 0.0) ? a : b * a;\n",t.PRELU_DER="\n  return (a > 0.0) ? 1.0 : ((a < 0.0) ? b : a);\n",t.MAX=o+"\n  return max(a, b);\n",t.MIN=o+"\n  return min(a, b);\n";var i=function(e,t,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "};t.BinaryOpProgram=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(0),s=n(67),u=n(22),c=n(28),l=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.firstProgram=!0,this.gl=null!=e?e:s.createWebGLContext(),1===i.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float")):this.colorBufferFloatExtension=c.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=c.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),i.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=s.createVertexBuffer(this.gl),this.indexBuffer=s.createIndexBuffer(this.gl),this.framebuffer=c.createFramebuffer(this.gl)}return e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;c.callAndCheck(t,function(){return t.finish()}),c.callAndCheck(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),c.callAndCheck(t,function(){return t.deleteFramebuffer(e.framebuffer)}),c.callAndCheck(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),c.callAndCheck(t,function(){return t.deleteBuffer(e.vertexBuffer)}),c.callAndCheck(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),c.callAndCheck(t,function(){return t.deleteBuffer(e.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},e.prototype.enableAutomaticDebugValidation=function(e){this.autoDebugValidate=e,c.enableDebugWebGLErrorChecking(e)},e.prototype.createMatrixTexture=function(e,t){return this.throwIfDisposed(),s.createMatrixTexture(this.gl,e,t)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),s.uploadPixelDataToTexture(this.gl,e,t)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),s.createPackedMatrixTexture(this.gl,e,t)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),c.callAndCheck(this.gl,function(){return t.gl.deleteTexture(e)})},e.prototype.uploadMatrixToTexture=function(e,t,n,r){return this.throwIfDisposed(),s.uploadMatrixToTexture(this.gl,e,t,n,r,1)},e.prototype.uploadMatrixToPackedTexture=function(e,t,n,r){return this.throwIfDisposed(),s.uploadMatrixToPackedTexture(this.gl,e,t,n,r)},e.prototype.downloadMatrixFromTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return s.downloadMatrixFromOutputTexture(r.gl,t,n)})},e.prototype.downloadMatrixFromTextureAsync=function(e,t,n){return r(this,void 0,void 0,function(){var r=this;return o(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(e,function(){return s.downloadMatrixFromOutputTextureAsync(r.gl,r.getBufferSubDataAsyncExtension,t,n)})]})})},e.prototype.downloadMatrixFromRGBAColorTexture=function(e,t,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return s.downloadMatrixFromRGBAColorTexture(o.gl,t,n,r)})},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return s.downloadMatrixFromPackedOutputTexture(r.gl,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=c.createFragmentShader(t,e),r=s.createVertexShader(t),o=c.createProgram(t);return c.callAndCheck(t,function(){return t.attachShader(o,r)}),c.callAndCheck(t,function(){return t.attachShader(o,n)}),c.linkProgram(t,o),this.autoDebugValidate&&c.validateProgram(t,o),this.firstProgram&&(this.firstProgram=!1,this.setProgram(o),s.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&c.callAndCheck(this.gl,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.autoDebugValidate&&c.validateProgram(this.gl,this.program),c.callAndCheck(this.gl,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?c.getProgramUniformLocationOrThrow(this.gl,e,t):c.getProgramUniformLocation(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),c.bindTextureToProgramUniformSampler(this.gl,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=u.getPackedMatrixTextureShapeWidthHeight(t,n),o=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,o,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&c.validateProgram(this.gl,this.program),c.validateFramebuffer(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.autoDebugValidate&&this.debugValidate(),c.callAndCheck(e,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=c.getExtensionOrThrow(this.gl,2===i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.runQuery=function(e){var t=this.beginQuery();return e(),this.endQuery(),this.pollQueryTime(t)},e.prototype.beginQuery=function(){if(2===i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(r.GPU_DISJOINT_EXT);return o&&!i}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),i=this.gl.getParameter(r.GPU_DISJOINT_EXT),o&&!i},e.prototype.pollQueryTime=function(e){var t=this;return new Promise(function(n,r){var o=i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION");a.repeatedTry(function(){return t.isQueryAvailable(e,o)}).then(function(){return n(t.getQueryTime(e,o))}).catch(function(){console.warn("Disjoint query timer never available."),n(-1)})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.downloadMatrixDriverSetup=function(e){this.throwIfDisposed(),c.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)},e.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(c.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)):c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.downloadMatrixDriverSetup(e);var n=t();return this.downloadMatrixDriverTeardown(),n},e.prototype.downloadMatrixDriverAsync=function(e,t){return r(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return this.downloadMatrixDriverSetup(e),[4,t()];case 1:return n=r.sent(),this.downloadMatrixDriverTeardown(),[2,n]}})})},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;c.bindColorTextureToFramebuffer(r,e,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(r),this.outputTexture=e,c.callAndCheck(r,function(){return r.viewport(0,0,t,n)}),c.callAndCheck(r,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return o.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();t.GPGPUContext=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),o=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "};t.UnaryOpProgram=o;var i="\n  if (isNaN(x)) return x;\n";t.ABS="\n  return abs(x);\n",t.RELU=i+"\n  return (x < 0.0) ? 0.0 : x;\n",t.ELU="\n  return (x >= 0.0) ? x : (exp(x) - 1.0);\n",t.ELU_DER="\n  return (x >= 0.0) ? 1.0 : exp(x);\n",t.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+r.SELU_SCALEALPHA+";\n  float scale = "+r.SELU_SCALE+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",t.LEAKY_RELU=function(e){return"\n    return (x >= 0.0) ? x : "+e+" * x;\n  "},t.STEP=function(e){return void 0===e&&(e=0),i+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "},t.NEG="\n  return -x;\n",t.CEIL="\n  return ceil(x);\n",t.FLOOR="\n  return floor(x);\n",t.EXP="\n  return exp(x);\n",t.LOG="\n  return log(x);\n",t.SQRT=i+"\n  return sqrt(x);\n",t.SIGMOID="\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",t.SIN=i+"\n  return sin(x);\n",t.COS=i+"\n  return cos(x);\n",t.TAN="\n  return tan(x);\n",t.ASIN=i+"\n  return asin(x);\n",t.ACOS=i+"\n  return acos(x);\n",t.ATAN=i+"\n  return atan(x);\n",t.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",t.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",t.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",t.SQUARE="\n  return x * x;\n",t.LOGICAL_NOT=i+"\n  return float(!(x >= 1.0));\n",t.TO_INT="\n  return float(int(x));\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e,t,n){void 0===e&&(e=1),void 0===t&&(t="fan_in"),void 0===n&&(n="normal"),this.scale=e,this.mode=t,this.distribution=n}return e.prototype.initialize=function(e,t,n){var o=0;if("fan_in"===this.mode)o=t;else if("fan_out"===this.mode)o=n;else{if("fan_avg"!==this.mode)throw new Error("Unexpected mode for variance scaling initializer: "+this.mode);o=(t+n)/2}if("normal"===this.distribution)return r.truncatedNormal(e,0,Math.sqrt(this.scale/o));if("uniform"===this.distribution)return r.randomUniform(e,0,Math.sqrt(3*this.scale/o));throw new Error("Unexpected distribution for variance scaling initializer: "+this.distribution)},e}();t.VarianceScalingInitializer=o;var i=function(){function e(){}return e.prototype.initialize=function(e,t,n){return r.zeros(e)},e}();t.ZerosInitializer=i;var a=function(){function e(){}return e.prototype.initialize=function(e,t,n){return r.ones(e)},e}();t.OnesInitializer=a;var s=function(){function e(e){void 0===e&&(e=0),this.value=e}return e.prototype.initialize=function(e,t,n){return r.fill(e,this.value)},e}();t.ConstantInitializer=s;var u=function(){function e(e){this.tensor=e}return e.prototype.initialize=function(e,t,n){return this.tensor},e}();t.TensorInitializer=u;var c=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=.05),this.mean=e,this.stdev=t}return e.prototype.initialize=function(e,t,n){return r.randomNormal(e,this.mean,this.stdev)},e}();t.RandomNormalInitializer=c;var l=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=.05),this.mean=e,this.stdev=t}return e.prototype.initialize=function(e,t,n){return r.truncatedNormal(e,this.mean,this.stdev)},e}();t.RandomTruncatedNormalInitializer=l;var p=function(){function e(e,t){void 0===e&&(e=-.05),void 0===t&&(t=.05),this.minval=e,this.maxval=t}return e.prototype.initialize=function(e,t,n){return r.randomUniform(e,this.minval,this.maxval)},e}();t.RandomUniformInitializer=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(3),a=n(0),s=n(140),u=n(33),c=n(12),l=function(e){var t=this;this.dict={},e&&e.forEach(function(e){return t.dict[e.tensor.id]=e})};t.FeedDictionary=l,function(e){e[e.NONE=0]="NONE",e[e.SUM=1]="SUM",e[e.MEAN=2]="MEAN"}(r=t.CostReduction||(t.CostReduction={}));var p=function(){function e(e,t){this.math=t,this.activationArrayMap=new c.TensorArrayMap,this.runtimeCache={},this.oneScalar=i.Scalar.new(1),this.gradientArrayMap=new c.SummedTensorArrayMap(this.math)}return e.prototype.dispose=function(){var e=this;this.activationArrayMap.dispose(),Object.keys(this.runtimeCache).forEach(function(t){var n=e.runtimeCache[t];n.operations&&n.operations.forEach(function(e){return e.dispose()})}),this.runtimeCache={},null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.oneScalar.dispose()},e.prototype.evalAll=function(e,t){var n=this;return o.tidy(function(){var r=new l(t),o=n.getOrCreateRuntime(e,r),i=n.activationArrayMap;u.disposeAndInitializeOperationOutputs(o.nodes,i),u.disposeTransientOperationArrays(o.operations,n.activationArrayMap,n.gradientArrayMap),u.addPersistentArraysToTensorArrayMap(o.nodes,i),u.loadInputsFromFeedDictionaryToTensorArrayMap(r,i,n.math),o.operations.forEach(function(e){return e.feedForward(n.math,i)});var a=e.map(function(e){return i.get(e)});return e.forEach(function(e){return i.delete(e)}),u.releaseFeedDictionaryInputsFromTensorArrayMap(r,i,n.math),a})},e.prototype.eval=function(e,t){return this.evalAll([e],t)[0]},e.prototype.train=function(e,t,n,s,c){var p=this;void 0===c&&(c=r.NONE),a.assert(a.isScalarShape(e.shape),"Cost tensor for training must be a scalar value."),this.prevBatchSize!==n&&(this.prevBatchSize=n,null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.batchSizeScalar=this.math.keep(i.Scalar.new(n)));var h=new l(t);u.throwIfFeedDictionaryContainsNDArrays(h);var d=this.getOrCreateRuntime([e],h),f=d.operations,m=d.operations.slice().reverse(),g=this.activationArrayMap,v=this.gradientArrayMap;return v.nullify(e),v.add(e,this.oneScalar),u.addPersistentArraysToTensorArrayMap(d.nodes,g),s.beforeBatch(this.math,n,d,g,v),o.tidy(function(){for(var t=i.Scalar.new(0),r=0;r<n;++r)u.disposeAndInitializeOperationOutputs(d.nodes,g),u.disposeAndInitializeOperationInputGradients(d.nodes,v),u.disposeTransientOperationArrays(d.operations,g,v),u.loadInputsFromFeedDictionaryToTensorArrayMap(h,g,p.math),f.forEach(function(e){return e.feedForward(p.math,g)}),m.forEach(function(e){return e.backProp(p.math,g,v)}),s.afterExample(p.math,d,g,v),u.releaseFeedDictionaryInputsFromTensorArrayMap(h,g,p.math),t=p.updateCostForExample(t,g.get(e),c);return s.afterBatch(p.math,n,d,g,v),p.updateCostForBatch(t,c)})},e.prototype.updateCostForExample=function(e,t,n){return n===r.MEAN||n===r.SUM?this.math.add(e,t):e},e.prototype.updateCostForBatch=function(e,t){return t===r.MEAN?this.math.divide(e,this.batchSizeScalar):e},e.prototype.getOrCreateRuntime=function(e,t){var n=this.makeRuntimeCacheKey(e,t),r=this.runtimeCache[n];if(void 0===r){var o=u.getOrderedEvaluationSetFromEvalTensor(e,t);u.removeFeedDictionaryNodesFromEvaluationSet(t,o),u.throwErrorIfEvaluationSetContainsPlaceholderNodes(o),r={nodes:o,operations:s.emitFromGraphNodes(o)},this.runtimeCache[n]=r}return r},e.prototype.makeRuntimeCacheKey=function(e,t){return e.map(function(e){return e.id}).sort().join("_")+"__"+Object.keys(t.dict).sort().join("_")},e}();t.Session=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompare=function(e,t){return e===t?0:e<t?-1:1};var r=function(){function e(e,t){this.comparator=e,this.indexObserver=t,this.heap=[]}return e.prototype.enqueue=function(e){this.heap.push(e),this.onIndexChanged(e,this.heap.length-1),this.siftUp(this.heap.length-1)},e.prototype.dequeue=function(){if(this.empty())throw new Error("dequeue called on empty priority queue.");var e=this.heap[0];return this.swap(0,this.heap.length-1),this.heap.pop(),this.siftDown(0),e},e.prototype.update=function(e,t){var n=t===this.heap.length-1;n||this.swap(t,this.heap.length-1),this.heap.pop(),n||(-1!==this.siftUpIndex(t)?this.siftUp(t):-1!==this.siftDownIndex(t)&&this.siftDown(t)),this.enqueue(e)},e.prototype.empty=function(){return 0===this.heap.length},e.prototype.onIndexChanged=function(e,t){this.indexObserver&&this.indexObserver(e,t)},e.prototype.getParentIndex=function(e){return 0===e?-1:Math.floor((e-1)/2)},e.prototype.getLeftChildIndex=function(e){var t=2*e+1;return t<this.heap.length?t:-1},e.prototype.getRightChildIndex=function(e){var t=2*e+2;return t<this.heap.length?t:-1},e.prototype.siftUpIndex=function(e){var t=this.getParentIndex(e);return-1===t?-1:this.compare(t,e)>0?t:-1},e.prototype.siftUp=function(e){for(var t=this.siftUpIndex(e);-1!==t;)this.swap(e,t),e=t,t=this.siftUpIndex(e)},e.prototype.siftDownIndex=function(e){if(e>=this.heap.length)return-1;var t=e,n=this.getLeftChildIndex(e);-1!==n&&this.compare(n,t)<0&&(t=n);var r=this.getRightChildIndex(e);return-1!==r&&this.compare(r,t)<0&&(t=r),t===e?-1:t},e.prototype.siftDown=function(e){for(var t=this.siftDownIndex(e);-1!==t;)this.swap(e,t),e=t,t=this.siftDownIndex(e)},e.prototype.compare=function(e,t){return this.comparator(this.heap[e],this.heap[t])},e.prototype.swap=function(e,t){var n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,this.onIndexChanged(this.heap[e],e),this.onIndexChanged(this.heap[t],t)},e}();t.PriorityQueue=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81);t.KNNImageClassifier=r.KNNImageClassifier},function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,o=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(c,l,p){p||(c=u(c));var h,d=this,f="application/octet-stream"===c.type,m=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,e)}catch(e){a(e)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,r)return h=t().createObjectURL(c),void setTimeout(function(){n.href=h,n.download=l,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(n),m(),s(h),d.readyState=d.DONE});!function(){if((i||f&&o)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=i?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,m()},n.readAsDataURL(c),void(d.readyState=d.INIT)}h||(h=t().createObjectURL(c)),f?e.location.href=h:e.open(h,"_blank")||(e.location.href=h),d.readyState=d.DONE,m(),s(h)}()},l=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=o:null!==n(9)&&null!==n(15)&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=(n(79),n(76)),a=n(24),s=n(77),u=n.n(s);String.prototype.sprintf=function(){let e=this+"";const t=Array.prototype.slice.call(arguments);let n=!0;if(-1!=e.indexOf("%s",0)&&(n=!1),1===t.length)return n?e.replace(/%1$s/g,t[0]):e.replace(/%s/g,t[0]);for(let r=0;r<t.length;r++){const o=r+1;e=n?e.replace("%"+o+"$s",t[r]):e.replace("%s",t[r])}return e};const c={ja:{menu:'<a href="?lang=en">English</a> | <a href="?lang=zh_cn">ç®ä½ä¸­æ</a> | <a href="https://github.com/champierre/ml2scratch">GitHub</a>',input:"å¥å",connection:"æ¥ç¶",trained_model:"å­¦ç¿æ¸ã¿ã¢ãã«",trained_model_text:"å­¦ç¿æ¸ã¿ã®ã¢ãã«ãã¢ããã­ã¼ããã¦ãããã¾ã§å­¦ç¿ããã¢ãã«ã¨å¥ãæ¿ãã¾ãã",training:"å­¦ç¿",connect:"æ¥ç¶",connection_id:"æ¥ç¶ID",recognition:"èªè­",blank_id_is_invalid:"æ¥ç¶IDãå¥åãã¦ãã ããã",no_examples_added:"ã¾ã å­¦ç¿ãã¦ãã¾ãã",examples:"æ",train:"ãåé¡%sãã¨ãã¦å­¦ç¿ãã",edit_label:"ã©ãã«ãç·¨é",clear:"ãªã»ãã",clear_all:"ãã¹ã¦ããªã»ãã",download:"å­¦ç¿æ¸ã¿ã¢ãã«ããã¦ã³ã­ã¼ã",upload:"ã¢ããã­ã¼ã",help_text:"æ¡å¼µæ©è½ãèª­ã¿è¾¼ãã ScratchXã®ãã¼ã¸ãéãã¦ãä¸è¨ã®æ¥ç¶IDããID: [ ]ã§æ¥ç¶ããããã­ãã¯ã«ã³ãã¼&ãã¼ã¹ããã¦ãã ããã",open_scratchx:"ScratchXãéã"},en:{menu:'<a href="?lang=ja">æ¥æ¬èª</a> | <a href="?lang=zh_cn">ç®ä½ä¸­æ</a> | <a href="https://github.com/champierre/ml2scratch">GitHub</a>',input:"Input",connection:"Connect",trained_model:"Trained Model",trained_model_text:"Upload trained model.",training:"Training",connect:"Connect",connection_id:"Connection ID",recognition:"Recognition",blank_id_is_invalid:"Blank ID is invalid.",no_examples_added:"No examples added",examples:"examples",train:"Train %s",edit_label:"Edit label",clear:"Reset",clear_all:"Reset all",download:"Download trained model",upload:"Upload",help_text:'&uarr; Open <a href="http://scratchx.org/?url=https://champierre.github.io/ml2scratch/ml2scratch.js" target="_blank">ScratchX with extension loaded</a> and use this ID when you connect.',open_scratchx:"Open ScratchX"},zh_cn:{menu:'<a href="?lang=en">English</a> | <a href="?lang=ja">æ¥æ¬èª</a> | <a href="https://github.com/champierre/ml2scratch">GitHub</a>',input:"è¾å¥",connection:"è¿æ¥",trained_model:"å­¦ä¹ æ¨¡å",trained_model_text:"ä¸ä¼ å­¦ä¹ æ¨¡å",training:"å­¦ä¹ ",connect:"è¿æ¥",connection_id:"è¿æ¥ID",recognition:"æ¿è®¤",blank_id_is_invalid:"Blank ID is invalid.",no_examples_added:"å°æªå­¦ä¹ ",examples:"examples",train:"å­¦ä¹ ç±»å« %s",edit_label:"Edit label",clear:"éç½®ç±»å«",clear_all:"éç½®ææç±»å«",download:"ä¸è½½",upload:"ä¸ä¼ ",help_text:'&uarr; æå¼<a href="http://scratchx.org/?url=https://champierre.github.io/ml2scratch/ml2scratch.js" target="_blank">å·²å å¥æ©å±åè½çScratchX</a>çé¡µé¢ï¼æä¸é¢çè¿æ¥IDæ·è´å°[Connect with ID: []]æ¨¡åçç©ºç½å¤ã',open_scratchx:"æå¼ScratchX"}};class l{constructor(){window.I18n=this,o()("[data-locale]").each(function(e,t){o()(t).html(l.t(o()(t).data("locale")))})}static t(e,t=""){let n=window.navigator.language;const r=this.getUrlVars();return r.lang&&r.lang.length>0&&(n=r.lang),"ja"==n?c.ja[e].sprintf(t):"zh_cn"==n?c.zh_cn[e].sprintf(t):c.en[e].sprintf(t)}static getUrlVars(){let e=[],t=0,n="",r="";t=(n=window.location.search.slice(1).split("&")).length;for(let o=0;o<t;o++)r=n[o].split("="),e.push(r[0]),e[r[0]]=r[1];return e}}window.addEventListener("load",()=>{new class{constructor(){this.infoTexts=[],this.training=-1,this.videoPlaying=!1,this.connId=void 0,this.knn=new i.KNNImageClassifier(8,10),this.video=o()("video")[0];for(let e=0;e<8;e++)this.addCard();this.infoTexts=o()("#learning .info-text"),o()("#clear-all-menu").on("click",()=>(this.clearAll(),!1)),o()("#learning .edit-label-menu").each((e,t)=>{o()(t).on("click",()=>(this.editLabel(e),!1))}),o()("#learning .clear-menu").each((e,t)=>{o()(t).on("click",()=>(this.clear(e),!1))}),o()("#download-button").on("click",()=>(this.download(),!1)),o()("#upload-button").on("click",()=>(this.upload(),!1)),o()("#conn-id").on("click",e=>{o()(e.target).select()});for(let e=0;e<8;e++){o()("#learning .card-block__label").eq(e).html(`${e}`);let t=o()("#learning button").eq(e)[0];t.addEventListener("mousedown",()=>this.training=e),t.addEventListener("mouseup",()=>this.training=-1)}o()("#conn-id").val(Math.random().toString(36).slice(-10)),o()("#connect-button").on("click",e=>{let t=o()("#conn-id").val();return this.connect(t),!1}),o()("#scratchx-link").attr("href","http://scratchx.org/?url=https://champierre.github.io/ml2scratch/ml2scratch.js"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(e=>{this.video.srcObject=e,this.video.addEventListener("playing",()=>this.videoPlaying=!0),this.video.addEventListener("paused",()=>this.videoPlaying=!1)}),this.knn.load().then(()=>this.start())}start(){this.timer&&this.stop(),this.video.play(),this.timer=requestAnimationFrame(this.animate.bind(this))}stop(){this.video.pause(),cancelAnimationFrame(this.timer)}animate(){if(this.videoPlaying){const e=a.fromPixels(this.video);-1!=this.training&&this.knn.addImage(e,this.training);const t=this.knn.getClassExampleCount();Math.max(...t)>0?this.knn.predictClass(e).then(e=>{this.updateProgress(e.confidences);for(let n=0;n<8;n++)e.classIndex==n&&this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({action:"predict",conn_id:this.connId,value:e.classIndex})),t[n]>0&&(this.infoTexts[n].innerText=`x ${t[n]}`)}).then(()=>e.dispose()):e.dispose()}this.timer=requestAnimationFrame(this.animate.bind(this))}connect(e){this.ws=new WebSocket("wss://ml2scratch-helper.glitch.me/"),this.connId=e}download(){const e=this.knn.getClassLogitsMatrices(),t=e.map(e=>e?e.dataSync():null),n=name||Date.now(),r=new Blob([JSON.stringify({logits:e,tensors:t})],{type:"application/json"});u.a.saveAs(r,n+".json")}upload(){const e=this.knn,t=document.getElementById("upload-files").files;if(t.length<=0)return!1;const n=new FileReader;n.onload=function(t){const n=JSON.parse(t.target.result),r=n.tensors.map((e,t)=>{if(e){const r=Object.keys(e).map(t=>e[t]);return a.tensor(r,n.logits[t].shape,n.logits[t].dtype)}return null});e.setClassLogitsMatrices(r)},n.onloadend=function(e){document.getElementById("upload-files").value=""},n.readAsText(t.item(0))}editLabel(e){console.log("Editing...",e)}clear(e){this.knn.clearClass(e),this.infoTexts[e].innerText="x 0"}clearAll(){for(let e=0;e<8;e++)this.knn.clearClass(e),this.infoTexts[e].innerText="x 0"}updateProgress(e){let t="";o.a.each(e,function(e,n){t+=`<div class="bar" style="flex-basis: ${100*n}%"></div>`}),o()(".progress").html(t)}addCard(){o()("#learning .card-block-container").append('\n\x3c!-- card-block --\x3e\n<div class="card-block">\n  <div class="card-block__label"></div>\n  <div class="input-group none">\n    <input class="input" type="text" />\n  </div>\n  \x3c!-- <div class="dummy-photo"></div> --\x3e\n\n  <div class="card-block__info">\n    <span>\n      <i class="icon-photos"></i>\n      <span class="info-text">x 0</span>\n    </span>\n    <div class="dropdown">\n      <a href="#" class="link" data-toggle="dropdown">\n        <i class="icon-dots-white"></i>\n      </a>\n      <div class="card-dropdown-menu dropdown-menu dropdown-menu-right">\n        \x3c!-- <a class="dropdown-item edit-label-menu" href="#" data-locale="edit_label"></a> --\x3e\n        <a class="dropdown-item clear-menu" href="#" data-locale="clear"></a>\n      </div>\n    </div>\n  </div>\n\n  <button class="button is-w100 is-mini">\n    <i class="icon-camera is-mini"></i>\n  </button>\n</div>\n    ')}},new l})},function(e,t,n){
/*!
  * Bootstrap v4.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2018 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
!function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var s=function(e){var t="transitionend";function n(e){return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}var r={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var n=e(t).css("transition-duration");return parseFloat(n)?(n=n.split(",")[0],1e3*parseFloat(n)):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(n){e(n).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,o){for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var a=o[i],s=t[i],u=s&&r.isElement(s)?"element":n(s);if(!new RegExp(a).test(u))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+u+'" but expected type "'+a+'".')}}};return e.fn.emulateTransitionEnd=function(t){var n=this,o=!1;return e(this).one(r.TRANSITION_END,function(){o=!0}),setTimeout(function(){o||r.triggerTransitionEnd(n)},t),this},e.event.special[r.TRANSITION_END]={bindType:t,delegateType:t,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},r}(t),u=function(e){var t=e.fn.alert,n="close.bs.alert",r="closed.bs.alert",i="click.bs.alert.data-api",a="alert",u="fade",c="show",l=function(){function t(e){this._element=e}var i=t.prototype;return i.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},i.dispose=function(){e.removeData(this._element,"bs.alert"),this._element=null},i._getRootElement=function(t){var n=s.getSelectorFromElement(t),r=!1;return n&&(r=document.querySelector(n)),r||(r=e(t).closest("."+a)[0]),r},i._triggerCloseEvent=function(t){var r=e.Event(n);return e(t).trigger(r),r},i._removeElement=function(t){var n=this;if(e(t).removeClass(c),e(t).hasClass(u)){var r=s.getTransitionDurationFromElement(t);e(t).one(s.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(r)}else this._destroyElement(t)},i._destroyElement=function(t){e(t).detach().trigger(r).remove()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),o=r.data("bs.alert");o||(o=new t(this),r.data("bs.alert",o)),"close"===n&&o[n](this)})},t._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},o(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(i,'[data-dismiss="alert"]',l._handleDismiss(new l)),e.fn.alert=l._jQueryInterface,e.fn.alert.Constructor=l,e.fn.alert.noConflict=function(){return e.fn.alert=t,l._jQueryInterface},l}(t),c=function(e){var t="button",n=e.fn[t],r="active",i="btn",a="focus",s='[data-toggle^="button"]',u='[data-toggle="buttons"]',c="input",l=".active",p=".btn",h="click.bs.button.data-api",d="focus.bs.button.data-api blur.bs.button.data-api",f=function(){function t(e){this._element=e}var n=t.prototype;return n.toggle=function(){var t=!0,n=!0,o=e(this._element).closest(u)[0];if(o){var i=this._element.querySelector(c);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(r))t=!1;else{var a=o.querySelector(l);a&&e(a).removeClass(r)}if(t){if(i.hasAttribute("disabled")||o.hasAttribute("disabled")||i.classList.contains("disabled")||o.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(r),e(i).trigger("change")}i.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(r)),t&&e(this._element).toggleClass(r)},n.dispose=function(){e.removeData(this._element,"bs.button"),this._element=null},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data("bs.button");r||(r=new t(this),e(this).data("bs.button",r)),"toggle"===n&&r[n]()})},o(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(h,s,function(t){t.preventDefault();var n=t.target;e(n).hasClass(i)||(n=e(n).closest(p)),f._jQueryInterface.call(e(n),"toggle")}).on(d,s,function(t){var n=e(t.target).closest(p)[0];e(n).toggleClass(a,/^focus(in)?$/.test(t.type))}),e.fn[t]=f._jQueryInterface,e.fn[t].Constructor=f,e.fn[t].noConflict=function(){return e.fn[t]=n,f._jQueryInterface},f}(t),l=function(e){var t="carousel",n="bs.carousel",r="."+n,i=e.fn[t],u={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},c={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},l="next",p="prev",h="left",d="right",f={SLIDE:"slide"+r,SLID:"slid"+r,KEYDOWN:"keydown"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r,TOUCHEND:"touchend"+r,LOAD_DATA_API:"load.bs.carousel.data-api",CLICK_DATA_API:"click.bs.carousel.data-api"},m="carousel",g="active",v="slide",y="carousel-item-right",b="carousel-item-left",x="carousel-item-next",w="carousel-item-prev",E={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},T=function(){function i(t,n){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(n),this._element=e(t)[0],this._indicatorsElement=this._element.querySelector(E.INDICATORS),this._addEventListeners()}var T=i.prototype;return T.next=function(){this._isSliding||this._slide(l)},T.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},T.prev=function(){this._isSliding||this._slide(p)},T.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(E.NEXT_PREV)&&(s.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},T.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},T.to=function(t){var n=this;this._activeElement=this._element.querySelector(E.ACTIVE_ITEM);var r=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one(f.SLID,function(){return n.to(t)});else{if(r===t)return this.pause(),void this.cycle();var o=t>r?l:p;this._slide(o,this._items[t])}},T.dispose=function(){e(this._element).off(r),e.removeData(this._element,n),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},T._getConfig=function(e){return e=a({},u,e),s.typeCheckConfig(t,e,c),e},T._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on(f.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&(e(this._element).on(f.MOUSEENTER,function(e){return t.pause(e)}).on(f.MOUSELEAVE,function(e){return t.cycle(e)}),"ontouchstart"in document.documentElement&&e(this._element).on(f.TOUCHEND,function(){t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval)}))},T._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},T._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(E.ITEM)):[],this._items.indexOf(e)},T._getItemByDirection=function(e,t){var n=e===l,r=e===p,o=this._getItemIndex(t),i=this._items.length-1;if((r&&0===o||n&&o===i)&&!this._config.wrap)return t;var a=(o+(e===p?-1:1))%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},T._triggerSlideEvent=function(t,n){var r=this._getItemIndex(t),o=this._getItemIndex(this._element.querySelector(E.ACTIVE_ITEM)),i=e.Event(f.SLIDE,{relatedTarget:t,direction:n,from:o,to:r});return e(this._element).trigger(i),i},T._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var n=[].slice.call(this._indicatorsElement.querySelectorAll(E.ACTIVE));e(n).removeClass(g);var r=this._indicatorsElement.children[this._getItemIndex(t)];r&&e(r).addClass(g)}},T._slide=function(t,n){var r,o,i,a=this,u=this._element.querySelector(E.ACTIVE_ITEM),c=this._getItemIndex(u),p=n||u&&this._getItemByDirection(t,u),m=this._getItemIndex(p),T=Boolean(this._interval);if(t===l?(r=b,o=x,i=h):(r=y,o=w,i=d),p&&e(p).hasClass(g))this._isSliding=!1;else if(!this._triggerSlideEvent(p,i).isDefaultPrevented()&&u&&p){this._isSliding=!0,T&&this.pause(),this._setActiveIndicatorElement(p);var _=e.Event(f.SLID,{relatedTarget:p,direction:i,from:c,to:m});if(e(this._element).hasClass(v)){e(p).addClass(o),s.reflow(p),e(u).addClass(r),e(p).addClass(r);var S=s.getTransitionDurationFromElement(u);e(u).one(s.TRANSITION_END,function(){e(p).removeClass(r+" "+o).addClass(g),e(u).removeClass(g+" "+o+" "+r),a._isSliding=!1,setTimeout(function(){return e(a._element).trigger(_)},0)}).emulateTransitionEnd(S)}else e(u).removeClass(g),e(p).addClass(g),this._isSliding=!1,e(this._element).trigger(_);T&&this.cycle()}},i._jQueryInterface=function(t){return this.each(function(){var r=e(this).data(n),o=a({},u,e(this).data());"object"==typeof t&&(o=a({},o,t));var s="string"==typeof t?t:o.slide;if(r||(r=new i(this,o),e(this).data(n,r)),"number"==typeof t)r.to(t);else if("string"==typeof s){if(void 0===r[s])throw new TypeError('No method named "'+s+'"');r[s]()}else o.interval&&(r.pause(),r.cycle())})},i._dataApiClickHandler=function(t){var r=s.getSelectorFromElement(this);if(r){var o=e(r)[0];if(o&&e(o).hasClass(m)){var u=a({},e(o).data(),e(this).data()),c=this.getAttribute("data-slide-to");c&&(u.interval=!1),i._jQueryInterface.call(e(o),u),c&&e(o).data(n).to(c),t.preventDefault()}}},o(i,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return u}}]),i}();return e(document).on(f.CLICK_DATA_API,E.DATA_SLIDE,T._dataApiClickHandler),e(window).on(f.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(E.DATA_RIDE)),n=0,r=t.length;n<r;n++){var o=e(t[n]);T._jQueryInterface.call(o,o.data())}}),e.fn[t]=T._jQueryInterface,e.fn[t].Constructor=T,e.fn[t].noConflict=function(){return e.fn[t]=i,T._jQueryInterface},T}(t),p=function(e){var t="collapse",n="bs.collapse",r=e.fn[t],i={toggle:!0,parent:""},u={toggle:"boolean",parent:"(string|element)"},c="show.bs.collapse",l="shown.bs.collapse",p="hide.bs.collapse",h="hidden.bs.collapse",d="click.bs.collapse.data-api",f="show",m="collapse",g="collapsing",v="collapsed",y="width",b="height",x={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},w=function(){function r(t,n){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(n),this._triggerArray=e.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var r=[].slice.call(document.querySelectorAll(x.DATA_TOGGLE)),o=0,i=r.length;o<i;o++){var a=r[o],u=s.getSelectorFromElement(a),c=[].slice.call(document.querySelectorAll(u)).filter(function(e){return e===t});null!==u&&c.length>0&&(this._selector=u,this._triggerArray.push(a))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var d=r.prototype;return d.toggle=function(){e(this._element).hasClass(f)?this.hide():this.show()},d.show=function(){var t,o,i=this;if(!(this._isTransitioning||e(this._element).hasClass(f)||(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(x.ACTIVES)).filter(function(e){return e.getAttribute("data-parent")===i._config.parent})).length&&(t=null),t&&(o=e(t).not(this._selector).data(n))&&o._isTransitioning))){var a=e.Event(c);if(e(this._element).trigger(a),!a.isDefaultPrevented()){t&&(r._jQueryInterface.call(e(t).not(this._selector),"hide"),o||e(t).data(n,null));var u=this._getDimension();e(this._element).removeClass(m).addClass(g),this._element.style[u]=0,this._triggerArray.length&&e(this._triggerArray).removeClass(v).attr("aria-expanded",!0),this.setTransitioning(!0);var p="scroll"+(u[0].toUpperCase()+u.slice(1)),h=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){e(i._element).removeClass(g).addClass(m).addClass(f),i._element.style[u]="",i.setTransitioning(!1),e(i._element).trigger(l)}).emulateTransitionEnd(h),this._element.style[u]=this._element[p]+"px"}}},d.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass(f)){var n=e.Event(p);if(e(this._element).trigger(n),!n.isDefaultPrevented()){var r=this._getDimension();this._element.style[r]=this._element.getBoundingClientRect()[r]+"px",s.reflow(this._element),e(this._element).addClass(g).removeClass(m).removeClass(f);var o=this._triggerArray.length;if(o>0)for(var i=0;i<o;i++){var a=this._triggerArray[i],u=s.getSelectorFromElement(a);if(null!==u)e([].slice.call(document.querySelectorAll(u))).hasClass(f)||e(a).addClass(v).attr("aria-expanded",!1)}this.setTransitioning(!0),this._element.style[r]="";var c=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass(g).addClass(m).trigger(h)}).emulateTransitionEnd(c)}}},d.setTransitioning=function(e){this._isTransitioning=e},d.dispose=function(){e.removeData(this._element,n),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},d._getConfig=function(e){return(e=a({},i,e)).toggle=Boolean(e.toggle),s.typeCheckConfig(t,e,u),e},d._getDimension=function(){return e(this._element).hasClass(y)?y:b},d._getParent=function(){var t=this,n=null;s.isElement(this._config.parent)?(n=this._config.parent,void 0!==this._config.parent.jquery&&(n=this._config.parent[0])):n=document.querySelector(this._config.parent);var o='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(n.querySelectorAll(o));return e(i).each(function(e,n){t._addAriaAndCollapsedClass(r._getTargetFromElement(n),[n])}),n},d._addAriaAndCollapsedClass=function(t,n){if(t){var r=e(t).hasClass(f);n.length&&e(n).toggleClass(v,!r).attr("aria-expanded",r)}},r._getTargetFromElement=function(e){var t=s.getSelectorFromElement(e);return t?document.querySelector(t):null},r._jQueryInterface=function(t){return this.each(function(){var o=e(this),s=o.data(n),u=a({},i,o.data(),"object"==typeof t&&t?t:{});if(!s&&u.toggle&&/show|hide/.test(t)&&(u.toggle=!1),s||(s=new r(this,u),o.data(n,s)),"string"==typeof t){if(void 0===s[t])throw new TypeError('No method named "'+t+'"');s[t]()}})},o(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return i}}]),r}();return e(document).on(d,x.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var r=e(this),o=s.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(o));e(i).each(function(){var t=e(this),o=t.data(n)?"toggle":r.data();w._jQueryInterface.call(t,o)})}),e.fn[t]=w._jQueryInterface,e.fn[t].Constructor=w,e.fn[t].noConflict=function(){return e.fn[t]=r,w._jQueryInterface},w}(t),h=function(e){var t="dropdown",r="bs.dropdown",i="."+r,u=e.fn[t],c=new RegExp("38|40|27"),l={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,CLICK:"click"+i,CLICK_DATA_API:"click.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api",KEYUP_DATA_API:"keyup.bs.dropdown.data-api"},p="disabled",h="show",d="dropup",f="dropright",m="dropleft",g="dropdown-menu-right",v="position-static",y='[data-toggle="dropdown"]',b=".dropdown form",x=".dropdown-menu",w=".navbar-nav",E=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",T="top-start",_="top-end",S="bottom-start",k="bottom-end",O="right-start",C="left-start",A={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},N={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},D=function(){function u(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var b=u.prototype;return b.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass(p)){var t=u._getParentFromElement(this._element),r=e(this._menu).hasClass(h);if(u._clearMenus(),!r){var o={relatedTarget:this._element},i=e.Event(l.SHOW,o);if(e(t).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if(void 0===n)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var a=this._element;"parent"===this._config.reference?a=t:s.isElement(this._config.reference)&&(a=this._config.reference,void 0!==this._config.reference.jquery&&(a=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(t).addClass(v),this._popper=new n(a,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(t).closest(w).length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass(h),e(t).toggleClass(h).trigger(e.Event(l.SHOWN,o))}}}},b.dispose=function(){e.removeData(this._element,r),e(this._element).off(i),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},b.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},b._addEventListeners=function(){var t=this;e(this._element).on(l.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},b._getConfig=function(n){return n=a({},this.constructor.Default,e(this._element).data(),n),s.typeCheckConfig(t,n,this.constructor.DefaultType),n},b._getMenuElement=function(){if(!this._menu){var e=u._getParentFromElement(this._element);e&&(this._menu=e.querySelector(x))}return this._menu},b._getPlacement=function(){var t=e(this._element.parentNode),n=S;return t.hasClass(d)?(n=T,e(this._menu).hasClass(g)&&(n=_)):t.hasClass(f)?n=O:t.hasClass(m)?n=C:e(this._menu).hasClass(g)&&(n=k),n},b._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},b._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=a({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},u._jQueryInterface=function(t){return this.each(function(){var n=e(this).data(r);if(n||(n=new u(this,"object"==typeof t?t:null),e(this).data(r,n)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var n=[].slice.call(document.querySelectorAll(y)),o=0,i=n.length;o<i;o++){var a=u._getParentFromElement(n[o]),s=e(n[o]).data(r),c={relatedTarget:n[o]};if(t&&"click"===t.type&&(c.clickEvent=t),s){var p=s._menu;if(e(a).hasClass(h)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&e.contains(a,t.target))){var d=e.Event(l.HIDE,c);e(a).trigger(d),d.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),n[o].setAttribute("aria-expanded","false"),e(p).removeClass(h),e(a).removeClass(h).trigger(e.Event(l.HIDDEN,c)))}}}},u._getParentFromElement=function(e){var t,n=s.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||e(t.target).closest(x).length)):c.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!e(this).hasClass(p))){var n=u._getParentFromElement(this),r=e(n).hasClass(h);if((r||27===t.which&&32===t.which)&&(!r||27!==t.which&&32!==t.which)){var o=[].slice.call(n.querySelectorAll(E));if(0!==o.length){var i=o.indexOf(t.target);38===t.which&&i>0&&i--,40===t.which&&i<o.length-1&&i++,i<0&&(i=0),o[i].focus()}}else{if(27===t.which){var a=n.querySelector(y);e(a).trigger("focus")}e(this).trigger("click")}}},o(u,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return A}},{key:"DefaultType",get:function(){return N}}]),u}();return e(document).on(l.KEYDOWN_DATA_API,y,D._dataApiKeydownHandler).on(l.KEYDOWN_DATA_API,x,D._dataApiKeydownHandler).on(l.CLICK_DATA_API+" "+l.KEYUP_DATA_API,D._clearMenus).on(l.CLICK_DATA_API,y,function(t){t.preventDefault(),t.stopPropagation(),D._jQueryInterface.call(e(this),"toggle")}).on(l.CLICK_DATA_API,b,function(e){e.stopPropagation()}),e.fn[t]=D._jQueryInterface,e.fn[t].Constructor=D,e.fn[t].noConflict=function(){return e.fn[t]=u,D._jQueryInterface},D}(t),d=function(e){var t=e.fn.modal,n={backdrop:!0,keyboard:!0,focus:!0,show:!0},r={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},i="hide.bs.modal",u="hidden.bs.modal",c="show.bs.modal",l="shown.bs.modal",p="focusin.bs.modal",h="resize.bs.modal",d="click.dismiss.bs.modal",f="keydown.dismiss.bs.modal",m="mouseup.dismiss.bs.modal",g="mousedown.dismiss.bs.modal",v="click.bs.modal.data-api",y="modal-scrollbar-measure",b="modal-backdrop",x="modal-open",w="fade",E="show",T={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},_=function(){function t(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(T.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var v=t.prototype;return v.toggle=function(e){return this._isShown?this.hide():this.show(e)},v.show=function(t){var n=this;if(!this._isTransitioning&&!this._isShown){e(this._element).hasClass(w)&&(this._isTransitioning=!0);var r=e.Event(c,{relatedTarget:t});e(this._element).trigger(r),this._isShown||r.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),e(document.body).addClass(x),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(d,T.DATA_DISMISS,function(e){return n.hide(e)}),e(this._dialog).on(g,function(){e(n._element).one(m,function(t){e(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(t)}))}},v.hide=function(t){var n=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var r=e.Event(i);if(e(this._element).trigger(r),this._isShown&&!r.isDefaultPrevented()){this._isShown=!1;var o=e(this._element).hasClass(w);if(o&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(p),e(this._element).removeClass(E),e(this._element).off(d),e(this._dialog).off(g),o){var a=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(e){return n._hideModal(e)}).emulateTransitionEnd(a)}else this._hideModal()}}},v.dispose=function(){e.removeData(this._element,"bs.modal"),e(window,document,this._element,this._backdrop).off(".bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},v.handleUpdate=function(){this._adjustDialog()},v._getConfig=function(e){return e=a({},n,e),s.typeCheckConfig("modal",e,r),e},v._showElement=function(t){var n=this,r=e(this._element).hasClass(w);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,r&&s.reflow(this._element),e(this._element).addClass(E),this._config.focus&&this._enforceFocus();var o=e.Event(l,{relatedTarget:t}),i=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,e(n._element).trigger(o)};if(r){var a=s.getTransitionDurationFromElement(this._element);e(this._dialog).one(s.TRANSITION_END,i).emulateTransitionEnd(a)}else i()},v._enforceFocus=function(){var t=this;e(document).off(p).on(p,function(n){document!==n.target&&t._element!==n.target&&0===e(t._element).has(n.target).length&&t._element.focus()})},v._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(f,function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||e(this._element).off(f)},v._setResizeEvent=function(){var t=this;this._isShown?e(window).on(h,function(e){return t.handleUpdate(e)}):e(window).off(h)},v._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass(x),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(u)})},v._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},v._showBackdrop=function(t){var n=this,r=e(this._element).hasClass(w)?w:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=b,r&&this._backdrop.classList.add(r),e(this._backdrop).appendTo(document.body),e(this._element).on(d,function(e){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),r&&s.reflow(this._backdrop),e(this._backdrop).addClass(E),!t)return;if(!r)return void t();var o=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,t).emulateTransitionEnd(o)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(E);var i=function(){n._removeBackdrop(),t&&t()};if(e(this._element).hasClass(w)){var a=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,i).emulateTransitionEnd(a)}else i()}else t&&t()},v._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},v._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},v._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},v._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var n=[].slice.call(document.querySelectorAll(T.FIXED_CONTENT)),r=[].slice.call(document.querySelectorAll(T.STICKY_CONTENT));e(n).each(function(n,r){var o=r.style.paddingRight,i=e(r).css("padding-right");e(r).data("padding-right",o).css("padding-right",parseFloat(i)+t._scrollbarWidth+"px")}),e(r).each(function(n,r){var o=r.style.marginRight,i=e(r).css("margin-right");e(r).data("margin-right",o).css("margin-right",parseFloat(i)-t._scrollbarWidth+"px")});var o=document.body.style.paddingRight,i=e(document.body).css("padding-right");e(document.body).data("padding-right",o).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}},v._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(T.FIXED_CONTENT));e(t).each(function(t,n){var r=e(n).data("padding-right");e(n).removeData("padding-right"),n.style.paddingRight=r||""});var n=[].slice.call(document.querySelectorAll(""+T.STICKY_CONTENT));e(n).each(function(t,n){var r=e(n).data("margin-right");void 0!==r&&e(n).css("margin-right",r).removeData("margin-right")});var r=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=r||""},v._getScrollbarWidth=function(){var e=document.createElement("div");e.className=y,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},t._jQueryInterface=function(r,o){return this.each(function(){var i=e(this).data("bs.modal"),s=a({},n,e(this).data(),"object"==typeof r&&r?r:{});if(i||(i=new t(this,s),e(this).data("bs.modal",i)),"string"==typeof r){if(void 0===i[r])throw new TypeError('No method named "'+r+'"');i[r](o)}else s.show&&i.show(o)})},o(t,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return n}}]),t}();return e(document).on(v,T.DATA_TOGGLE,function(t){var n,r=this,o=s.getSelectorFromElement(this);o&&(n=document.querySelector(o));var i=e(n).data("bs.modal")?"toggle":a({},e(n).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var l=e(n).one(c,function(t){t.isDefaultPrevented()||l.one(u,function(){e(r).is(":visible")&&r.focus()})});_._jQueryInterface.call(e(n),i,this)}),e.fn.modal=_._jQueryInterface,e.fn.modal.Constructor=_,e.fn.modal.noConflict=function(){return e.fn.modal=t,_._jQueryInterface},_}(t),f=function(e){var t="tooltip",r=".bs.tooltip",i=e.fn[t],u=new RegExp("(^|\\s)bs-tooltip\\S+","g"),c={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},l={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},p={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},h="show",d="out",f={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},m="fade",g="show",v=".tooltip-inner",y=".arrow",b="hover",x="focus",w="click",E="manual",T=function(){function i(e,t){if(void 0===n)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var T=i.prototype;return T.enable=function(){this._isEnabled=!0},T.disable=function(){this._isEnabled=!1},T.toggleEnabled=function(){this._isEnabled=!this._isEnabled},T.toggle=function(t){if(this._isEnabled)if(t){var n=this.constructor.DATA_KEY,r=e(t.currentTarget).data(n);r||(r=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,r)),r._activeTrigger.click=!r._activeTrigger.click,r._isWithActiveTrigger()?r._enter(null,r):r._leave(null,r)}else{if(e(this.getTipElement()).hasClass(g))return void this._leave(null,this);this._enter(null,this)}},T.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},T.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var r=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(r);var o=e.contains(this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!o)return;var i=this.getTipElement(),a=s.getUID(this.constructor.NAME);i.setAttribute("id",a),this.element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&e(i).addClass(m);var u="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,c=this._getAttachment(u);this.addAttachmentClass(c);var l=!1===this.config.container?document.body:e(document).find(this.config.container);e(i).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(i).appendTo(l),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,i,{placement:c,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:y},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){t._handlePopperPlacementChange(e)}}),e(i).addClass(g),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var p=function(){t.config.animation&&t._fixTransition();var n=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),n===d&&t._leave(null,t)};if(e(this.tip).hasClass(m)){var h=s.getTransitionDurationFromElement(this.tip);e(this.tip).one(s.TRANSITION_END,p).emulateTransitionEnd(h)}else p()}},T.hide=function(t){var n=this,r=this.getTipElement(),o=e.Event(this.constructor.Event.HIDE),i=function(){n._hoverState!==h&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()};if(e(this.element).trigger(o),!o.isDefaultPrevented()){if(e(r).removeClass(g),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger[w]=!1,this._activeTrigger[x]=!1,this._activeTrigger[b]=!1,e(this.tip).hasClass(m)){var a=s.getTransitionDurationFromElement(r);e(r).one(s.TRANSITION_END,i).emulateTransitionEnd(a)}else i();this._hoverState=""}},T.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},T.isWithContent=function(){return Boolean(this.getTitle())},T.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},T.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},T.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(v)),this.getTitle()),e(t).removeClass(m+" "+g)},T.setElementContent=function(t,n){var r=this.config.html;"object"==typeof n&&(n.nodeType||n.jquery)?r?e(n).parent().is(t)||t.empty().append(n):t.text(e(n).text()):t[r?"html":"text"](n)},T.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},T._getAttachment=function(e){return l[e.toUpperCase()]},T._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if(n!==E){var r=n===b?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o=n===b?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(r,t.config.selector,function(e){return t._enter(e)}).on(o,t.config.selector,function(e){return t._leave(e)})}e(t.element).closest(".modal").on("hide.bs.modal",function(){return t.hide()})}),this.config.selector?this.config=a({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},T._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},T._enter=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusin"===t.type?x:b]=!0),e(n.getTipElement()).hasClass(g)||n._hoverState===h?n._hoverState=h:(clearTimeout(n._timeout),n._hoverState=h,n.config.delay&&n.config.delay.show?n._timeout=setTimeout(function(){n._hoverState===h&&n.show()},n.config.delay.show):n.show())},T._leave=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusout"===t.type?x:b]=!1),n._isWithActiveTrigger()||(clearTimeout(n._timeout),n._hoverState=d,n.config.delay&&n.config.delay.hide?n._timeout=setTimeout(function(){n._hoverState===d&&n.hide()},n.config.delay.hide):n.hide())},T._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},T._getConfig=function(n){return"number"==typeof(n=a({},this.constructor.Default,e(this.element).data(),"object"==typeof n&&n?n:{})).delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),s.typeCheckConfig(t,n,this.constructor.DefaultType),n},T._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},T._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(u);null!==n&&n.length&&t.removeClass(n.join(""))},T._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},T._fixTransition=function(){var t=this.getTipElement(),n=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(m),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},i._jQueryInterface=function(t){return this.each(function(){var n=e(this).data("bs.tooltip"),r="object"==typeof t&&t;if((n||!/dispose|hide/.test(t))&&(n||(n=new i(this,r),e(this).data("bs.tooltip",n)),"string"==typeof t)){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return p}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return f}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return c}}]),i}();return e.fn[t]=T._jQueryInterface,e.fn[t].Constructor=T,e.fn[t].noConflict=function(){return e.fn[t]=i,T._jQueryInterface},T}(t),m=function(e){var t="popover",n=".bs.popover",r=e.fn[t],i=new RegExp("(^|\\s)bs-popover\\S+","g"),s=a({},f.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),u=a({},f.DefaultType,{content:"(string|element|function)"}),c="fade",l="show",p=".popover-header",h=".popover-body",d={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,INSERTED:"inserted"+n,CLICK:"click"+n,FOCUSIN:"focusin"+n,FOCUSOUT:"focusout"+n,MOUSEENTER:"mouseenter"+n,MOUSELEAVE:"mouseleave"+n},m=function(r){function a(){return r.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(a,r);var f=a.prototype;return f.isWithContent=function(){return this.getTitle()||this._getContent()},f.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},f.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},f.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(p),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(t.find(h),n),t.removeClass(c+" "+l)},f._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},f._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(i);null!==n&&n.length>0&&t.removeClass(n.join(""))},a._jQueryInterface=function(t){return this.each(function(){var n=e(this).data("bs.popover"),r="object"==typeof t?t:null;if((n||!/destroy|hide/.test(t))&&(n||(n=new a(this,r),e(this).data("bs.popover",n)),"string"==typeof t)){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},o(a,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return s}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return d}},{key:"EVENT_KEY",get:function(){return n}},{key:"DefaultType",get:function(){return u}}]),a}(f);return e.fn[t]=m._jQueryInterface,e.fn[t].Constructor=m,e.fn[t].noConflict=function(){return e.fn[t]=r,m._jQueryInterface},m}(t),g=function(e){var t="scrollspy",n=e.fn[t],r={offset:10,method:"auto",target:""},i={offset:"number",method:"string",target:"(string|element)"},u={ACTIVATE:"activate.bs.scrollspy",SCROLL:"scroll.bs.scrollspy",LOAD_DATA_API:"load.bs.scrollspy.data-api"},c="dropdown-item",l="active",p={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},h="offset",d="position",f=function(){function n(t,n){var r=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(n),this._selector=this._config.target+" "+p.NAV_LINKS+","+this._config.target+" "+p.LIST_ITEMS+","+this._config.target+" "+p.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(u.SCROLL,function(e){return r._process(e)}),this.refresh(),this._process()}var f=n.prototype;return f.refresh=function(){var t=this,n=this._scrollElement===this._scrollElement.window?h:d,r="auto"===this._config.method?n:this._config.method,o=r===d?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var n,i=s.getSelectorFromElement(t);if(i&&(n=document.querySelector(i)),n){var a=n.getBoundingClientRect();if(a.width||a.height)return[e(n)[r]().top+o,i]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},f.dispose=function(){e.removeData(this._element,"bs.scrollspy"),e(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},f._getConfig=function(n){if("string"!=typeof(n=a({},r,"object"==typeof n&&n?n:{})).target){var o=e(n.target).attr("id");o||(o=s.getUID(t),e(n.target).attr("id",o)),n.target="#"+o}return s.typeCheckConfig(t,n,i),n},f._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},f._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},f._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},f._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&e>=this._offsets[o]&&(void 0===this._offsets[o+1]||e<this._offsets[o+1])&&this._activate(this._targets[o])}}},f._activate=function(t){this._activeTarget=t,this._clear();var n=this._selector.split(",");n=n.map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'});var r=e([].slice.call(document.querySelectorAll(n.join(","))));r.hasClass(c)?(r.closest(p.DROPDOWN).find(p.DROPDOWN_TOGGLE).addClass(l),r.addClass(l)):(r.addClass(l),r.parents(p.NAV_LIST_GROUP).prev(p.NAV_LINKS+", "+p.LIST_ITEMS).addClass(l),r.parents(p.NAV_LIST_GROUP).prev(p.NAV_ITEMS).children(p.NAV_LINKS).addClass(l)),e(this._scrollElement).trigger(u.ACTIVATE,{relatedTarget:t})},f._clear=function(){var t=[].slice.call(document.querySelectorAll(this._selector));e(t).filter(p.ACTIVE).removeClass(l)},n._jQueryInterface=function(t){return this.each(function(){var r=e(this).data("bs.scrollspy");if(r||(r=new n(this,"object"==typeof t&&t),e(this).data("bs.scrollspy",r)),"string"==typeof t){if(void 0===r[t])throw new TypeError('No method named "'+t+'"');r[t]()}})},o(n,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return r}}]),n}();return e(window).on(u.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(p.DATA_SPY)),n=t.length;n--;){var r=e(t[n]);f._jQueryInterface.call(r,r.data())}}),e.fn[t]=f._jQueryInterface,e.fn[t].Constructor=f,e.fn[t].noConflict=function(){return e.fn[t]=n,f._jQueryInterface},f}(t),v=function(e){var t=e.fn.tab,n="hide.bs.tab",r="hidden.bs.tab",i="show.bs.tab",a="shown.bs.tab",u="click.bs.tab.data-api",c="dropdown-menu",l="active",p="disabled",h="fade",d="show",f=".dropdown",m=".nav, .list-group",g=".active",v="> li > .active",y='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',b=".dropdown-toggle",x="> .dropdown-menu .active",w=function(){function t(e){this._element=e}var u=t.prototype;return u.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(l)||e(this._element).hasClass(p))){var o,u,c=e(this._element).closest(m)[0],h=s.getSelectorFromElement(this._element);if(c){var d="UL"===c.nodeName?v:g;u=(u=e.makeArray(e(c).find(d)))[u.length-1]}var f=e.Event(n,{relatedTarget:this._element}),y=e.Event(i,{relatedTarget:u});if(u&&e(u).trigger(f),e(this._element).trigger(y),!y.isDefaultPrevented()&&!f.isDefaultPrevented()){h&&(o=document.querySelector(h)),this._activate(this._element,c);var b=function(){var n=e.Event(r,{relatedTarget:t._element}),o=e.Event(a,{relatedTarget:u});e(u).trigger(n),e(t._element).trigger(o)};o?this._activate(o,o.parentNode,b):b()}}},u.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},u._activate=function(t,n,r){var o=this,i=("UL"===n.nodeName?e(n).find(v):e(n).children(g))[0],a=r&&i&&e(i).hasClass(h),u=function(){return o._transitionComplete(t,i,r)};if(i&&a){var c=s.getTransitionDurationFromElement(i);e(i).one(s.TRANSITION_END,u).emulateTransitionEnd(c)}else u()},u._transitionComplete=function(t,n,r){if(n){e(n).removeClass(d+" "+l);var o=e(n.parentNode).find(x)[0];o&&e(o).removeClass(l),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(t).addClass(l),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),s.reflow(t),e(t).addClass(d),t.parentNode&&e(t.parentNode).hasClass(c)){var i=e(t).closest(f)[0];if(i){var a=[].slice.call(i.querySelectorAll(b));e(a).addClass(l)}t.setAttribute("aria-expanded",!0)}r&&r()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),o=r.data("bs.tab");if(o||(o=new t(this),r.data("bs.tab",o)),"string"==typeof n){if(void 0===o[n])throw new TypeError('No method named "'+n+'"');o[n]()}})},o(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(u,y,function(t){t.preventDefault(),w._jQueryInterface.call(e(this),"show")}),e.fn.tab=w._jQueryInterface,e.fn.tab.Constructor=w,e.fn.tab.noConflict=function(){return e.fn.tab=t,w._jQueryInterface},w}(t);(function(e){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")})(t),e.Util=s,e.Alert=u,e.Button=c,e.Carousel=l,e.Collapse=p,e.Dropdown=h,e.Modal=d,e.Popover=m,e.Scrollspy=g,e.Tab=v,e.Tooltip=f,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5),n(80))},function(e,t,n){"use strict";n.r(t),function(e){for(
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.4
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document,r=["Edge","Trident","Firefox"],o=0,i=0;i<r.length;i+=1)if(n&&navigator.userAgent.indexOf(r[i])>=0){o=1;break}var a=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},o))}};function s(e){return e&&"[object Function]"==={}.toString.call(e)}function u(e,t){if(1!==e.nodeType)return[];var n=getComputedStyle(e,null);return t?n[t]:n}function c(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function l(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=u(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(n+o+r)?e:l(c(e))}var p=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function d(e){return 11===e?p:10===e?h:p||h}function f(e){if(!e)return document.documentElement;for(var t=d(10)?document.body:null,n=e.offsetParent;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===u(n,"position")?f(n):n:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function g(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,o=n?t:e,i=document.createRange();i.setStart(r,0),i.setEnd(o,0);var a=i.commonAncestorContainer;if(e!==a&&t!==a||r.contains(o))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||f(e.firstElementChild)===e)}(a)?a:f(a);var s=m(e);return s.host?g(s.host,t):g(e,m(t).host)}function v(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function y(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],d(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function x(e){var t=e.body,n=e.documentElement,r=d(10)&&getComputedStyle(n);return{height:b("Height",t,n,r),width:b("Width",t,n,r)}}var w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e){return _({},e,{right:e.left+e.width,bottom:e.top+e.height})}function k(e){var t={};try{if(d(10)){t=e.getBoundingClientRect();var n=v(e,"top"),r=v(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===e.nodeName?x(e.ownerDocument):{},a=i.width||e.clientWidth||o.right-o.left,s=i.height||e.clientHeight||o.bottom-o.top,c=e.offsetWidth-a,l=e.offsetHeight-s;if(c||l){var p=u(e);c-=y(p,"x"),l-=y(p,"y"),o.width-=c,o.height-=l}return S(o)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d(10),o="HTML"===t.nodeName,i=k(e),a=k(t),s=l(e),c=u(t),p=parseFloat(c.borderTopWidth,10),h=parseFloat(c.borderLeftWidth,10);n&&o&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=S({top:i.top-a.top-p,left:i.left-a.left-h,width:i.width,height:i.height});if(f.marginTop=0,f.marginLeft=0,!r&&o){var m=parseFloat(c.marginTop,10),g=parseFloat(c.marginLeft,10);f.top-=p-m,f.bottom-=p-m,f.left-=h-g,f.right-=h-g,f.marginTop=m,f.marginLeft=g}return(r&&!n?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(t,"top"),o=v(t,"left"),i=n?-1:1;return e.top+=r*i,e.bottom+=r*i,e.left+=o*i,e.right+=o*i,e}(f,t)),f}function C(e){if(!e||!e.parentElement||d())return document.documentElement;for(var t=e.parentElement;t&&"none"===u(t,"transform");)t=t.parentElement;return t||document.documentElement}function A(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},a=o?C(e):g(e,t);if("viewport"===r)i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=O(e,n),o=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:v(n),s=t?0:v(n,"left");return S({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:o,height:i})}(a,o);else{var s=void 0;"scrollParent"===r?"BODY"===(s=l(c(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===r?e.ownerDocument.documentElement:r;var p=O(s,a,o);if("HTML"!==s.nodeName||function e(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===u(t,"position")||e(c(t)))}(a))i=p;else{var h=x(e.ownerDocument),d=h.height,f=h.width;i.top+=p.top-p.marginTop,i.bottom=d+p.top,i.left+=p.left-p.marginLeft,i.right=f+p.left}}var m="number"==typeof(n=n||0);return i.left+=m?n:n.left||0,i.top+=m?n:n.top||0,i.right-=m?n:n.right||0,i.bottom-=m?n:n.bottom||0,i}function N(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=A(n,r,i,o),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},u=Object.keys(s).map(function(e){return _({key:e},s[e],{area:function(e){return e.width*e.height}(s[e])})}).sort(function(e,t){return t.area-e.area}),c=u.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),l=c.length>0?c[0].key:u[0].key,p=e.split("-")[1];return l+(p?"-"+p:"")}function D(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O(n,r?C(t):g(t,n),r)}function M(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function R(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function P(e,t,n){n=n.split("-")[0];var r=M(e),o={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),a=i?"top":"left",s=i?"left":"top",u=i?"height":"width",c=i?"width":"height";return o[a]=t[a]+t[u]/2-r[u]/2,o[s]=n===s?t[s]-r[c]:t[R(s)],o}function I(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function L(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=I(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&s(n)&&(t.offsets.popper=S(t.offsets.popper),t.offsets.reference=S(t.offsets.reference),t=n(t,e))}),t}function B(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function F(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var o=t[r],i=o?""+o+n:e;if(void 0!==document.body.style[i])return i}return null}function j(e){var t=e.ownerDocument;return t?t.defaultView:window}function z(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function V(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&z(t[n])&&(r="px"),e.style[n]=t[n]+r})}function U(e,t,n){var r=I(e,function(e){return e.name===t}),o=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!o){var i="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}var G=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],q=G.slice(3);function W(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q.indexOf(e),r=q.slice(n+1).concat(q.slice(0,n));return t?r.reverse():r}var H="flip",X="clockwise",K="counterclockwise";var Q={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var o=e.offsets,i=o.reference,a=o.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",c=s?"width":"height",l={start:T({},u,i[u]),end:T({},u,i[u]+i[c]-a[c])};e.offsets.popper=_({},a,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n,r=t.offset,o=e.placement,i=e.offsets,a=i.popper,s=i.reference,u=o.split("-")[0];return n=z(+r)?[+r,0]:function(e,t,n,r){var o=[0,0],i=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=a.indexOf(I(a,function(e){return-1!==e.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return(c=c.map(function(e,r){var o=(1===r?!i:i)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],a=o[2];if(!i)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return S(s)[t]/100*i}return"vh"===a||"vw"===a?("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i:i}(e,o,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){z(n)&&(o[t]+=n*("-"===e[r-1]?-1:1))})}),o}(r,a,s,u),"left"===u?(a.top+=n[0],a.left-=n[1]):"right"===u?(a.top+=n[0],a.left+=n[1]):"top"===u?(a.left+=n[0],a.top-=n[1]):"bottom"===u&&(a.left+=n[0],a.top+=n[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||f(e.instance.popper);e.instance.reference===n&&(n=f(n));var r=F("transform"),o=e.instance.popper.style,i=o.top,a=o.left,s=o[r];o.top="",o.left="",o[r]="";var u=A(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);o.top=i,o.left=a,o[r]=s,t.boundaries=u;var c=t.priority,l=e.offsets.popper,p={primary:function(e){var n=l[e];return l[e]<u[e]&&!t.escapeWithReference&&(n=Math.max(l[e],u[e])),T({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=l[n];return l[e]>u[e]&&!t.escapeWithReference&&(r=Math.min(l[n],u[e]-("right"===e?l.width:l.height))),T({},n,r)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=_({},l,p[t](e))}),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,o=e.placement.split("-")[0],i=Math.floor,a=-1!==["top","bottom"].indexOf(o),s=a?"right":"bottom",u=a?"left":"top",c=a?"width":"height";return n[s]<i(r[u])&&(e.offsets.popper[u]=i(r[u])-n[c]),n[u]>i(r[s])&&(e.offsets.popper[u]=i(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!U(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,c=-1!==["left","right"].indexOf(o),l=c?"height":"width",p=c?"Top":"Left",h=p.toLowerCase(),d=c?"left":"top",f=c?"bottom":"right",m=M(r)[l];s[f]-m<a[h]&&(e.offsets.popper[h]-=a[h]-(s[f]-m)),s[h]+m>a[f]&&(e.offsets.popper[h]+=s[h]+m-a[f]),e.offsets.popper=S(e.offsets.popper);var g=s[h]+s[l]/2-m/2,v=u(e.instance.popper),y=parseFloat(v["margin"+p],10),b=parseFloat(v["border"+p+"Width"],10),x=g-e.offsets.popper[h]-y-b;return x=Math.max(Math.min(a[l]-m,x),0),e.arrowElement=r,e.offsets.arrow=(T(n={},h,Math.round(x)),T(n,d,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(B(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=A(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],o=R(r),i=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case H:a=[r,o];break;case X:a=W(r);break;case K:a=W(r,!0);break;default:a=t.behavior}return a.forEach(function(s,u){if(r!==s||a.length===u+1)return e;r=e.placement.split("-")[0],o=R(r);var c=e.offsets.popper,l=e.offsets.reference,p=Math.floor,h="left"===r&&p(c.right)>p(l.left)||"right"===r&&p(c.left)<p(l.right)||"top"===r&&p(c.bottom)>p(l.top)||"bottom"===r&&p(c.top)<p(l.bottom),d=p(c.left)<p(n.left),f=p(c.right)>p(n.right),m=p(c.top)<p(n.top),g=p(c.bottom)>p(n.bottom),v="left"===r&&d||"right"===r&&f||"top"===r&&m||"bottom"===r&&g,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===i&&d||y&&"end"===i&&f||!y&&"start"===i&&m||!y&&"end"===i&&g);(h||v||b)&&(e.flipped=!0,(h||v)&&(r=a[u+1]),b&&(i="end"===i?"start":"start"===i?"end":i),e.placement=r+(i?"-"+i:""),e.offsets.popper=_({},e.offsets.popper,P(e.instance.popper,e.offsets.reference,e.placement)),e=L(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,o=r.popper,i=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return o[a?"left":"top"]=i[n]-(s?o[a?"width":"height"]:0),e.placement=R(t),e.offsets.popper=S(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(!U(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=I(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,o=e.offsets.popper,i=I(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a,s,u=void 0!==i?i:t.gpuAcceleration,c=f(e.instance.popper),l=k(c),p={position:o.position},h={left:Math.floor(o.left),top:Math.round(o.top),bottom:Math.round(o.bottom),right:Math.floor(o.right)},d="bottom"===n?"top":"bottom",m="right"===r?"left":"right",g=F("transform");if(s="bottom"===d?"HTML"===c.nodeName?-c.clientHeight+h.bottom:-l.height+h.bottom:h.top,a="right"===m?"HTML"===c.nodeName?-c.clientWidth+h.right:-l.width+h.right:h.left,u&&g)p[g]="translate3d("+a+"px, "+s+"px, 0)",p[d]=0,p[m]=0,p.willChange="transform";else{var v="bottom"===d?-1:1,y="right"===m?-1:1;p[d]=s*v,p[m]=a*y,p.willChange=d+", "+m}var b={"x-placement":e.placement};return e.attributes=_({},b,e.attributes),e.styles=_({},p,e.styles),e.arrowStyles=_({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return V(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&V(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,o){var i=D(o,t,e,n.positionFixed),a=N(n.placement,i,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),V(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Y=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=a(this.update.bind(this)),this.options=_({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(_({},e.Defaults.modifiers,o.modifiers)).forEach(function(t){r.options.modifiers[t]=_({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return _({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return E(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=D(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=N(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=P(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=L(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,B(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[F("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(e,t,n,r){n.updateBound=r,j(e).addEventListener("resize",n.updateBound,{passive:!0});var o=l(e);return function e(t,n,r,o){var i="BODY"===t.nodeName,a=i?t.ownerDocument.defaultView:t;a.addEventListener(n,r,{passive:!0}),i||e(l(a.parentNode),n,r,o),o.push(a)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return function(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(e,t){return j(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}(this.reference,this.state))}.call(this)}}]),e}();Y.Utils=("undefined"!=typeof window?window:e).PopperUtils,Y.placements=G,Y.Defaults=Q,t.default=Y}.call(this,n(30))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),a=n(164),s=n(168),u=function(){function e(e,t){this.numClasses=e,this.k=t,this.classLogitsMatrices=[],this.classExampleCount=[],this.varsLoaded=!1,this.squashLogitsDenominator=i.scalar(300);for(var n=0;n<this.numClasses;n++)this.classLogitsMatrices.push(null),this.classExampleCount.push(0);this.squeezeNet=new a.SqueezeNet}return e.prototype.load=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.squeezeNet.load()];case 1:return e.sent(),this.varsLoaded=!0,[2]}})})},e.prototype.clearClass=function(e){e>=this.numClasses?console.log("Cannot clear invalid class ${classIndex}"):(this.classLogitsMatrices[e]=null,this.classExampleCount[e]=0,this.clearTrainLogitsMatrix())},e.prototype.addImage=function(e,t){var n=this;this.varsLoaded?(t>=this.numClasses&&console.warn("Cannot add to invalid class ${classIndex}"),this.clearTrainLogitsMatrix(),i.tidy(function(){var r=n.squeezeNet.predict(e),o=n.normalizeVector(r),a=o.shape[0];if(null==n.classLogitsMatrices[t])n.classLogitsMatrices[t]=o.as2D(1,a);else{var s=n.classLogitsMatrices[t].as2D(n.classExampleCount[t],a).concat(o.as2D(1,a),0);n.classLogitsMatrices[t].dispose(),n.classLogitsMatrices[t]=s}i.keep(n.classLogitsMatrices[t]),n.classExampleCount[t]++})):console.warn("Cannot add images until vars have been loaded.")},e.prototype.predict=function(e){var t=this;if(!this.varsLoaded)throw new Error("Cannot predict until vars have been loaded.");return i.tidy(function(){var n=t.squeezeNet.predict(e),r=t.normalizeVector(n),o=r.shape[0];if(null==t.trainLogitsMatrix){for(var a=null,s=0;s<t.numClasses;s++)a=t.concatWithNulls(a,t.classLogitsMatrices[s]);t.trainLogitsMatrix=a}if(null==t.trainLogitsMatrix)return console.warn("Cannot predict without providing training images."),null;i.keep(t.trainLogitsMatrix);var u=t.getNumExamples();return t.trainLogitsMatrix.as2D(u,o).matMul(r.as2D(o,1)).as1D()})},e.prototype.predictClass=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,p,h,d,f,m,g,v,y;return o(this,function(o){switch(o.label){case 0:if(t=-1,n=new Array(this.numClasses),!this.varsLoaded)throw new Error("Cannot predict until vars have been loaded.");return r=this.predict(e).asType("float32"),i=this.getNumExamples(),a=Math.min(this.k,i),l=(c=s).topK,[4,r.data()];case 1:if(u=l.apply(c,[o.sent(),a]),r.dispose(),null==(p=u.indices))return[2,{classIndex:t,confidences:n}];for(h=[],d=[],v=0;v<this.numClasses;v++)d.push(0),f=this.classExampleCount[v],v>0&&(f+=h[v-1]),h.push(f);for(v=0;v<p.length;v++)for(m=0;m<h.length;m++)if(p[v]<h[m]){d[m]++;break}for(g=0,v=0;v<this.numClasses;v++)(y=d[v]/a)>g&&(g=y,t=v),n[v]=y;return[2,{classIndex:t,confidences:n}]}})})},e.prototype.getClassExampleCount=function(){return this.classExampleCount},e.prototype.getClassLogitsMatrices=function(){return this.classLogitsMatrices},e.prototype.setClassLogitsMatrices=function(e){this.classLogitsMatrices=e,this.classExampleCount=e.map(function(e){return null!=e?e.shape[0]:0}),this.clearTrainLogitsMatrix()},e.prototype.clearTrainLogitsMatrix=function(){null!=this.trainLogitsMatrix&&(this.trainLogitsMatrix.dispose(),this.trainLogitsMatrix=null)},e.prototype.concatWithNulls=function(e,t){return null==e&&null==t?null:null==e?t.clone():null===t?e.clone():e.concat(t,0)},e.prototype.normalizeVector=function(e){var t=i.div(e,this.squashLogitsDenominator),n=t.square().sum().sqrt();return i.div(t,n)},e.prototype.getNumExamples=function(){for(var e=0,t=0;t<this.classExampleCount.length;t++)e+=this.classExampleCount[t];return e},e.prototype.dispose=function(){this.squeezeNet.dispose(),this.clearTrainLogitsMatrix(),this.classLogitsMatrices.forEach(function(e){return e.dispose()}),this.squashLogitsDenominator.dispose()},e}();t.KNNImageClassifier=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=function(){function e(){}return e.nextFrame=function(){return new Promise(function(e){return requestAnimationFrame(function(){return e()})})},r([o.doc({heading:"Performance",subheading:"Timing"})],e,"nextFrame",null),e}();t.BrowserUtil=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.Dataset=r.Dataset;var o=n(25);t.datasetFromElements=o.datasetFromElements;var i=n(102);t.CSVDataset=i.CSVDataset;var a=n(61);t.TextLineDataset=a.TextLineDataset;var s=n(103);t.FileDataSource=s.FileDataSource;var u=n(106);t.URLDataSource=u.URLDataSource},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new function(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.alea=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new function(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor128=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorwow=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorshift7=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor4096=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=s:n(9)&&n(15)?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.tychei=s}(0,"object"==typeof e&&e,n(9))}).call(this,n(14)(e))},function(e,t,n){var r;!function(o,i){var a,s=this,u=256,c=6,l="random",p=i.pow(u,c),h=i.pow(2,52),d=2*h,f=u-1;function m(e,t,n){var r=[],m=v(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(o)]}}():e,3),r),b=new function(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=f&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=f&o+1],n=n*u+a[f&(a[o]=a[i=f&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(u)}(r),x=function(){for(var e=b.g(c),t=p,n=0;e<h;)e=(e+n)*u,t*=u,n=b.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,v(y(b.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,b),e.state=function(){return g(b,{})}),n?(i[l]=e,t):e})(x,m,"global"in t?t.global:this==i,t.state)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[f&o]=f&(n^=19*t[f&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+l]=m,v(i.random(),o),"object"==typeof e&&e.exports){e.exports=m;try{a=n(91)}catch(e){}}else void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),a=n(2),s=n(3),u=n(0),c=function(){function e(){}return e.gradScope=function(e,t){return a.tidy(e,t,!0)},e.grad=function(e){return u.assert(u.isFunction(e),"The f passed in grad(f) must be a function"),function(t,n){u.assert(t instanceof s.Tensor,"The x passed in grad(f)(x) must be a tensor"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in grad(f)(x, dy) must be a tensor");var r=i.ENV.engine.gradients(function(){return e(t)},[t],n),o=r.value,a=r.grads;return null!=n&&u.assertShapesMatch(o.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),o.dispose(),l(a),a[0]}},e.grads=function(e){return u.assert(u.isFunction(e),"The f passed in grads(f) must be a function"),function(t,n){u.assert(Array.isArray(t)&&t.every(function(e){return e instanceof s.Tensor}),"The args passed in grads(f)(args) must be an array of tensors"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in grads(f)(args, dy) must be a tensor");var r=i.ENV.engine.gradients(function(){return e.apply(void 0,t)},t,n),o=r.value,a=r.grads;return null!=n&&u.assertShapesMatch(o.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),o.dispose(),l(a),a}},e.valueAndGrad=function(e){return u.assert(u.isFunction(e),"The f passed in valueAndGrad(f) must be a function"),function(t,n){u.assert(t instanceof s.Tensor,"The x passed in valueAndGrad(f)(x) must be a tensor"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var r=i.ENV.engine.gradients(function(){return e(t)},[t],n),o=r.grads,a=r.value;return l(o),{grad:o[0],value:a}}},e.valueAndGrads=function(e){return u.assert(u.isFunction(e),"The f passed in valueAndGrads(f) must be a function"),function(t,n){u.assert(Array.isArray(t)&&t.every(function(e){return e instanceof s.Tensor}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var r=i.ENV.engine.gradients(function(){return e.apply(void 0,t)},t,n);return null!=n&&u.assertShapesMatch(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),l(r.grads),r}},e.variableGrads=function(e,t){if(u.assert(u.isFunction(e),"The f passed in variableGrads(f) must be a function"),u.assert(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof s.Variable}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==t)for(var n in t=[],i.ENV.engine.registeredVariables)t.push(i.ENV.engine.registeredVariables[n]);var r=t.length;t=t.filter(function(e){return e.trainable}),u.assert(t.length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var o=i.ENV.engine.gradients(e,t,null,!0),a=o.value,c=o.grads;u.assert(c.some(function(e){return null!=e}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),u.assert(0===a.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor");var l={};return t.forEach(function(e,t){null!=c[t]&&(l[e.name]=c[t])}),{value:a,grads:l}},e.customGrad=function(e){return i.ENV.engine.customGrad(e)},r([o.doc({heading:"Training",subheading:"Gradients"})],e,"grad",null),r([o.doc({heading:"Training",subheading:"Gradients"})],e,"grads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],e,"valueAndGrad",null),r([o.doc({heading:"Training",subheading:"Gradients"})],e,"valueAndGrads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],e,"variableGrads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],e,"customGrad",null),e}();function l(e){if(e.filter(function(e){return null==e}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}t.Gradients=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(6),u=n(97),c=n(98),l=n(3),p=n(0),h=function(){function e(e,t,n){this.backend=e,this.customBackend=t,this.safeMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.activeScope={keep:[],track:[]},this.scopeStack=[this.activeScope],this.profiler=new u.Profiler(e)}return e.prototype.runKernel=function(e,t,n){var r,o=this,a=[],s=function(e){return a.push(e),e},u=this.activeScope.name;if(r=i.ENV.get("DEBUG")?this.profiler.profileKernel(u,function(){return e(o.backend,s)}):e(this.backend,s),null!=this.activeTape&&0===this.customGradientDepth){var c={id:this.nextTapeNodeId++,name:u,inputs:t,output:r};null!=n&&(c.gradient=function(e){return n(e,a)}),this.activeTape.push(c)}return r},e.prototype.registerTensor=function(e){var t=this.refCounter.has(e.dataId)?this.refCounter.get(e.dataId):0;this.numTensors++,0===t&&(this.numDataBuffers++,this.numBytes+=p.sizeFromShape(e.shape)*p.bytesPerElement(e.dtype),this.backend.register(e.dataId,e.shape,e.dtype)),this.refCounter.set(e.dataId,t+1),e instanceof l.Variable||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.refCounter.has(e.dataId)){this.numTensors--;var t=this.refCounter.get(e.dataId);t<=1?(this.refCounter.delete(e.dataId),this.backend.disposeData(e.dataId),this.numDataBuffers--,this.numBytes-=p.sizeFromShape(e.shape)*p.bytesPerElement(e.dtype)):this.refCounter.set(e.dataId,t-1)}},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,e},e.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach(function(e,t){r[t]=e});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,output:t,gradient:function(e){var t={};return n(e).forEach(function(e,n){t[n]=function(){return e}}),t}};this.activeTape.push(o)},e.prototype.keep=function(e){if(1===this.scopeStack.length&&i.ENV.engine.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside dl.tidy(): dl.tidy(() => {...}) to avoid memory leaks.");return this.activeScope.keep.push(e),e},e.prototype.startScope=function(e,t){void 0===t&&(t=!1),t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var n={keep:[],track:[]};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},e.prototype.endScope=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=this.activeScope.keep,o=p.extractTensorsFromContainer(e);r=r.concat(o);for(var i=0;i<this.activeScope.track.length;i++){var a=this.activeScope.track[i];p.isTensorInList(a,r)||(null!=this.activeTape?o.push(a):a.dispose())}this.scopeStack.pop(),this.activeScope=0===this.scopeStack.length?{keep:[],track:[]}:this.scopeStack[this.scopeStack.length-1],o.forEach(function(e){p.isTensorInList(e,n.activeScope.keep)||n.track(e)})},e.prototype.dispose=function(){this.customBackend&&this.backend.dispose()},e.prototype.gradients=function(e,t,n,r){var o=this;return void 0===r&&(r=!1),p.assert(t.length>0,"gradients() received an empty list of xs."),a.tidy("gradients",function(){var i=e();p.assert(i instanceof l.Tensor,"The result y returned by f() must be a tensor.");var a=c.getFilteredNodesXToY(o.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var u={};return u[i.id]=null==n?s.ones(i.shape):n,c.backpropagateGradients(u,a),{value:i,grads:t.map(function(e){return u[e.id]})}},!0)},e.prototype.customGrad=function(e){var t=this;return p.assert(p.isFunction(e),"The f passed in customGrad(f) must be a function."),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];p.assert(r.every(function(e){return e instanceof l.Tensor}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),t.customGradientDepth++;var i=a.tidy(e.name,function(){var t=e.apply(void 0,r),o=t.value,i=t.gradFunc;return p.assert(o instanceof l.Tensor,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),p.assert(p.isFunction(i),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=i,o},!0);return t.customGradientDepth--,t.shouldRecord()&&t.addTapeNode(r,i,function(e){var t=n(e),o=Array.isArray(t)?t:[t];return p.assert(o.length===r.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),p.assert(o.every(function(e){return e instanceof l.Tensor}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),o}),i}},e.prototype.write=function(e,t){this.backend.write(e,t)},e.prototype.readSync=function(e){return this.backend.readSync(e)},e.prototype.read=function(e){return this.backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=performance.now(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=performance.now()-t,[2,n]}})})},e.prototype.track=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside dl.tidy(): dl.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(e),e},e}();t.Engine=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=function(){function e(e,t,n,o,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=r.alea(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}();t.MPRandGauss=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.assertParamsValid=function(e,t,n){r.assert(e.rank===t.length,"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."),r.assert(e.rank===n.length,"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+").");for(var o=0;o<e.rank;++o)r.assert(t[o]+n[o]<=e.shape[o],"Error in slice"+e.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+n[o])+") would overflow input.shape["+o+"] ("+e.shape[o]+")")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new i)}return e.prototype.profileKernel=function(e,t){var n,o=this,i=this.backendTimer.time(function(){n=t()}),a=n.dataSync();return r.checkForNaN(a,n.dtype,e),i.then(function(t){o.logger.logKernelProfile(e,n,a,t.kernelMs)}),n},e}();t.Profiler=o;var i=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,o){var i=r.rightPad(o+"ms",9),a=r.rightPad(e,25),s=t.rank,u=t.size,c=r.rightPad(t.shape.toString(),14);console.log("%c"+a+"\t%c"+i+"\t%c"+s+"D "+c+"\t%c"+u,"font-weight:bold","color:red","color:blue","color: orange")},e}();t.Logger=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getFilteredNodesXToY=function(e,t,n){for(var r={},o={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var a=(m=e[i]).inputs;for(var s in a){for(var u=a[s],c=!1,l=0;l<t.length;l++)if(r[u.id]){r[m.output.id]=!0,c=!0,o[m.id]=!0;break}if(c)break}}var p={};p[n.id]=!0;var h={};for(i=e.length-1;i>=0;i--){a=(m=e[i]).inputs;var d=[];for(d.push(m.output),l=0;l<d.length;l++)if(p[d[l].id]){for(var s in a)p[a[s].id]=!0,h[m.id]=!0;break}}var f=[];for(i=0;i<e.length;i++){var m;if(o[(m=e[i]).id]&&h[m.id]){var g={};for(var s in m.inputs){var v=m.inputs[s];r[v.id]&&(g[s]=v)}var y=Object.assign({},m);y.inputs=g,y.output=m.output,f.push(y)}}return f},t.backpropagateGradients=function(e,t){for(var n=t.length-1;n>=0;n--){var o=t[n],i=e[o.output.id];if(null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.name+".");var a=o.gradient(i);for(var s in o.inputs){if(!(s in a))throw new Error("Cannot backprop through input "+s+". Available gradients found: "+Object.keys(a)+".");var u=a[s](),c=o.inputs[s];if(!r.arraysEqual(u.shape,c.shape))throw new Error("Error in gradient for op "+o.name+". The gradient of input '"+s+"' has shape '"+u.shape+"', which does not match the shape of the input '"+c.shape+"'");if(null==e[c.id])e[c.id]=u;else{var l=e[c.id];e[c.id]=l.add(u),l.dispose()}}}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(3),s=n(0),u=function(){function e(e,t,n){void 0===n&&(n=!0),this.base=e,this.batchSize=t,this.smallLastBatch=n}return e.prototype.getStream=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.base.getStream().batch(this.batchSize,this.smallLastBatch).map(c)]})})},e}();function c(e){var t={},n=e[0],r=Object.keys(n);r.forEach(function(e){t[e]=[]});for(var o=function(e){r.forEach(function(n){var r=e[n];t[n].push(r)})},u=0,c=e;u<c.length;u++)o(c[u]);var p={};return r.forEach(function(n){if(t[n].length!==e.length)throw new Error("Batching failed to get a '"+n+"' value for each element.");"string"==typeof t[n][0]?p[n]=t[n]:p[n]=function(e){for(var t=l(e[0])[0],n=[e.length].concat(t),r=new Float32Array(n.reduce(function(e,t){return e*t})),o=0,i=0,u=e;i<u.length;i++){var c=l(u[i]),p=c[0],h=c[1];if(!s.arraysEqual(p,t))throw new Error("Elements must have the same shape to be batched");r.set(h,o),o+=h.length}return a.Tensor.make(n,{values:r})}(t[n])}),e.forEach(i.dispose),p}function l(e){return e instanceof a.Tensor?[e.shape,e.dataSync()]:Array.isArray(e)?[[e.length],e]:[[],[e]]}t.BatchDataset=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.scaleTo01=function(e,t){var n=t-e,r=i.Scalar.new(e),o=i.Scalar.new(n);return function(t){if("string"==typeof t)throw new Error("Can't scale a string.");return t instanceof i.Tensor?t.sub(r).div(o):t instanceof Array?t.map(function(t){return(t-e)/n}):(t-e)/n}},t.computeDatasetStatistics=function(e,t,n){return r(this,void 0,void 0,function(){var r,a;return o(this,function(o){switch(o.label){case 0:return r=e,null!=n&&(r=r.shuffle(n)),null!=t&&(r=r.take(t)),a={},[4,r.forEach(function(e){for(var t in e){var n=e[t];if("string"==typeof n);else{var r=void 0,o=void 0;if(n instanceof i.Tensor)r=n.min().dataSync()[0],o=n.max().dataSync()[0];else if(n instanceof Array)r=n.reduce(function(e,t){return Math.min(e,t)}),o=n.reduce(function(e,t){return Math.max(e,t)});else{if(isNaN(n)||!isFinite(n))throw new Error("Cannot compute statistics: "+t+" = "+n);r=n,o=n}var s=a[t];null==s&&(s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},a[t]=s),s.min=Math.min(s.min,r),s.max=Math.max(s.max,o)}}})];case 1:return o.sent(),[2,a]}})})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this,t.INITIAL_CAPACITY)||this}return r(t,e),t.prototype.isFull=function(){return!1},t.prototype.push=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.push.call(this,t)},t.prototype.unshift=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.unshift.call(this,t)},t.prototype.expand=function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},t.INITIAL_CAPACITY=32,t}(n(60).RingBuffer);t.GrowingRingBuffer=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(25),u=n(61);!function(e){e[e.READ_FIRST_LINE=0]="READ_FIRST_LINE",e[e.NUMBERED=1]="NUMBERED"}(a=t.CsvHeaderConfig||(t.CsvHeaderConfig={}));var c=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r.hasHeaderLine=!1,r.base=new u.TextLineDataset(n,t.textColumnName),r}return r(t,e),Object.defineProperty(t.prototype,"csvColumnNames",{get:function(){return this._csvColumnNames},enumerable:!0,configurable:!0}),t.prototype.setCsvColumnNames=function(e){return o(this,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return null!=e&&e!==a.NUMBERED?[3,2]:[4,this.base.getStream().next()];case 1:if((n=o.sent()).done)throw new Error("No data was found for CSV parsing.");return r=n.value[t.textColumnName],this._csvColumnNames=Array.from(r.split(",").keys()).map(function(e){return e.toString()}),[3,5];case 2:return e!==a.READ_FIRST_LINE?[3,4]:[4,this.base.getStream().next()];case 3:if((n=o.sent()).done)throw new Error("No data was found for CSV parsing.");return r=n.value[t.textColumnName],this._csvColumnNames=r.split(","),this.hasHeaderLine=!0,[3,5];case 4:this._csvColumnNames=e,o.label=5;case 5:return[2]}})})},t.create=function(e,n){return void 0===n&&(n=a.NUMBERED),o(this,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return[4,(r=new t(e)).setCsvColumnNames(n)];case 1:return o.sent(),[2,r]}})})},t.prototype.getStream=function(){var e=this,t=this.base.getStream();return this.hasHeaderLine&&(t=t.skip(1)),t.map(function(t){return e.makeDatasetElement(t)})},t.prototype.makeDatasetElement=function(e){for(var n=e[t.textColumnName].split(","),r={},o=0;o<this._csvColumnNames.length;o++){var i=n[o];if(""===i)r[this._csvColumnNames[o]]=void 0;else{var a=Number(i);isNaN(a)?r[this._csvColumnNames[o]]=i:r[this._csvColumnNames[o]]=a}}return r},t.textColumnName="line",t}(s.Dataset);t.CSVDataset=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(62),i=n(63),a=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.input=t,r.options=n,r}return r(t,e),t.prototype.getStream=function(){return new i.FileReaderStream(this.input,this.options)},t}(o.DataSource);t.FileDataSource=a},function(e,t,n){(function(e,r){var o;/*! https://mths.be/utf8js v2.1.2 by @mathias */!function(i){var a=("object"==typeof e&&e&&e.exports,"object"==typeof r&&r);a.global!==a&&a.window;var s,u,c,l=String.fromCharCode;function p(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function h(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function d(e,t){return l(e>>t&63|128)}function f(e){if(0==(4294967168&e))return l(e);var t="";return 0==(4294965248&e)?t=l(e>>6&31|192):0==(4294901760&e)?(h(e),t=l(e>>12&15|224),t+=d(e,6)):0==(4292870144&e)&&(t=l(e>>18&7|240),t+=d(e,12),t+=d(e,6)),t+l(63&e|128)}function m(){if(c>=u)throw Error("Invalid byte index");var e=255&s[c];if(c++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function g(){var e,t;if(c>u)throw Error("Invalid byte index");if(c==u)return!1;if(e=255&s[c],c++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|m())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|m()<<6|m())>=2048)return h(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(7&e)<<18|m()<<12|m()<<6|m())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var v={version:"2.1.2",encode:function(e){for(var t=p(e),n=t.length,r=-1,o="";++r<n;)o+=f(t[r]);return o},decode:function(e){s=p(e),u=s.length,c=0;for(var t,n=[];!1!==(t=g());)n.push(t);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=l((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=l(t);return o}(n)}};void 0===(o=function(){return v}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(14)(e),n(30))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.split=function(e){return new u(this,e)},t}(a.DataStream);t.StringStream=s;var u=function(e){function t(t,n){var r=e.call(this)||this;return r.impl=new c(t,n),r}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.impl.next()]})})},t}(s),c=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.separator=n,r.carryover="",r}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((e=i.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((t=e.value.split(this.separator))[0]=this.carryover+t[0],n=0,r=t.slice(0,-1);n<r.length;n++)o=r[n],this.outputQueue.push(o);return this.carryover=t[t.length-1],[2,!0]}})})},t}(a.QueueStream)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(62),i=n(107),a=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.url=t,r.options=n,r}return r(t,e),t.prototype.getStream=function(){return new i.URLStream(this.url,this.options)},t}(o.DataSource);t.URLDataSource=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(64),s=n(19),u=n(63),c=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.impl=new l(t,n),r}return r(t,e),t.prototype.next=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,this.impl.next()]})})},t}(a.ByteStream);t.URLStream=c;var l=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.url=t,r.options=n,r.blobPromise=fetch(t,n).then(function(e){if(e.ok)return e.blob();throw new Error(e.statusText)}),r}return r(t,e),t.prototype.pump=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return null!=this.fileReaderStream?[3,2]:[4,this.blobPromise];case 1:e=n.sent(),this.fileReaderStream=new u.FileReaderStream(e,this.options),n.label=2;case 2:return[4,this.fileReaderStream.next()];case 3:return(t=n.sent()).done?[2,!1]:(this.outputQueue.push(t.value),[2,!0])}})})},t}(s.QueueStream)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(68),i=n(69),a=n(3),s=n(0);function u(e,n,r){if(void 0===r&&(r=t.TEST_EPSILON),e instanceof a.Tensor||n instanceof a.Tensor){if(e instanceof a.Tensor&&n instanceof a.Tensor){if(e.dtype!==n.dtype)throw new Error("Arrays are of different type actual: "+e.dtype+" vs expected: "+n.dtype+".");if(!s.arraysEqual(e.shape,n.shape))throw new Error("Arrays are of different shape actual: "+e.shape+" vs expected: "+n.shape+".")}}else{var o=e.constructor.name,i=n.constructor.name;if(o!==i)throw new Error("Arrays are of different type actual: "+o+" vs expected: "+i)}var u,l;if(u=e instanceof a.Tensor?e.dataSync():e,l=n instanceof a.Tensor?n.dataSync():n,u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var p=0;p<l.length;++p){var h=u[p],d=l[p];if(!c(h,Number(d),r))throw new Error("Arrays differ: actual["+p+"] = "+h+", expected["+p+"] = "+d+".\nActual:   "+u+".\nExpected: "+l+".")}}function c(e,t,n){return!(!isNaN(e)||!isNaN(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}t.WEBGL_ENVS=[{BACKEND:"webgl",WEBGL_FLOAT_TEXTURE_ENABLED:!0,WEBGL_VERSION:1},{BACKEND:"webgl",WEBGL_FLOAT_TEXTURE_ENABLED:!0,WEBGL_VERSION:2}],t.CPU_ENVS=[{BACKEND:"cpu"}],t.ALL_ENVS=t.WEBGL_ENVS.concat(t.CPU_ENVS),t.TEST_EPSILON=.001,t.expectArraysClose=u,t.expectArraysEqual=function(e,t){return u(e,t,0)},t.expectNumbersClose=function(e,n,r){if(void 0===r&&(r=t.TEST_EPSILON),!c(e,n,r))throw new Error("Numbers differ: actual === "+e+", expected === "+n)},t.expectValuesInRange=function(e,t,n){var r;r=e instanceof a.Tensor?e.dataSync():e;for(var o=0;o<r.length;o++)if(r[o]<t||r[o]>n)throw new Error("Value out of range:"+r[o]+" low: "+t+", high: "+n)},t.describeWithFlags=function(e,t,n){t.forEach(function(t){!function(e,t,n){describe(e,function(){beforeEach(function(){r.ENV.setFeatures(n||{}),r.ENV.addCustomBackend("webgl",function(){return new i.MathBackendWebGL}),r.ENV.addCustomBackend("cpu",function(){return new o.MathBackendCPU}),n&&null!=n.BACKEND&&r.Environment.setBackend(n.BACKEND),r.ENV.engine.startScope()}),afterEach(function(){r.ENV.engine.endScope(null),r.ENV.reset()}),t()})}(e+" "+JSON.stringify(t),n,t)})},t.assertIsNan=function(e,t){if(!s.isValNaN(e,t))throw new Error("Value "+e+" does not represent NaN for dtype "+t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARALLELIZE_THRESHOLD=30,t.computeOptimalWindowSize=function(e){return e<=t.PARALLELIZE_THRESHOLD?e:function(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}(e,Math.floor(Math.sqrt(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (isNaN(candidate)) {\n            setOutput(candidate);\n            return;\n          }\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};t.ArgMinMaxProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.AvgPool2DBackpropProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=function(e,t,n,o,i,a){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],r.assertAndGetBroadcastShape(e,t),r.assertAndGetBroadcastShape(e,n);var s="0.0";null!=o&&(r.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(r.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+u+";\n        float inv = scale / sqrt(variance + float("+a+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "};t.BatchNormProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){this.variableNames=["A"],this.outputShape=e;var r=t.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "};t.ClipProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=function(e,t){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=r.computeOutShape(e,t,1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+e[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+e[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "};t.ConcatProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.Conv2DDerFilterProgram=r;var o=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.Conv2DDerInputProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,a=e.filterWidth,s=4*Math.floor(e.inChannels/4),u=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+s+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===u)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+s+") *\n                getW(wR, wC, "+s+", d2);\n            } else if ("+(2===u)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+s+"),\n                getX(batch, xR, xC, "+s+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+s+", d2),\n                getW(wR, wC, "+s+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===u)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+s+"),\n                getX(batch, xR, xC, "+s+" + 1),\n                getX(batch, xR, xC, "+s+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+s+", d2),\n                getW(wR, wC, "+s+" + 1, d2),\n                getW(wR, wC, "+s+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.Conv2DProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,a=e.strideWidth,s=e.filterHeight,u=e.filterWidth,c=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+c+";\n        int q = d2 - d1 * "+c+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.DepthwiseConv2DProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["A"];var t=e[0],n=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+t+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "};t.FromPixelsProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t,n){this.variableNames=["A","indices"];var o=e.slice();o[n]=t,this.outputShape=o,this.rank=o.length;var i=r.getCoordsDataType(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<e.length;i++)i===t?o.push("int(getIndices("+r[i]+"))"):o.push(""+r[i]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "};t.GatherProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(13),a="NaN";function s(){return!r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")}function u(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,i=e.texShape,a=t[n].tensor.shape,s=t[n].texData.texShape;if(!o.arraysEqual(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!o.arraysEqual(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")})}t.compileProgram=function(e,t,n,r){for(var o=t.userCode,u=n.map(function(e,n){var r={logicalShape:e.tensor.shape,texShape:e.texData.texShape};return{name:t.variableNames[n],shapeInfo:r}}),c=u.map(function(e){return e.shapeInfo}),l={logicalShape:r.tensor.shape,texShape:r.texData.texShape},p=i.makeShader(u,l,o,!0===t.supportsBroadcasting),h=e.createProgram(p),d={},f=0;f<t.variableNames.length;f++){var m=t.variableNames[f];d[m]=e.getUniformLocation(h,m)}return s()&&(d[a]=e.getUniformLocation(h,a,!1)),{program:t,source:p,webGLProgram:h,uniformLocations:d,gpgpu:e,inShapeInfos:c,outShapeInfo:l}},t.runProgram=function(e,t,n,r){u(e.inShapeInfos,t),u([e.outShapeInfo],[n]);var o=n.texData.texture,i=n.texData.texShape,c=e.gpgpu;c.setOutputMatrixTexture(o,i[0],i[1]),c.setProgram(e.webGLProgram),t.forEach(function(t,n){var r=t.texData.texture,o=e.program.variableNames[n],i=e.uniformLocations[o];c.setInputMatrixTexture(r,i,n)}),s()&&c.gl.uniform1f(e.uniformLocations[a],NaN),null!=r&&r(c,e.webGLProgram),c.executeProgram()},t.makeShaderKey=function(e,t,n){var r="";t.concat(n).forEach(function(e){r+=e.tensor.shape+"_"+e.texData.texShape});var o=e.userCode,i=(!0===e.supportsBroadcasting).toString();return e.constructor.name+"_"+i+"_"+r+"_"+o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t,n){var o,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",o="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<t.length;c++)u.push(""+a[c]),c<e&&s.push(""+a[c]);o=s.join(),i=u.join()}var l=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+o+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "};t.WhereProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,o,i){this.variableNames=["x"],this.outputShape=[];var a,s=t,u=e[1]-1,c=e[2]-1,l=e[3]-1;this.outputShape=e;var p="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+p+")":1===o?"1.0/("+p+")":"exp(log("+p+") * float(-"+o+"));",this.userCode="withinChannel"===i?"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int u = -"+s+"; u <= "+s+"; u++) {\n            for (int v = -"+s+"; v <= "+s+"; v++) {\n              int idx = r + u;\n              int idy = c + v;\n              if (idx >= 0 && idx <= "+u+" && idy >= 0 && idy <= "+c+") {\n                float z = getX(b, idx, idy, d);\n                sum += z * z;\n              }\n            }\n          }\n          float val = x * "+a+";\n          setOutput(val);\n        }\n      ":"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int j = -"+s+"; j <= "+s+"; j++) {\n            int idx = d + j;\n            if (idx >= 0 && idx <=  "+l+") {\n              float z = getX(b, r, c, idx);\n              sum += z * z;\n            }\n          }\n          float val = x * "+a+";\n          setOutput(val);\n        }\n      "};t.LRNProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=t*n-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};t.MaxPool2DBackpropProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var o=n?e[1]:e[0],i=r?t[0]:t[1],a=n?e[0]:e[1];this.outputShape=[o,i];var s=function(e,t){return n?t+" + "+e+", aRow":"aRow, "+t+" + "+e},u=function(e,t){return r?"bCol, "+t+" + "+e:t+" + "+e+", bCol"},c=4*Math.floor(a/4),l=a%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+c+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+s(0,"i")+"),\n          getMatrixA("+s(1,"i")+"),\n          getMatrixA("+s(2,"i")+"),\n          getMatrixA("+s(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+u(0,"i")+"),\n          getMatrixB("+u(1,"i")+"),\n          getMatrixB("+u(2,"i")+"),\n          getMatrixB("+u(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===l)+") {\n        result += getMatrixA("+s(0,c)+") *\n          getMatrixB("+u(0,c)+");\n      } else if ("+(2===l)+") {\n        vec2 a = vec2(\n          getMatrixA("+s(0,c)+"),\n          getMatrixA("+s(1,c)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+u(0,c)+"),\n          getMatrixB("+u(1,c)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===l)+") {\n        vec3 a = vec3(\n          getMatrixA("+s(0,c)+"),\n          getMatrixA("+s(1,c)+"),\n          getMatrixA("+s(2,c)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+u(0,c)+"),\n          getMatrixB("+u(1,c)+"),\n          getMatrixB("+u(2,c)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "};t.MatMulProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}();t.MultinomialProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "};t.OneHotProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var o=e.length,i=r.getCoordsDataType(o),a=t.map(function(e){return e[0]}).join(","),s=t.map(function(t,n){return t[0]+e[n]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);this.userCode=1!==o?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "};t.PadProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterHeight,o=e.filterWidth,i=e.strideHeight,a=e.strideWidth,s=e.padInfo.top,u=e.padInfo.left;this.outputShape=e.outShape;var c="avg"===t,l="0.0";if(c||(l="min"===t?"1.0 / 0.0":"-1.0 / 0.0"),n){var p="min"===t?"<=":">=";this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value "+p+" currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var h="min"===t?"min":"max",d=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(d="avgValue / "+r*o+".0");var f=4*Math.floor(o/4),m=o%4,g="\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if ("+c+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = "+h+"(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+l+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+l+");\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+f+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+d+");\n      }\n    "}};t.Pool2DProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="sum"===t,s="0.0";a||(s="min"===t?"1.0 / 0.0":"-1.0 / 0.0");var u="min"===t?"min":"max",c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t&&(c="sumValue");var l=4*Math.floor(n/4),p=n%4,h="\n      if ("+a+") {\n        sumValue += dot(values, ones);\n      } else {\n        if (hasNaN(values)) {\n          setOutput(getNaN(values));\n          return;\n        }\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(2===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(3===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n          "+h+"\n        }\n        setOutput("+c+");\n      }\n    "};t.ReduceProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=r?[i-1,a-1]:[i,a],c=r?[t-1,n-1]:[t,n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "};t.ResizeBilinearProgram=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var o=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "};t.ReverseProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t=r.getCoordsDataType(this.rank),n=function(e){if(1===e)return"sourceLoc";if(2===e)return"sourceLoc.x, sourceLoc.y";if(3===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+t+" start;\n\n      void main() {\n        "+t+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){if(null!=t.startLoc||(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=t.startLoc))if(1===t.rank)n.gl.uniform1i(t.startLoc,e[0]);else if(2===t.rank)n.gl.uniform2i(t.startLoc,e[0],e[1]);else if(3===t.rank)n.gl.uniform3i(t.startLoc,e[0],e[1],e[2]);else{if(4!==t.rank)throw Error("Slicing for rank "+t.rank+" is not yet supported");n.gl.uniform4i(t.startLoc,e[0],e[1],e[2],e[3])}}},e}();t.SliceProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),o=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.allocatedTextures=[],this.usedTextureCount={}}return e.prototype.acquireTexture=function(e,t){void 0===t&&(t=r.TextureType.FLOAT);var n=i(e,t);if(n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextureCount||(this.usedTextureCount[n]=0),this.usedTextureCount[n]++,this.freeTextures[n].length>0)return this.numFreeTextures--,this.numUsedTextures++,this.log(),this.freeTextures[n].shift();this.numUsedTextures++,this.log();var o=this.gpgpu.createMatrixTexture(e[0],e[1]);return this.allocatedTextures.push(o),o},e.prototype.releaseTexture=function(e,t,n){void 0===n&&(n=r.TextureType.FLOAT);var o=i(t,n);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--,this.usedTextureCount[o]--,this.log()},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;null!=this.allocatedTextures&&(this.allocatedTextures.forEach(function(t){e.gpgpu.deleteMatrixTexture(t)}),this.freeTextures=null,this.allocatedTextures=null,this.usedTextureCount=null,this.numUsedTextures=0,this.numFreeTextures=0)},e}();function i(e,t){return e[0]+"_"+e[1]+"_"+t}t.TextureManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;var i=r.getCoordsDataType(this.rank),a=function(e){var t=e.length;if(t>4)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "};t.TileProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;var i=r.getCoordsDataType(this.rank),a=function(e){var t=e.length;if(t>4)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "};t.TransposeProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="0.5.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e){this.urlPath=e,"/"!==this.urlPath.charAt(this.urlPath.length-1)&&(this.urlPath+="/")}return e.prototype.loadManifest=function(){var e=this;return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e.urlPath+"manifest.json"),r.onload=function(){e.checkpointManifest=JSON.parse(r.responseText),t()},r.onerror=function(t){throw new Error("manifest.json not found at "+e.urlPath+". "+t)},r.send()})},e.prototype.getCheckpointManifest=function(){var e=this;return null==this.checkpointManifest?new Promise(function(t,n){e.loadManifest().then(function(){t(e.checkpointManifest)})}):new Promise(function(t,n){t(e.checkpointManifest)})},e.prototype.getAllVariables=function(){var e=this;return null!=this.variables?new Promise(function(t,n){t(e.variables)}):new Promise(function(t,n){e.getCheckpointManifest().then(function(n){for(var r=Object.keys(e.checkpointManifest),o=[],i=0;i<r.length;i++)o.push(e.getVariable(r[i]));Promise.all(o).then(function(n){e.variables={};for(var o=0;o<n.length;o++)e.variables[r[o]]=n[o];t(e.variables)})})})},e.prototype.getVariable=function(e){var t=this;if(!(e in this.checkpointManifest))throw new Error("Cannot load non-existant variable "+e);var n=function(n,o){var i=new XMLHttpRequest;i.responseType="arraybuffer";var a=t.checkpointManifest[e].filename;i.open("GET",t.urlPath+a),i.onload=function(){if(404===i.status)throw new Error("Not found variable "+e);var o=new Float32Array(i.response),a=r.Tensor.make(t.checkpointManifest[e].shape,{values:o});n(a)},i.onerror=function(t){throw new Error("Could not fetch variable "+e+": "+t)},i.send()};return null==this.checkpointManifest?new Promise(function(e,r){t.loadManifest().then(function(){new Promise(n).then(e)})}):new Promise(n)},e}();t.CheckpointLoader=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(){function e(e){this.inputs=e,this.idx=0,this.inputCounter=0,this.epoch=0,this.shuffledIndices=o.createShuffledIndices(e[0].length),this.numInputs=e.length;for(var t=this.inputs[0].length,n=0;n<this.numInputs;n++)o.assert(this.inputs[n].length===t,"Number of examples must match across different inputs.");for(n=0;n<this.numInputs;n++)for(var r=this.inputs[n][0].shape,i=0;i<this.inputs[n].length;i++)o.assertShapesMatch(r,this.inputs[n][i].shape)}return e.prototype.getCurrentExampleIndex=function(){var e=this.idx;return this.inputCounter++,this.inputCounter>=this.numInputs&&(this.idx++,this.inputCounter=0,this.idx>=this.inputs[0].length&&(this.idx=0,this.epoch++)),e},e.prototype.getNextInput=function(e){var t=this.getCurrentExampleIndex();return this.inputs[e][this.shuffledIndices[t]]},e.prototype.getEpoch=function(){return this.epoch},e.prototype.getInputProviders=function(){for(var e=[],t=0;t<this.numInputs;t++)e.push(this.getInputProvider(t));return e},e}();t.InMemoryShuffledInputProviderBuilder=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getInputProvider=function(e){var t=this;return{getNextCopy:function(){return t.getNextInput(e).clone()},disposeCopy:function(e){e.dispose()}}},t}(i);t.InCPUMemoryShuffledInputProviderBuilder=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getInputProvider=function(e){var t=this;return{getNextCopy:function(){return t.getNextInput(e).clone()},disposeCopy:function(e){e.dispose()}}},t}(i);t.InGPUMemoryShuffledInputProviderBuilder=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(3),a=n(74);!function(e){e[e.SUM=0]="SUM",e[e.MEAN=1]="MEAN"}(r=t.MetricReduction||(t.MetricReduction={}));var s=function(){function e(e,t,n){this.math=e,this.session=t,this.eventObserver=n,this.lastCostTimestamp=0,this.lastEvalTimestamp=0,this.resetStatistics(),this.zeroScalar=i.Scalar.new(0)}return e.prototype.resetStatistics=function(){this.totalBatchesTrained=0},e.prototype.train=function(e,t,n,o,a,s,u,c,l,p,h){void 0===l&&(l=r.MEAN),void 0===p&&(p=1500),void 0===h&&(h=500),this.costTensor=e,this.trainFeedEntries=t,this.metricTensor=s,this.metricFeedEntries=u,null!=c&&this.metricBatchSize!==c&&(null!=this.metricBatchSizeScalar&&this.metricBatchSizeScalar.dispose(),this.metricBatchSizeScalar=i.Scalar.new(c)),this.metricBatchSize=c,this.metricReduction=l,this.batchSize=n,this.optimizer=o,this.metricIntervalMs=p,this.costIntervalMs=h,this.currentTrainLoopNumBatches=a,this.batchesTrainedThisRun=0,this.isTraining=!0,this.trainStartTimestamp=performance.now(),this.trainNetwork()},e.prototype.stopTraining=function(){this.isTraining=!1},e.prototype.resumeTraining=function(){this.isTraining=!0,this.trainNetwork()},e.prototype.trainNetwork=function(){var e=this;if(this.batchesTrainedThisRun===this.currentTrainLoopNumBatches&&this.stopTraining(),this.isTraining){var t=performance.now(),n=null!=this.eventObserver.avgCostCallback&&t-this.lastCostTimestamp>this.costIntervalMs;n&&(this.lastCostTimestamp=t);var r=n?a.CostReduction.MEAN:a.CostReduction.NONE;o.tidy(function(){var o=e.session.train(e.costTensor,e.trainFeedEntries,e.batchSize,e.optimizer,r);if(n){var i=performance.now()-t;if(e.eventObserver.avgCostCallback(o),null!=e.eventObserver.trainExamplesPerSecCallback){var a=1e3*e.batchSize/i;e.eventObserver.trainExamplesPerSecCallback(a)}}null!=e.eventObserver.metricCallback&&null!=e.metricFeedEntries&&t-e.lastEvalTimestamp>e.metricIntervalMs&&(e.lastEvalTimestamp=t,null!=e.lastComputedMetric&&e.lastComputedMetric.dispose(),e.lastComputedMetric=e.computeMetric(),e.eventObserver.metricCallback(e.lastComputedMetric)),null!=e.eventObserver.totalTimeCallback&&e.eventObserver.totalTimeCallback((t-e.trainStartTimestamp)/1e3),e.batchesTrainedThisRun++,e.totalBatchesTrained++,null!=e.eventObserver.batchesTrainedCallback&&e.eventObserver.batchesTrainedCallback(e.totalBatchesTrained)}),requestAnimationFrame(function(){return e.trainNetwork()})}else null!=this.eventObserver.doneTrainingCallback&&this.eventObserver.doneTrainingCallback()},e.prototype.infer=function(e,t,n,r,o){var a=this;if(void 0===n&&(n=3e3),void 0===r&&(r=5),null==this.eventObserver.inferenceExamplesCallback&&null==this.eventObserver.inferenceExamplesPerSecCallback)throw new Error("Cannot start inference loop, no inference example or examples/sec observer provided.");for(var s=0;s<t.length;s++)if(t[s].data instanceof i.Tensor)throw new Error("Cannot start inference on the model runner with feed entries of type NDArray. Please use InputProviders.");this.inferenceExampleIntervalMs=n,this.inferenceTensor=e,this.inferenceFeedEntries=t,this.inferenceExampleCount=r,this.currentInferenceLoopNumPasses=o,this.isInferring||(this.inferencePassesThisRun=0,requestAnimationFrame(function(){return a.inferNetwork()})),this.isInferring=!0},e.prototype.inferNetwork=function(){var e=this;this.isInferring&&this.inferencePassesThisRun!==this.currentInferenceLoopNumPasses&&(o.tidy(function(){for(var t=[],n=[],r=performance.now(),o=0;o<e.inferenceExampleCount;o++){for(var i=[],a=0;a<e.inferenceFeedEntries.length;a++){var s=e.inferenceFeedEntries[a],u=s.data.getNextCopy();i.push({tensor:s.tensor,data:u})}t.push(i),n.push(e.session.eval(e.inferenceTensor,i))}if(null!=e.eventObserver.inferenceExamplesPerSecCallback){n[n.length-1].dataSync();var c=performance.now()-r,l=1e3*e.inferenceExampleCount/c;e.eventObserver.inferenceExamplesPerSecCallback(l)}null!=e.eventObserver.inferenceExamplesCallback&&e.eventObserver.inferenceExamplesCallback(t,n),e.inferencePassesThisRun++}),this.lastInferTimeoutID=window.setTimeout(function(){return e.inferNetwork()},this.inferenceExampleIntervalMs))},e.prototype.stopInferring=function(){this.isInferring=!1,window.clearTimeout(this.lastInferTimeoutID)},e.prototype.isInferenceRunning=function(){return this.isInferring},e.prototype.computeMetric=function(){var e=this;if(null==this.metricFeedEntries)throw new Error("Cannot compute metric, no metric FeedEntries provided.");var t=this.zeroScalar;return o.tidy(function(){for(var n=0;n<e.metricBatchSize;n++){var o=e.session.eval(e.metricTensor,e.metricFeedEntries);t=e.math.add(t,o.toFloat())}return e.metricReduction===r.MEAN&&(t=e.math.divide(t,e.metricBatchSizeScalar)),t})},e.prototype.getTotalBatchesTrained=function(){return this.totalBatchesTrained},e.prototype.getLastComputedMetric=function(){return this.lastComputedMetric},e.prototype.setMath=function(e){this.math=e},e.prototype.setSession=function(e){this.session=e},e.prototype.setInferenceTensor=function(e){this.inferenceTensor=e},e.prototype.setInferenceExampleCount=function(e){this.inferenceExampleCount=e},e}();t.GraphRunner=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(10),i=n(141),a=n(142),s=n(143),u=n(144),c=n(145),l=n(146),p=n(147),h=n(149),d=n(151),f=n(152),m=n(153),g=n(154),v=n(155),y=n(156),b=n(157),x=n(158),w=n(159),E=n(160);t.emitFromGraphNodes=function(e){var t=[];return e.forEach(function(e){return Array.prototype.push.apply(t,function(e){if(e instanceof r.ReshapeNode)return[new x.Reshape(e.inputs[r.ReshapeNode.X],e.output)];if(e instanceof r.MatMulNode){var t=e.inputs[r.MatMulNode.X1],n=e.inputs[r.MatMulNode.X2];return[new g.MatMul(t,n,e.output)]}if(e instanceof r.Convolution2DNode){var T=e.inputs[r.Convolution2DNode.W],_=e.inputs[r.Convolution2DNode.X],S=e.inputs[r.Convolution2DNode.B];return[new c.Convolution2D(T,_,S,e.output,e.fieldSize,e.outputDepth,e.stride,e.zeroPad)]}if(e instanceof r.MaxPoolNode){_=e.inputs[r.MaxPoolNode.X];return[new v.MaxPool(_,e.output,e.fieldSize,e.stride,e.zeroPad)]}if(e instanceof r.ExpNode)return[new d.Exp(e.inputs[r.ExpNode.X],e.output)];if(e instanceof r.LogNode)return[new m.Log(e.inputs[r.LogNode.X],e.output)];if(e instanceof r.ReLUNode)return[new p.ReLU(e.inputs[r.ReLUNode.X],e.output)];if(e instanceof r.LeakyReLUNode)return[new p.LeakyReLU(e.inputs[r.LeakyReLUNode.X],e.output,e.alpha)];if(e instanceof r.PReLUNode)return[new p.PReLU(e.inputs[r.PReLUNode.X],e.inputs[r.PReLUNode.ALPHA],e.output)];if(e instanceof r.EluNode)return[new p.Elu(e.inputs[r.EluNode.X],e.output)];if(e instanceof r.TanHNode)return[new p.TanH(e.inputs[r.TanHNode.X],e.output)];if(e instanceof r.SigmoidNode)return[new p.Sigmoid(e.inputs[r.SigmoidNode.X],e.output)];if(e instanceof r.SoftmaxCrossEntropyCostNode){_=e.inputs[r.SoftmaxCrossEntropyCostNode.X];var k=e.inputs[r.SoftmaxCrossEntropyCostNode.TARGET];return[new w.SoftmaxCrossEntropyCost(_,k,e.output)]}if(e instanceof r.SoftmaxNode)return[new w.Softmax(e.inputs[r.SoftmaxNode.X],e.output)];if(e instanceof r.MeanSquaredCostNode){var O=e.inputs[r.MeanSquaredCostNode.LABEL],C=e.inputs[r.MeanSquaredCostNode.PREDICTION];return[new h.MeanSquaredCost(O,C,e.output)]}if(e instanceof r.ArgMaxEqualsNode)return[new s.ArgMaxEquals(e.inputs[r.ArgMaxEqualsNode.X1],e.inputs[r.ArgMaxEqualsNode.X2],e.output)];if(e instanceof r.ArgMaxNode)return[new a.ArgMax(e.x,e.output)];if(e instanceof r.FusedLinearCombinationNode)return[new f.LinearCombination(e.inputs[r.FusedLinearCombinationNode.T1],e.inputs[r.FusedLinearCombinationNode.T2],e.inputs[r.FusedLinearCombinationNode.C1],e.inputs[r.FusedLinearCombinationNode.C2],e.output)];if(e instanceof r.Concat1DNode)return[new u.Concat1D(e.inputs[r.Concat1DNode.X1],e.inputs[r.Concat1DNode.X2],e.output)];if(e instanceof r.Concat2DNode)return[new u.Concat2D(e.inputs[r.Concat2DNode.X1],e.inputs[r.Concat2DNode.X2],e.axis,e.output)];if(e instanceof r.Concat3DNode)return[new u.Concat3D(e.inputs[r.Concat3DNode.X1],e.inputs[r.Concat3DNode.X2],e.axis,e.output)];if(e instanceof r.Concat4DNode)return[new u.Concat4D(e.inputs[r.Concat4DNode.X1],e.inputs[r.Concat4DNode.X2],e.axis,e.output)];if(e instanceof r.SquareNode)return[new p.Square(e.inputs[r.SquareNode.X],e.output)];if(e instanceof r.AddNode)return[new i.Add(e.inputs[r.AddNode.T1],e.inputs[r.AddNode.T2],e.output)];if(e instanceof r.SubtractNode)return[new E.Subtract(e.inputs[r.SubtractNode.T1],e.inputs[r.SubtractNode.T2],e.output)];if(e instanceof r.MultiplyNode)return[new y.Multiply(e.inputs[r.MultiplyNode.T1],e.inputs[r.MultiplyNode.T2],e.output)];if(e instanceof r.DivideNode)return[new l.Divide(e.inputs[r.DivideNode.T1],e.inputs[r.DivideNode.T2],e.output)];if(e instanceof r.ReduceSumNode)return[new b.ReduceSum(e.inputs[r.ReduceSumNode.X],e.output)];if(o.isInputNode(e))return[];throw Error("Unsupported node type: "+e.constructor.name)}(e))}),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),a=n(10),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(t.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(t.shape,n.shape)||2===t.shape.length&&1===n.shape.length&&t.shape[1]===n.shape[0]||1===t.shape.length&&2===n.shape.length&&t.shape[0]===n.shape[1],"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape, or one of them can be broadcasted (2D and 1D)."),o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),a=t.get(this.x2Tensor);o.tidy(function(){var s;s=i.isScalarShape(r.shape)?e.scalarPlusArray(r,a):i.isScalarShape(a.shape)?e.scalarPlusArray(a,r):e.add(r,a),t.set(n.yTensor,o.keep(s))})},t.prototype.backProp=function(e,t,n){var r=this,s=n.get(this.yTensor);o.tidy(function(){if(a.shouldBackProp(r.x1Tensor))if(1===r.x1Tensor.shape.length&&2===r.x2Tensor.shape.length&&r.x1Tensor.shape[0]===r.x2Tensor.shape[1]){var t=e.sum(s,0);n.add(r.x1Tensor,t)}else i.isScalarShape(r.x1Tensor.shape)?(t=e.sum(s),n.add(r.x1Tensor,t)):n.add(r.x1Tensor,e.clone(s));a.shouldBackProp(r.x2Tensor)&&(2===r.x1Tensor.shape.length&&1===r.x2Tensor.shape.length&&r.x1Tensor.shape[1]===r.x2Tensor.shape[0]?(t=e.sum(s,0),n.add(r.x2Tensor,t)):i.isScalarShape(r.x2Tensor.shape)?(t=e.sum(s),n.add(r.x2Tensor,t)):n.add(r.x2Tensor,e.clone(s)))})},t.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},t}(n(8).Operation);t.Add=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=function(e){function t(t,n){var r=e.call(this)||this;return r.xTensor=t,r.yTensor=n,r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.argMax(r)))})},t.prototype.backProp=function(e,t,n){throw new Error("ArgMax backprop unimplemented")},t}(n(8).Operation);t.ArgMax=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.argMaxEquals(r,i)))})},t.prototype.backProp=function(e,t,n){throw new Error("ArgMaxEquals backprop unimplemented")},t}(n(8).Operation);t.ArgMaxEquals=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(20),a=n(0),s=n(8),u=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){var a=e.concat1D(r,i);t.set(n.yTensor,o.keep(a))})},t.prototype.backProp=function(e,t,n){var r=this;o.tidy(function(){h(e,r.x1Tensor,r.x2Tensor,r.yTensor,0,n,t)})},t}(s.Operation);t.Concat1D=u;var c=function(e){function t(t,n,r,o){var a=e.call(this)||this;return a.x1Tensor=t,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(t.shape,n.shape,r),a}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){var a=e.concat2D(r,i,n.axis);t.set(n.yTensor,o.keep(a))})},t.prototype.backProp=function(e,t,n){var r=this;o.tidy(function(){h(e,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,t)})},t}(s.Operation);t.Concat2D=c;var l=function(e){function t(t,n,r,o){var a=e.call(this)||this;return a.x1Tensor=t,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(t.shape,n.shape,r),a}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){var a=e.concat3D(r,i,n.axis);t.set(n.yTensor,o.keep(a))})},t.prototype.backProp=function(e,t,n){var r=this;o.tidy(function(){h(e,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,t)})},t}(s.Operation);t.Concat3D=l;var p=function(e){function t(t,n,r,o){var a=e.call(this)||this;return a.x1Tensor=t,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(t.shape,n.shape,r),a}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){var a=e.concat4D(r,i,n.axis);t.set(n.yTensor,o.keep(a))})},t.prototype.backProp=function(e,t,n){var r=this;o.tidy(function(){h(e,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,t)})},t}(s.Operation);function h(e,t,n,r,o,s,u){var c=s.get(r),l=u.get(t),p=u.get(n),h=l.as2D(-1,a.sizeFromShape(l.shape.slice(o))),d=p.as2D(-1,a.sizeFromShape(p.shape.slice(o))),f=i.computeGradientSliceShapes(h.shape,d.shape),m=f.aBegin,g=f.aSize,v=f.bBegin,y=f.bSize,b=c.as2D(-1,h.shape[1]+d.shape[1]),x=e.slice2D(b,m,g).reshapeAs(l),w=e.slice2D(b,v,y).reshapeAs(p);s.add(t,x),s.add(n,w)}t.Concat4D=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(18),a=n(0),s=function(e){function t(t,n,r,o,s,u,c,l){void 0===c&&(c=1);var p=e.call(this)||this;return p.wTensor=t,p.xTensor=n,p.bTensor=r,p.yTensor=o,p.fieldSize=s,p.outputDepth=u,p.stride=c,p.assertWeightsShape(t.shape),p.zeroPad=null!=l?l:i.computeDefaultPad(p.xTensor.shape,p.fieldSize,p.stride),a.assert(a.isInt(p.zeroPad),"The zero padding ("+p.zeroPad+") must be an integer. Change the stride and/or zero pad parameters"),p}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.wTensor),i=t.get(this.bTensor),a=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.conv2d(a,r,i,n.stride,n.zeroPad)))})},t.prototype.backProp=function(e,t,n){var r=this,i=t.get(this.wTensor),a=t.get(this.xTensor),s=n.get(this.yTensor);o.tidy(function(){var t=e.conv2dDerFilter(a,s,i.shape,r.stride,r.zeroPad),o=e.sum(s,[0,1]),u=e.conv2dDerInput(a.shape,s,i,r.stride,r.zeroPad);n.add(r.wTensor,t),n.add(r.bTensor,o),n.add(r.xTensor,u)})},t.prototype.assertWeightsShape=function(e){a.assert(e[0]===this.fieldSize&&e[1]===this.fieldSize&&e[2]===this.xTensor.shape[2]&&e[3]===this.outputDepth,"weights must be of shape ["+this.fieldSize+","+this.fieldSize+","+this.xTensor.shape[2]+","+this.outputDepth+"] but they are ofshape ["+e+"]")},t}(n(8).Operation);t.Convolution2D=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),a=n(10),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(t.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(t.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),a=t.get(this.x2Tensor);o.tidy(function(){var s;s=i.isScalarShape(r.shape)?e.scalarDividedByArray(r,a):i.isScalarShape(a.shape)?e.arrayDividedByScalar(r,a):e.divide(r,a),t.set(n.yTensor,o.keep(s))})},t.prototype.backProp=function(e,t,n){var r=this,s=t.get(this.x1Tensor),u=t.get(this.x2Tensor),c=n.get(this.yTensor),l=i.isScalarShape(s.shape),p=i.isScalarShape(u.shape);o.tidy(function(){if(a.shouldBackProp(r.x1Tensor))if(l){var t=e.divide(c,u);n.add(r.x1Tensor,e.sum(t)),t.dispose()}else p?n.add(r.x1Tensor,e.arrayDividedByScalar(c,u)):n.add(r.x1Tensor,e.divide(c,u));if(a.shouldBackProp(r.x2Tensor)){var o,i=e.elementWiseMul(u,u);o=p?e.arrayDividedByScalar(s,i):l?e.scalarDividedByArray(s,i):e.divide(s,i);var h=e.neg(o),d=e.elementWiseMul(c,h);p?n.add(r.x2Tensor,e.sum(d)):n.add(r.x2Tensor,d)}})},t}(n(8).Operation);t.Divide=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(148),a=n(8),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.xTensor=t,o.yTensor=n,o.func=r,o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(n.func.output(e,r)))})},t.prototype.backProp=function(e,t,n){var r=this,i=t.get(this.xTensor),a=t.get(this.yTensor),s=n.get(this.yTensor);o.tidy(function(){var t=r.func.der(e,i,a);n.add(r.xTensor,e.elementWiseMul(s,t)),t.dispose()})},t.prototype.dispose=function(){this.func.dispose()},t}(a.Operation);t.ElementWiseActivation=s;var u=function(e){function t(t,n){return e.call(this,t,n,new i.ReLUFunc)||this}return r(t,e),t}(s);t.ReLU=u;var c=function(e){function t(t,n,r){return e.call(this,t,n,new i.LeakyReluFunc(r))||this}return r(t,e),t}(s);t.LeakyReLU=c;var l=function(e){function t(t,n){return e.call(this,t,n,new i.TanHFunc)||this}return r(t,e),t}(s);t.TanH=l;var p=function(e){function t(t,n){return e.call(this,t,n,new i.SigmoidFunc)||this}return r(t,e),t}(s);t.Sigmoid=p;var h=function(e){function t(t,n){return e.call(this,t,n,new i.SquareFunc)||this}return r(t,e),t}(s);t.Square=h;var d=function(e){function t(t,n){return e.call(this,t,n,new i.EluFunc)||this}return r(t,e),t}(s);t.Elu=d;var f=function(e){function t(t,n,r){var o=e.call(this)||this;return o.xTensor=t,o.alphaTensor=n,o.yTensor=r,o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor),i=t.get(this.alphaTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.prelu(r,i)))})},t.prototype.backProp=function(e,t,n){throw new Error("Not implemented")},t}(a.Operation);t.PReLU=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(3),i=function(){function e(){this.one=o.Scalar.new(1)}return e.prototype.output=function(e,t){return e.tanh(t)},e.prototype.der=function(e,t,n){var o=this;return r.tidy(function(){var t=e.multiplyStrict(n,n);return e.subtract(o.one,t)})},e.prototype.dispose=function(){this.one.dispose()},e}();t.TanHFunc=i;var a=function(){function e(){}return e.prototype.output=function(e,t){return e.relu(t)},e.prototype.der=function(e,t,n){return e.step(t)},e.prototype.dispose=function(){},e}();t.ReLUFunc=a;var s=function(){function e(e){this.alpha=e}return e.prototype.output=function(e,t){return e.leakyRelu(t,this.alpha)},e.prototype.der=function(e,t,n){return e.step(t,this.alpha)},e.prototype.dispose=function(){},e}();t.LeakyReluFunc=s;var u=function(){function e(){}return e.prototype.output=function(e,t){return e.sigmoid(t)},e.prototype.der=function(e,t,n){return r.tidy(function(){var t=e.multiplyStrict(n,n);return e.subStrict(n,t)})},e.prototype.dispose=function(){},e}();t.SigmoidFunc=u;var c=function(){function e(){this.two=o.Scalar.new(2)}return e.prototype.output=function(e,t){return e.multiplyStrict(t,t)},e.prototype.der=function(e,t,n){return e.multiply(this.two,t)},e.prototype.dispose=function(){this.two.dispose()},e}();t.SquareFunc=c;var l=function(){function e(){}return e.prototype.output=function(e,t){return e.elu(t)},e.prototype.der=function(e,t,n){throw new Error("Not implemented")},e.prototype.dispose=function(){},e}();t.EluFunc=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(3),s=n(0),u=n(150),c=n(10),l=function(e){function t(t,n,r,i){var u=e.call(this)||this;return u.x1Tensor=t,u.x2Tensor=n,u.yTensor=r,u.func=i,u.oneOverNScalar=o.ENV.math.keep(a.Scalar.new(1/s.sizeFromShape(t.shape))),u}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),o=t.get(this.x2Tensor);i.tidy(function(){var a=n.func.cost(r,o),s=e.sum(a),u=e.scalarTimesArray(n.oneOverNScalar,s);t.set(n.yTensor,i.keep(u))})},t.prototype.backProp=function(e,t,n){var r=this,o=t.get(this.x1Tensor),a=t.get(this.x2Tensor);i.tidy(function(){c.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,r.func.der(o,a)),c.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,r.func.der(a,o))})},t.prototype.dispose=function(){this.func.dispose(),this.oneOverNScalar.dispose()},t}(n(8).Operation);t.ElementWiseCost=l;var p=function(e){function t(t,n,r){return e.call(this,t,n,r,new u.SquareCostFunc)||this}return r(t,e),t}(l);t.MeanSquaredCost=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=function(){function e(){this.halfOne=r.keep(o.scalar(.5))}return e.prototype.cost=function(e,t){var n=e.subStrict(t),r=n.square(),o=this.halfOne.mul(r);return n.dispose(),r.dispose(),o},e.prototype.der=function(e,t){return e.subStrict(t)},e.prototype.dispose=function(){this.halfOne.dispose()},e}();t.SquareCostFunc=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(10),a=function(e){function t(t,n){var r=e.call(this)||this;return r.xTensor=t,r.yTensor=n,r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.exp(r)))})},t.prototype.backProp=function(e,t,n){var r=this,a=t.get(this.yTensor),s=n.get(this.yTensor);o.tidy(function(){i.shouldBackProp(r.xTensor)&&n.add(r.xTensor,e.elementWiseMul(a,s))})},t}(n(8).Operation);t.Exp=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(10),a=function(e){function t(t,n,r,o,i){var a=e.call(this)||this;return a.x1Tensor=t,a.x2Tensor=n,a.c1Tensor=r,a.c2Tensor=o,a.outTensor=i,a}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor),a=t.get(this.c1Tensor).asScalar(),s=t.get(this.c2Tensor).asScalar();o.tidy(function(){t.set(n.outTensor,o.keep(e.scaledArrayAdd(a,r,s,i)))})},t.prototype.backProp=function(e,t,n){var r=this,a=t.get(this.x1Tensor),s=t.get(this.x2Tensor),u=t.get(this.c1Tensor),c=t.get(this.c2Tensor),l=n.get(this.outTensor);o.tidy(function(){if(i.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,e.scalarTimesArray(u,l)),i.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,e.scalarTimesArray(c,l)),i.shouldBackProp(r.c1Tensor)){var t=e.elementWiseMul(a,l);n.add(r.c1Tensor,e.sum(t))}if(i.shouldBackProp(r.c2Tensor)){var o=e.elementWiseMul(s,l);n.add(r.c2Tensor,e.sum(o))}})},t}(n(8).Operation);t.LinearCombination=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(10),a=function(e){function t(t,n){var r=e.call(this)||this;return r.xTensor=t,r.yTensor=n,r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.log(r)))})},t.prototype.backProp=function(e,t,n){var r=this,a=t.get(this.xTensor),s=n.get(this.yTensor);o.tidy(function(){i.shouldBackProp(r.xTensor)&&n.add(r.xTensor,e.divide(s,a))})},t}(n(8).Operation);t.Log=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(10),a=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),i=t.get(this.x2Tensor);o.tidy(function(){2===r.shape.length&&2===i.shape.length?t.set(n.yTensor,o.keep(e.matMul(r,i))):2===r.shape.length&&1===i.shape.length?t.set(n.yTensor,o.keep(e.matrixTimesVector(r,i))):1===r.shape.length&&2===i.shape.length&&t.set(n.yTensor,o.keep(e.vectorTimesMatrix(r,i)))})},t.prototype.backProp=function(e,t,n){var r=this,a=t.get(this.x1Tensor),s=t.get(this.x2Tensor),u=n.get(this.yTensor);1===a.shape.length&&(a=a.reshape([1,a.size]),u=u.reshape([1,u.size])),1===s.shape.length&&(s=s.reshape([s.size,1]),u=u.reshape([u.size,1])),o.tidy(function(){if(i.shouldBackProp(r.x1Tensor)){var t=e.matMul(u,s,!1,!0);n.add(r.x1Tensor,1===r.x1Tensor.shape.length?t.as1D():t)}if(i.shouldBackProp(r.x2Tensor)){var o=e.matMul(a,u,!0,!1);n.add(r.x2Tensor,1===r.x2Tensor.shape.length?o.as1D():o)}})},t}(n(8).Operation);t.MatMul=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(18),a=n(0),s=function(e){function t(t,n,r,o,s){void 0===o&&(o=1);var u=e.call(this)||this;return u.xTensor=t,u.yTensor=n,u.fieldSize=r,u.stride=o,u.pad=null!=s?s:i.computeDefaultPad(t.shape,u.fieldSize,u.stride),a.assert(a.isInt(u.pad),"The zero padding ("+u.pad+") must be an integer. Change the stride and/or zero pad parameters"),u}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor);o.tidy(function(){t.set(n.yTensor,o.keep(e.maxPool(r,n.fieldSize,n.stride,n.pad)))})},t.prototype.backProp=function(e,t,n){var r=this,i=t.get(this.xTensor),a=n.get(this.yTensor);o.tidy(function(){n.add(r.xTensor,e.maxPoolBackprop(a,i,r.fieldSize,r.stride,r.pad))})},t}(n(8).Operation);t.MaxPool=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),a=n(10),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.x1Tensor=t,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(t.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(t.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x1Tensor),a=t.get(this.x2Tensor);o.tidy(function(){var s;s=i.isScalarShape(r.shape)?e.scalarTimesArray(r,a):i.isScalarShape(a.shape)?e.scalarTimesArray(a,r):e.elementWiseMul(r,a),t.set(n.yTensor,o.keep(s))})},t.prototype.backProp=function(e,t,n){var r=this,s=t.get(this.x1Tensor),u=t.get(this.x2Tensor),c=n.get(this.yTensor);o.tidy(function(){if(a.shouldBackProp(r.x1Tensor))if(i.isScalarShape(r.x1Tensor.shape)){var t=e.elementWiseMul(c,u);n.add(r.x1Tensor,e.sum(t))}else i.isScalarShape(u.shape)?n.add(r.x1Tensor,e.scalarTimesArray(u,c)):n.add(r.x1Tensor,e.elementWiseMul(u,c));a.shouldBackProp(r.x2Tensor)&&(i.isScalarShape(r.x2Tensor.shape)?(t=e.elementWiseMul(c,s),n.add(r.x2Tensor,e.sum(t))):i.isScalarShape(s.shape)?n.add(r.x2Tensor,e.scalarTimesArray(s,c)):n.add(r.x2Tensor,e.elementWiseMul(s,c)))})},t}(n(8).Operation);t.Multiply=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(3),s=n(0),u=n(10),c=function(e){function t(t,n){var r=e.call(this)||this;return r.x=t,r.outTensor=n,s.assertShapesMatch(n.shape,[]),r.ones=o.ENV.math.keep(a.Tensor.ones(t.shape)),r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.x);i.tidy(function(){t.set(n.outTensor,i.keep(e.sum(r)))})},t.prototype.backProp=function(e,t,n){var r=this;u.shouldBackProp(this.x)&&i.tidy(function(){var t=n.get(r.outTensor);n.add(r.x,e.scalarTimesArray(t,r.ones))})},t.prototype.dispose=function(){this.ones.dispose()},t}(n(8).Operation);t.ReduceSum=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),a=function(e){function t(t,n){var r=e.call(this)||this;r.xTensor=t,r.yTensor=n;var o=i.sizeFromShape(t.shape),a=i.sizeFromShape(n.shape);return i.assert(o===a,"The input size ("+o+") and output size ("+a+") must match"),r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.xTensor),i=e.clone(r);o.tidy(function(){t.set(n.yTensor,o.keep(i.reshape(n.yTensor.shape)))})},t.prototype.backProp=function(e,t,n){var r=this,i=n.get(this.yTensor),a=e.clone(i);o.tidy(function(){n.add(r.xTensor,a.reshape(r.xTensor.shape))})},t}(n(8).Operation);t.Reshape=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(3),s=n(0),u=n(23),c=n(10),l=n(8),p=function(e){function t(t,n){var r=e.call(this)||this;return r.logitsTensor=t,r.output=n,r}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.logitsTensor);return i.tidy(function(){t.set(n.output,i.keep(e.softmax(r)))})},t.prototype.backProp=function(e,t,n){var r=this,o=t.get(this.output),a=n.get(this.output);i.tidy(function(){if(c.shouldBackProp(r.logitsTensor)){var t=e.elementWiseMul(e.subtract(a,e.sum(e.elementWiseMul(a,o))),o);n.add(r.logitsTensor,t)}})},t}(l.Operation);t.Softmax=p;var h=function(e){function t(t,n,r){var i=e.call(this)||this;return i.logitsTensor=t,i.labelTensor=n,i.yTensor=r,i.softmaxTensor=new u.SymbolicTensor(t.shape),i.epsilon=o.ENV.math.keep(a.Scalar.new(1e-5)),i}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.logitsTensor),o=t.get(this.labelTensor);i.tidy(function(){var a=e.softmax(r);t.set(n.softmaxTensor,i.keep(a)),t.set(n.yTensor,i.keep(d(e,a,o,n.epsilon)))})},t.prototype.backProp=function(e,t,n){var r=this,o=t.get(this.softmaxTensor),a=t.get(this.labelTensor);i.tidy(function(){n.add(r.logitsTensor,e.subtract(o,a))})},t.prototype.disposeTransientArrays=function(e,t){e.disposeArray(this.softmaxTensor)},t.prototype.dispose=function(){this.epsilon.dispose()},t}(l.Operation);function d(e,t,n,r){return s.assert(t.size===n.size,"The output and target must be the same size"),i.tidy(function(){var o=e.scalarPlusArray(r,t),i=e.log(o),a=e.elementWiseMul(n,i),s=e.neg(a);return e.sum(s)})}t.SoftmaxCrossEntropyCost=h,t.crossEntropyCost=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),a=n(10),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.t1=t,o.t2=n,o.outTensor=r,i.assert(1===i.sizeFromShape(t.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(t.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return r(t,e),t.prototype.feedForward=function(e,t){var n=this,r=t.get(this.t1),a=t.get(this.t2);o.tidy(function(){var s;s=i.isScalarShape(r.shape)?e.scalarMinusArray(r,a):i.isScalarShape(a.shape)?e.arrayMinusScalar(r,a):e.subtract(r,a),t.set(n.outTensor,o.keep(s))})},t.prototype.backProp=function(e,t,n){var r=this,s=n.get(this.outTensor);o.tidy(function(){if(a.shouldBackProp(r.t1))if(i.isScalarShape(r.t1.shape)){var t=e.sum(s);n.add(r.t1,t)}else n.add(r.t1,e.clone(s));if(a.shouldBackProp(r.t2))if(i.isScalarShape(r.t2.shape)){t=e.sum(s);var o=e.neg(t);n.add(r.t2,o)}else n.add(r.t2,e.neg(s))})},t.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},t}(n(8).Operation);t.Subtract=s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(0),s={float32:4,int32:4};t.loadWeights=function(e,t,n){return void 0===t&&(t=""),r(this,void 0,void 0,function(){var r,u,c,l,p,h,d,f,m,g,v;return o(this,function(o){switch(o.label){case 0:if(r=e.map(function(){return!1}),u={},c=null!=n?n.map(function(){return!1}):[],l=[],e.forEach(function(e,t){var o=0;e.weights.forEach(function(e){var i=s[e.dtype]*a.sizeFromShape(e.shape),p=function(){r[t]=!0,null==u[t]&&(u[t]=[]),u[t].push({manifestEntry:e,groupOffset:o,sizeBytes:i})};null!=n?n.forEach(function(t,n){t===e.name&&(p(),c[n]=!0)}):p(),l.push(e.name),o+=i})}),!c.every(function(e){return e}))throw p=n.filter(function(e,t){return!c[t]}),new Error("Could not find weights in manifest with names: "+p.join(", ")+". \nManifest JSON has weights with names: "+l.join(", ")+".");return h=r.reduce(function(e,t,n){return t&&e.push(n),e},[]),d=[],h.forEach(function(n){e[n].paths.forEach(function(e){var n=t+(t.endsWith("/")?"":"/")+e;d.push(fetch(n))})}),[4,Promise.all(d)];case 1:return f=o.sent(),[4,Promise.all(f.map(function(e){return e.arrayBuffer()}))];case 2:return m=o.sent(),g={},v=0,h.forEach(function(t){for(var n=e[t].paths.length,r=0,o=0;o<n;o++)r+=m[v+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),c=0,l=0;l<n;l++){var p=new Uint8Array(m[v+l]);s.set(p,c),c+=p.byteLength}u[t].forEach(function(e){var t,n=a.slice(e.groupOffset,e.groupOffset+e.sizeBytes);if("float32"===e.manifestEntry.dtype)t=new Float32Array(n);else{if("int32"!==e.manifestEntry.dtype)throw new Error("Weight "+e.manifestEntry.name+" has unknown dtype "+e.manifestEntry.dtype+".");t=new Int32Array(n)}var r=e.manifestEntry.name;if(null!=g[r])throw new Error("Duplicate weight with name "+r+". Please make sure weights names are unique in the manifest JSON.");g[r]=i.tensor(t,e.manifestEntry.shape,e.manifestEntry.dtype)}),v+=n}),[2,g]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=n(35),i=n(36),a=n(37),s=n(38),u=n(163),c=n(39),l=n(29);s.MomentumOptimizer,l.SGDOptimizer,r.AdadeltaOptimizer,o.AdagradOptimizer,c.RMSPropOptimizer,a.AdamaxOptimizer,i.AdamOptimizer,t.train={sgd:u.OptimizerConstructors.sgd,momentum:u.OptimizerConstructors.momentum,adadelta:u.OptimizerConstructors.adadelta,adagrad:u.OptimizerConstructors.adagrad,rmsprop:u.OptimizerConstructors.rmsprop,adamax:u.OptimizerConstructors.adamax,adam:u.OptimizerConstructors.adam}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(34),a=n(35),s=n(36),u=n(37),c=n(38),l=n(39),p=n(29),h=function(){function e(){}return e.sgd=function(e){return new p.SGDOptimizer(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new c.MomentumOptimizer(e,t,void 0,n)},e.rmsprop=function(e,t,n,r){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=1e-8),new l.RMSPropOptimizer(e,t,n,void 0,r)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=1e-8),new s.AdamOptimizer(e,t,n,r,void 0)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=1e-8),new i.AdadeltaOptimizer(e,t,void 0,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=1e-8),void 0===o&&(o=0),new u.AdamaxOptimizer(e,t,n,r,o,void 0)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new a.AdagradOptimizer(e,void 0,t)},r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"sgd",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"momentum",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"rmsprop",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adam",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adadelta",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adamax",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],e,"adagrad",null),e}();t.OptimizerConstructors=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(165);t.SqueezeNet=r.SqueezeNet},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),a=n(166),s=n(167),u=function(){function e(){this.preprocessOffset=i.tensor1d([103.939,116.779,123.68])}return e.prototype.load=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=new i.CheckpointLoader("https://storage.googleapis.com/learnjs-data/checkpoint_zoo/squeezenet1_1/"),t=this,[4,e.getAllVariables()];case 1:return t.variables=n.sent(),[2]}})})},e.prototype.predict=function(e){return this.predictWithActivation(e).logits},e.prototype.predictWithActivation=function(e,t){var n=this;return i.tidy(function(){var r,o=i.sub(e.asType("float32"),n.preprocessOffset).conv2d(n.variables["conv1_W:0"],2,0).add(n.variables["conv1_b:0"]).relu();"conv_1"===t&&(r=o);var a=o.maxPool(3,2,0);"maxpool_1"===t&&(r=a);var s=n.fireModule(a,2);"fire2"===t&&(r=s);var u=n.fireModule(s,3);"fire3"===t&&(r=u);var c=u.maxPool(3,2,"valid");"maxpool_2"===t&&(r=c);var l=n.fireModule(c,4);"fire4"===t&&(r=l);var p=n.fireModule(l,5);"fire5"===t&&(r=p);var h=p.maxPool(3,2,0);"maxpool_3"===t&&(r=h);var d=n.fireModule(h,6);"fire6"===t&&(r=d);var f=n.fireModule(d,7);"fire7"===t&&(r=f);var m=n.fireModule(f,8);"fire8"===t&&(r=m);var g=n.fireModule(m,9);"fire9"===t&&(r=g);var v=g.conv2d(n.variables["conv10_W:0"],1,0).add(n.variables["conv10_b:0"]);return"conv10"===t&&(r=v),{logits:i.avgPool(v,v.shape[0],1,0).as1D(),activation:r}})},e.prototype.fireModule=function(e,t){var n=i.conv2d(e,this.variables["fire"+t+"/squeeze1x1_W:0"],1,0).add(this.variables["fire"+t+"/squeeze1x1_b:0"]).relu(),r=i.conv2d(n,this.variables["fire"+t+"/expand1x1_W:0"],1,0).add(this.variables["fire"+t+"/expand1x1_b:0"]).relu(),o=i.conv2d(n,this.variables["fire"+t+"/expand3x3_W:0"],1,1).add(this.variables["fire"+t+"/expand3x3_b:0"]).relu();return r.concat(o,2)},e.prototype.getTopKClasses=function(e,t){return r(this,void 0,void 0,function(){var n,r,u,c,l,p,h,d;return o(this,function(o){switch(o.label){case 0:return n=i.tidy(function(){return i.softmax(e).asType("float32")}),c=(u=a).topK,[4,n.data()];case 1:for(r=c.apply(u,[o.sent(),t]),n.dispose(),l=r.indices,p=r.values,h={},d=0;d<l.length;d++)h[s.IMAGENET_CLASSES[l[d]]]=p[d];return[2,h]}})})},e.prototype.dispose=function(){for(var e in this.preprocessOffset.dispose(),this.variables)this.variables[e].dispose()},e}();t.SqueezeNet=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.topK=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push({value:e[r],index:r});n.sort(function(e,t){return t.value-e.value});var o=new Float32Array(t),i=new Int32Array(t);for(r=0;r<t;r++)o[r]=n[r].value,i[r]=n[r].index;return{values:o,indices:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGENET_CLASSES={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.topK=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push({value:e[r],index:r});n.sort(function(e,t){return t.value-e.value});var o=new Float32Array(t),i=new Int32Array(t);for(r=0;r<t;r++)o[r]=n[r].value,i[r]=n[r].index;return{values:o,indices:i}}}]);